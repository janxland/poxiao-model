{"ast":null,"code":"/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { defineComponent, computed, createVNode } from 'vue';\nimport { MirrorIcon, RotationIcon, ZoomOutIcon, ZoomInIcon, ImageIcon, DownloadIcon } from 'tdesign-icons-vue-next';\nimport TImageViewerIcon from './ImageModalIcon.mjs';\nimport { Tooltip } from '../../tooltip/index.mjs';\nimport { usePrefixClass } from '../../hooks/useConfig.mjs';\nimport { downloadFile } from '../utils.mjs';\nimport '../../hooks/index.mjs';\nimport { largeNumberToFixed } from '../../_common/js/input-number/large-number.mjs';\nimport { useImagePreviewUrl } from '../../hooks/useImagePreviewUrl.mjs';\nimport { useConfig } from '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-7deaa3b9.mjs';\nimport '../../_chunks/dep-8dbc9855.mjs';\nimport '../../hooks/tnode.mjs';\nimport '../../_chunks/dep-66473aa9.mjs';\nimport '../../_chunks/dep-cb814df4.mjs';\nimport '../../_chunks/dep-cd533155.mjs';\nimport '../../_chunks/dep-715774e0.mjs';\nimport '../../_chunks/dep-5a5a1764.mjs';\nimport '../../_chunks/dep-f8909853.mjs';\nimport '../../_chunks/dep-67e59a11.mjs';\nimport '../../_chunks/dep-ab439391.mjs';\nimport '../../_chunks/dep-60d62610.mjs';\nimport '../../_chunks/dep-10024af3.mjs';\nimport '../../_chunks/dep-2adf18a2.mjs';\nimport '../../_chunks/dep-d00e2e04.mjs';\nimport '../../_chunks/dep-ec2f76cc.mjs';\nimport '../../_chunks/dep-96484611.mjs';\nimport '../../_chunks/dep-bd7cd061.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-60ee423b.mjs';\nimport '../../_chunks/dep-c545db54.mjs';\nimport '../../_chunks/dep-d4da440a.mjs';\nimport '../../_chunks/dep-013382c3.mjs';\nimport '../../_chunks/dep-3108c312.mjs';\nimport '../../_chunks/dep-ca764006.mjs';\nimport '../../_chunks/dep-996b4900.mjs';\nimport '../../_chunks/dep-3f15cb30.mjs';\nimport '../../_chunks/dep-0f89a1dd.mjs';\nimport '../../_chunks/dep-30b3f256.mjs';\nimport '../../_chunks/dep-37e3e644.mjs';\nimport '../../_chunks/dep-31dc0415.mjs';\nimport '../../_chunks/dep-e5142249.mjs';\nimport '../../_chunks/dep-c4f80cb4.mjs';\nimport '../../_chunks/dep-93498383.mjs';\nimport '../../_chunks/dep-36582a92.mjs';\nimport '../../_chunks/dep-a2db6df1.mjs';\nimport '../../_chunks/dep-2ee9d497.mjs';\nimport '../../_chunks/dep-fd2b6c64.mjs';\nimport '../../_chunks/dep-b3734774.mjs';\nimport '../../_chunks/dep-a4a3ac25.mjs';\nimport '../../_chunks/dep-6861d388.mjs';\nimport '../../_chunks/dep-396d852b.mjs';\nimport '../../_chunks/dep-8a3fd140.mjs';\nimport '../../_chunks/dep-5db0da5c.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-bf19d9ba.mjs';\nimport '../../_chunks/dep-6963a882.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../tooltip/tooltip.mjs';\nimport '../../_chunks/dep-b089fa1f.mjs';\nimport '../../_chunks/dep-8e411f1c.mjs';\nimport '../../_chunks/dep-8fdb2da0.mjs';\nimport '../../_chunks/dep-8dae3bca.mjs';\nimport '../../_chunks/dep-d7c36095.mjs';\nimport '../../_chunks/dep-4481f632.mjs';\nimport '../../tooltip/props.mjs';\nimport '../../popup/props.mjs';\nimport '../../popup/index.mjs';\nimport '../../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../../_chunks/dep-665d45b4.mjs';\nimport '../../_chunks/dep-27be073b.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../_common/js/utils/set-style.mjs';\nimport '../../popup/container.mjs';\nimport '../../_chunks/dep-b15588b0.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../hooks/icon.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../hooks/useCommonClassName.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport '../../hooks/useDestroyOnClose.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/useVirtualScroll.mjs';\nimport '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../../popup/type.mjs';\nimport '../../tooltip/util.mjs';\nimport '../../tooltip/type.mjs';\nimport '../../_chunks/dep-0e4de31a.mjs';\nvar TImageViewerUtils = defineComponent({\n  name: \"TImageViewerUtils\",\n  props: {\n    scale: Number,\n    onRotate: Function,\n    onZoomIn: Function,\n    onZoomOut: Function,\n    onMirror: Function,\n    onReset: Function,\n    currentImage: {\n      type: Object,\n      \"default\": function _default() {\n        return {};\n      }\n    }\n  },\n  setup: function setup(props) {\n    var classPrefix = usePrefixClass();\n    var imageUrl = computed(function () {\n      return props.currentImage.mainImage;\n    });\n    var _useImagePreviewUrl = useImagePreviewUrl(imageUrl),\n      previewUrl = _useImagePreviewUrl.previewUrl;\n    var _useConfig = useConfig(\"imageViewer\"),\n      globalConfig = _useConfig.globalConfig;\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image-viewer__utils\")\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-image-viewer__utils-content\")\n      }, [createVNode(Tooltip, {\n        \"overlayClassName\": \"\".concat(classPrefix.value, \"-image-viewer__utils--tip\"),\n        \"content\": globalConfig.value.mirrorTipText,\n        \"destroyOnClose\": true,\n        \"placement\": \"top\",\n        \"showArrow\": true,\n        \"theme\": \"default\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(TImageViewerIcon, {\n            \"onClick\": props.onMirror,\n            \"icon\": function icon() {\n              return createVNode(MirrorIcon, {\n                \"size\": \"medium\"\n              }, null);\n            }\n          }, null)];\n        }\n      }), createVNode(Tooltip, {\n        \"overlayClassName\": \"\".concat(classPrefix.value, \"-image-viewer__utils--tip\"),\n        \"content\": globalConfig.value.rotateTipText,\n        \"destroyOnClose\": true,\n        \"placement\": \"top\",\n        \"showArrow\": true,\n        \"theme\": \"default\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(TImageViewerIcon, {\n            \"onClick\": props.onRotate,\n            \"icon\": function icon() {\n              return createVNode(RotationIcon, {\n                \"size\": \"medium\"\n              }, null);\n            }\n          }, null)];\n        }\n      }), createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(ZoomOutIcon, {\n            \"size\": \"medium\"\n          }, null);\n        },\n        \"onClick\": props.onZoomOut\n      }, null), createVNode(TImageViewerIcon, {\n        \"class\": \"\".concat(classPrefix.value, \"-image-viewer__utils-scale\"),\n        \"size\": \"medium\",\n        \"label\": \"\".concat(largeNumberToFixed(String(props.scale * 100)), \"%\")\n      }, null), createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(ZoomInIcon, {\n            \"size\": \"medium\"\n          }, null);\n        },\n        \"onClick\": props.onZoomIn\n      }, null), createVNode(Tooltip, {\n        \"overlayClassName\": \"\".concat(classPrefix.value, \"-image-viewer__utils--tip\"),\n        \"content\": globalConfig.value.originalSizeTipText,\n        \"destroyOnClose\": true,\n        \"placement\": \"top\",\n        \"showArrow\": true,\n        \"theme\": \"default\"\n      }, {\n        \"default\": function _default() {\n          return [createVNode(\"div\", {\n            \"class\": \"\".concat(classPrefix.value, \"-image-viewer__modal-icon\")\n          }, [createVNode(TImageViewerIcon, {\n            \"icon\": function icon() {\n              return createVNode(ImageIcon, {\n                \"size\": \"medium\"\n              }, null);\n            },\n            \"onClick\": props.onReset\n          }, null)])];\n        }\n      }), props.currentImage.download && createVNode(TImageViewerIcon, {\n        \"icon\": function icon() {\n          return createVNode(DownloadIcon, {\n            \"size\": \"medium\"\n          }, null);\n        },\n        \"onClick\": function onClick() {\n          downloadFile(previewUrl.value);\n        }\n      }, null)])]);\n    };\n  }\n});\nexport { TImageViewerUtils as default };","map":{"version":3,"names":["TImageViewerUtils","defineComponent","name","props","scale","Number","onRotate","Function","onZoomIn","onZoomOut","onMirror","onReset","currentImage","type","Object","_default","setup","classPrefix","usePrefixClass","imageUrl","computed","mainImage","_useImagePreviewUrl","useImagePreviewUrl","previewUrl","_useConfig","useConfig","globalConfig","createVNode","concat","value","Tooltip","mirrorTipText","TImageViewerIcon","icon","MirrorIcon","rotateTipText","RotationIcon","ZoomOutIcon","largeNumberToFixed","String","ZoomInIcon","originalSizeTipText","ImageIcon","download","DownloadIcon","onClick","downloadFile"],"sources":["../../../src/image-viewer/base/ImageViewerUtils.tsx"],"sourcesContent":["import { computed, defineComponent, PropType } from 'vue';\nimport { ImageIcon, ZoomInIcon, ZoomOutIcon, DownloadIcon, MirrorIcon, RotationIcon } from 'tdesign-icons-vue-next';\nimport TImageViewerIcon from './ImageModalIcon';\nimport TToolTip from '../../tooltip';\nimport { usePrefixClass, useConfig } from '../../hooks/useConfig';\nimport { downloadFile } from '../utils';\nimport { useImagePreviewUrl } from '../../hooks';\nimport { ImageInfo } from '../type';\nimport { largeNumberToFixed } from '../../_common/js/input-number/large-number';\n\nexport default defineComponent({\n  name: 'TImageViewerUtils',\n  props: {\n    scale: Number,\n    onRotate: Function as PropType<() => void>,\n    onZoomIn: Function as PropType<() => void>,\n    onZoomOut: Function as PropType<() => void>,\n    onMirror: Function as PropType<() => void>,\n    onReset: Function as PropType<() => void>,\n    currentImage: {\n      type: Object as PropType<ImageInfo>,\n      default() {\n        return {};\n      },\n    },\n  },\n  setup(props) {\n    const classPrefix = usePrefixClass();\n    const imageUrl = computed(() => props.currentImage.mainImage);\n\n    const { previewUrl } = useImagePreviewUrl(imageUrl);\n    const { globalConfig } = useConfig('imageViewer');\n\n    return () => (\n      <div class={`${classPrefix.value}-image-viewer__utils`}>\n        <div class={`${classPrefix.value}-image-viewer__utils-content`}>\n          <TToolTip\n            overlayClassName={`${classPrefix.value}-image-viewer__utils--tip`}\n            content={globalConfig.value.mirrorTipText}\n            destroyOnClose\n            placement=\"top\"\n            showArrow\n            theme=\"default\"\n          >\n            <TImageViewerIcon onClick={props.onMirror} icon={() => <MirrorIcon size=\"medium\" />} />\n          </TToolTip>\n          <TToolTip\n            overlayClassName={`${classPrefix.value}-image-viewer__utils--tip`}\n            content={globalConfig.value.rotateTipText}\n            destroyOnClose\n            placement=\"top\"\n            showArrow\n            theme=\"default\"\n          >\n            <TImageViewerIcon onClick={props.onRotate} icon={() => <RotationIcon size=\"medium\" />} />\n          </TToolTip>\n          <TImageViewerIcon icon={() => <ZoomOutIcon size=\"medium\" />} onClick={props.onZoomOut} />\n          <TImageViewerIcon\n            class={`${classPrefix.value}-image-viewer__utils-scale`}\n            size=\"medium\"\n            label={`${largeNumberToFixed(String(props.scale * 100))}%`}\n          />\n\n          <TImageViewerIcon icon={() => <ZoomInIcon size=\"medium\" />} onClick={props.onZoomIn} />\n          <TToolTip\n            overlayClassName={`${classPrefix.value}-image-viewer__utils--tip`}\n            content={globalConfig.value.originalSizeTipText}\n            destroyOnClose\n            placement=\"top\"\n            showArrow\n            theme=\"default\"\n          >\n            <div class={`${classPrefix.value}-image-viewer__modal-icon`}>\n              <TImageViewerIcon icon={() => <ImageIcon size=\"medium\" />} onClick={props.onReset} />\n            </div>\n          </TToolTip>\n          {props.currentImage.download && (\n            <TImageViewerIcon\n              icon={() => <DownloadIcon size=\"medium\" />}\n              onClick={() => {\n                downloadFile(previewUrl.value);\n              }}\n            />\n          )}\n        </div>\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}