{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _typeof } from '../_chunks/dep-d33c5d88.mjs';\nimport { getCurrentInstance, Fragment, Comment } from 'vue';\nimport { i as isArray_1 } from '../_chunks/dep-10c900d8.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nfunction useChildComponentSlots() {\n  var instance = getCurrentInstance();\n  return function (childComponentName, slots) {\n    var _slots, _slots$default;\n    if (!slots) {\n      slots = instance.slots;\n    }\n    var content = ((_slots = slots) === null || _slots === void 0 || (_slots$default = _slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call(_slots)) || [];\n    var childList = [];\n    var getChildren = function getChildren(content2) {\n      if (!isArray_1(content2)) return;\n      content2.forEach(function (item) {\n        if (item.children && isArray_1(item.children)) {\n          if (item.type !== Fragment) return;\n          getChildren(item.children);\n        } else {\n          childList.push(item);\n        }\n      });\n      return childList;\n    };\n    return getChildren(content).filter(function (item) {\n      var _item$type$name;\n      return (_item$type$name = item.type.name) === null || _item$type$name === void 0 ? void 0 : _item$type$name.endsWith(childComponentName);\n    });\n  };\n}\nfunction useChildSlots() {\n  var instance = getCurrentInstance();\n  return function () {\n    var _slots$default2;\n    var slots = instance.slots;\n    var content = (slots === null || slots === void 0 || (_slots$default2 = slots[\"default\"]) === null || _slots$default2 === void 0 ? void 0 : _slots$default2.call(slots)) || [];\n    return content.filter(function (item) {\n      if (_typeof(item.type) === \"symbol\" && !item.children) {\n        return false;\n      }\n      return item.type !== Comment;\n    }).map(function (item) {\n      if (item.children && isArray_1(item.children) && item.type === Fragment) return item.children;\n      return item;\n    }).flat();\n  };\n}\nexport { useChildComponentSlots, useChildSlots };","map":{"version":3,"names":["useChildComponentSlots","instance","getCurrentInstance","childComponentName","slots","_slots","_slots$default","content","call","childList","getChildren","content2","isArray_1","forEach","item","children","type","Fragment","push","filter","_item$type$name","name","endsWith","useChildSlots","_slots$default2","_typeof","Comment","map","flat"],"sources":["../../src/hooks/slot.ts"],"sourcesContent":["import {\n  Slots,\n  VNode,\n  Component,\n  getCurrentInstance,\n  Fragment,\n  Comment,\n  RendererNode,\n  VNodeArrayChildren,\n  RendererElement,\n  VNodeChild,\n} from 'vue';\nimport isArray from 'lodash/isArray';\n\n/**\n * 渲染default slot，获取子组件VNode。处理多种子组件创建场景\n * 使用场景：<t-steps> <t-steps-item /> </t-steps>, <t-steps> <t-steps-item v-for=\"(item, index)\" :key=\"index\" /> </t-steps>\n * @returns {function(childComponentName: string, slots: Slots): VNode[]}\n * @param childComponentName\n * @param slots\n * @example const getChildByName = useChildComponentSlots()\n * @example getChildComponentByName('TStepItem')\n */\nexport function useChildComponentSlots() {\n  const instance = getCurrentInstance();\n  return (childComponentName: string, slots?: Slots): VNode[] => {\n    if (!slots) {\n      slots = instance.slots;\n    }\n    const content = slots?.default?.() || [];\n\n    // 满足基于基础组件封装场景，递归找到子组件\n    const childList: VNode[] = [];\n    const getChildren = (content: VNode[]) => {\n      if (!isArray(content)) return;\n      content.forEach((item: VNode) => {\n        if (item.children && isArray(item.children)) {\n          if (item.type !== Fragment) return;\n          getChildren(item.children as VNode[]);\n        } else {\n          childList.push(item);\n        }\n      });\n      return childList;\n    };\n\n    return getChildren(content).filter((item: VNode) =>\n      (item.type as Component).name?.endsWith(childComponentName),\n    ) as VNode[];\n  };\n}\n\n/**\n * 渲染default slot，获取slot child\n * @param childComponentName\n * @param slots\n * @example const getChildSlots = useChildSlots()\n * @example getChildSlots()\n */\nexport function useChildSlots(): () => (\n  | VNode<\n      RendererNode,\n      RendererElement,\n      {\n        [key: string]: any;\n      }\n    >\n  | VNodeArrayChildren\n  | VNodeChild\n)[] {\n  const instance = getCurrentInstance();\n  return () => {\n    const { slots } = instance;\n    const content = slots?.default?.() || [];\n\n    return content\n      .filter((item) => {\n        if (typeof item.type === 'symbol' && !item.children) {\n          return false;\n        }\n        return item.type !== Comment;\n      })\n      .map((item) => {\n        if (item.children && isArray(item.children) && item.type === Fragment) return item.children;\n        return item;\n      })\n      .flat();\n  };\n}\n"],"mappings":";;;;;;;;;;;AAuBO,SAASA,sBAAyBA,CAAA;EACvC,IAAMC,QAAA,GAAWC,kBAAmB;EAC7B,iBAACC,kBAAA,EAA4BC,KAA2B;IAAA,IAAAC,MAAA,EAAAC,cAAA;IAC7D,IAAI,CAACF,KAAO;MACVA,KAAA,GAAQH,QAAS,CAAAG,KAAA;IACnB;IACA,IAAMG,OAAU,KAAAF,MAAA,GAAAD,KAAA,cAAAC,MAAA,gBAAAC,cAAA,GAAAD,MAAA,CAAiB,wBAAAC,cAAA,uBAAjBA,cAAA,CAAAE,IAAA,CAAAH,MAAiB,MAAK,EAAC;IAGvC,IAAMI,SAAA,GAAqB,EAAC;IACtB,IAAAC,WAAA,GAAc,SAAdA,YAAeC,QAAqB;MACpC,KAACC,SAAA,CAAQD,QAAO,GAAG;MACvBA,QAAA,CAAQE,OAAQ,WAACC,IAAgB;QAC/B,IAAIA,IAAK,CAAAC,QAAA,IAAYH,SAAQ,CAAAE,IAAA,CAAKC,QAAQ,CAAG;UAC3C,IAAID,IAAA,CAAKE,IAAS,KAAAC,QAAA,EAAU;UAC5BP,WAAA,CAAYI,IAAA,CAAKC,QAAmB;QACtC,CAAO;UACLN,SAAA,CAAUS,IAAA,CAAKJ,IAAI;QACrB;MACF,CAAC;MACM,OAAAL,SAAA;KACT;IAEO,OAAAC,WAAA,CAAYH,OAAO,CAAE,CAAAY,MAAA,CAAO,UAACL,IACjC;MAAA,IAAAM,eAAA;MAAA,QAAAA,eAAA,GAAAN,IAAA,CAAKE,IAAmB,CAAAK,IAAA,cAAAD,eAAA,uBAAxBA,eAAA,CAA8BE,QAAA,CAASnB,kBAAkB;IAAA,CAC5D;GACF;AACF;AASO,SAASoB,aAUZA,CAAA;EACF,IAAMtB,QAAA,GAAWC,kBAAmB;EACpC,OAAO,YAAM;IAAA,IAAAsB,eAAA;IACL,IAAEpB,KAAA,GAAUH,QAAA,CAAVG,KAAA;IACR,IAAMG,OAAU,IAAAH,KAAA,aAAAA,KAAA,gBAAAoB,eAAA,GAAApB,KAAA,WAAiB,cAAAoB,eAAA,uBAAjBA,eAAA,CAAAhB,IAAA,CAAAJ,KAAiB,MAAK,EAAC;IAEhC,OAAAG,OAAA,CACJY,MAAO,WAACL,IAAS;MAChB,IAAIW,OAAA,CAAOX,IAAK,CAAAE,IAAA,MAAS,QAAY,KAACF,IAAA,CAAKC,QAAU;QAC5C;MACT;MACA,OAAOD,IAAA,CAAKE,IAAS,KAAAU,OAAA;IACvB,CAAC,EACAC,GAAI,WAACb,IAAS;MACb,IAAIA,IAAA,CAAKC,QAAY,IAAAH,SAAA,CAAQE,IAAA,CAAKC,QAAQ,KAAKD,IAAA,CAAKE,IAAS,KAAAC,QAAA,EAAU,OAAOH,IAAK,CAAAC,QAAA;MAC5E,OAAAD,IAAA;IACT,CAAC,EACAc,IAAK;GACV;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}