{"ast":null,"code":"/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { computed, ref, onMounted, nextTick } from 'vue';\nimport observe from '../_common/js/utils/observe.mjs';\nimport { isServer } from '../utils/dom.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nimport '../_chunks/dep-5d7be5c6.mjs';\nimport '../_chunks/dep-6ad32365.mjs';\nimport '../_chunks/dep-d33c5d88.mjs';\nimport '../_chunks/dep-10c900d8.mjs';\nimport '../_chunks/dep-1c5d24dd.mjs';\nimport '../_chunks/dep-75628739.mjs';\nimport '../_chunks/dep-6e7655db.mjs';\nimport '../_chunks/dep-62ad5a36.mjs';\nimport '../_chunks/dep-f76ec896.mjs';\nimport '../utils/easing.mjs';\nfunction useLazyLoad(containerRef, childRef, params) {\n  var tRowHeight = computed(function () {\n    return Math.max(params.rowHeight || 48, 48);\n  });\n  var isInit = ref(false);\n  var hasLazyLoadHolder = computed(function () {\n    return (params === null || params === void 0 ? void 0 : params.type) === \"lazy\" && !isInit.value;\n  });\n  var requestAnimationFrame = !isServer && window.requestAnimationFrame || function (cb) {\n    return setTimeout(cb, 16.6);\n  };\n  var init = function init() {\n    if (!isInit.value) {\n      requestAnimationFrame(function () {\n        isInit.value = true;\n      });\n    }\n  };\n  onMounted(function () {\n    if ((params === null || params === void 0 ? void 0 : params.type) !== \"lazy\") return;\n    nextTick(function () {\n      var bufferSize = Math.max(10, params.bufferSize || 10);\n      var height = tRowHeight.value * bufferSize;\n      observe(childRef.value, containerRef.value, init, height);\n    });\n  });\n  return {\n    hasLazyLoadHolder: hasLazyLoadHolder,\n    tRowHeight: tRowHeight\n  };\n}\nexport { useLazyLoad as default };","map":{"version":3,"names":["useLazyLoad","containerRef","childRef","params","tRowHeight","computed","Math","max","rowHeight","isInit","ref","hasLazyLoadHolder","type","value","requestAnimationFrame","isServer","window","cb","setTimeout","init","onMounted","nextTick","bufferSize","height","observe"],"sources":["../../src/hooks/useLazyLoad.ts"],"sourcesContent":["import { ref, onMounted, computed, nextTick, Ref, UnwrapRef } from 'vue';\nimport observe from '../_common/js/utils/observe';\nimport { isServer } from '../utils/dom';\n\nexport type UseLazyLoadParams = UnwrapRef<{\n  type: 'lazy' | 'virtual';\n  rowHeight?: number;\n  bufferSize?: number;\n}>;\n\nexport default function useLazyLoad(\n  containerRef: Ref<HTMLElement>,\n  childRef: Ref<HTMLElement>,\n  params: UseLazyLoadParams,\n) {\n  const tRowHeight = computed(() => Math.max(params.rowHeight || 48, 48));\n  const isInit = ref(false);\n  const hasLazyLoadHolder = computed(() => params?.type === 'lazy' && !isInit.value);\n\n  const requestAnimationFrame = (!isServer && window.requestAnimationFrame) || ((cb) => setTimeout(cb, 16.6));\n\n  const init = () => {\n    if (!isInit.value) {\n      requestAnimationFrame(() => {\n        isInit.value = true;\n      });\n    }\n  };\n\n  onMounted(() => {\n    if (params?.type !== 'lazy') return;\n    nextTick(() => {\n      const bufferSize = Math.max(10, params.bufferSize || 10);\n      const height = tRowHeight.value * bufferSize;\n      observe(childRef.value, containerRef.value, init, height);\n    });\n  });\n\n  return {\n    hasLazyLoadHolder,\n    tRowHeight,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAUwB,SAAAA,YACtBC,YACA,EAAAC,QAAA,EACAC,MACA;EACM,IAAAC,UAAA,GAAaC,QAAA,CAAS;IAAA,OAAMC,IAAA,CAAKC,GAAA,CAAIJ,MAAO,CAAAK,SAAA,IAAa,EAAI,IAAE,CAAC;GAAA;EAChE,IAAAC,MAAA,GAASC,GAAA,CAAI,KAAK;EAClB,IAAAC,iBAAA,GAAoBN,QAAA,CAAS;IAAA,OAAM,CAAAF,MAAA,aAAAA,MAAA,uBAAAA,MAAA,CAAQS,IAAA,MAAS,MAAU,KAACH,MAAA,CAAOI,KAAK;GAAA;EAE3E,IAAAC,qBAAA,GAAyB,CAACC,QAAY,IAAAC,MAAA,CAAOF,qBAAA,IAA2B,UAACG,EAAA;IAAA,OAAOC,UAAW,CAAAD,EAAA,EAAI,IAAI;GAAA;EAEzG,IAAME,IAAA,GAAO,SAAPA,KAAA,EAAa;IACb,KAACV,MAAA,CAAOI,KAAO;MACjBC,qBAAA,CAAsB,YAAM;QAC1BL,MAAA,CAAOI,KAAQ;MACjB,CAAC;IACH;GACF;EAEAO,SAAA,CAAU,YAAM;IACd,IAAI,CAAAjB,MAAA,aAAAA,MAAA,uBAAAA,MAAA,CAAQS,IAAS,cAAQ;IAC7BS,QAAA,CAAS,YAAM;MACb,IAAMC,UAAA,GAAahB,IAAK,CAAAC,GAAA,CAAI,EAAI,EAAAJ,MAAA,CAAOmB,UAAA,IAAc,EAAE;MACjD,IAAAC,MAAA,GAASnB,UAAA,CAAWS,KAAQ,GAAAS,UAAA;MAClCE,OAAA,CAAQtB,QAAS,CAAAW,KAAA,EAAOZ,YAAa,CAAAY,KAAA,EAAOM,IAAA,EAAMI,MAAM;IAC1D,CAAC;EACH,CAAC;EAEM;IACLZ,iBAAA,EAAAA,iBAAA;IACAP,UAAA,EAAAA;GACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}