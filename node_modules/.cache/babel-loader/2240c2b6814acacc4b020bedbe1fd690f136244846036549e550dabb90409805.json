{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _typeof } from '../../_chunks/dep-d33c5d88.mjs';\nimport { _ as _slicedToArray } from '../../_chunks/dep-a71c8f5b.mjs';\nimport { _ as _defineProperty } from '../../_chunks/dep-a5dfe884.mjs';\nimport { isVNode, h, computed, createVNode } from 'vue';\nimport { i as isString_1 } from '../../_chunks/dep-5d7be5c6.mjs';\nimport { i as isFunction_1 } from '../../_chunks/dep-6e7655db.mjs';\nimport { getThRowspanAndColspan, getThList } from './useMultiHeader.mjs';\nimport useClassName from './useClassName.mjs';\nimport TEllipsis from '../ellipsis.mjs';\nimport '../../_chunks/dep-0e21c401.mjs';\nimport '../../_chunks/dep-437d10c6.mjs';\nimport '../../_chunks/dep-6ad32365.mjs';\nimport '../../_chunks/dep-10c900d8.mjs';\nimport '../../_chunks/dep-1c5d24dd.mjs';\nimport '../../_chunks/dep-75628739.mjs';\nimport '../../_chunks/dep-62ad5a36.mjs';\nimport '../../_chunks/dep-f76ec896.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-db7324ec.mjs';\nimport '../../_chunks/dep-d090226f.mjs';\nimport '../../_chunks/dep-c31faaef.mjs';\nimport '../../_chunks/dep-5f15268c.mjs';\nimport '../../_chunks/dep-c70e40ae.mjs';\nimport '../../_chunks/dep-4382b808.mjs';\nimport '../../_chunks/dep-0894e3ae.mjs';\nimport '../../_chunks/dep-0ced8e2e.mjs';\nimport '../../_chunks/dep-fb9941c5.mjs';\nimport '../../_chunks/dep-1494b54a.mjs';\nimport '../../_chunks/dep-0e5b2b76.mjs';\nimport '../../_chunks/dep-f3a27c4c.mjs';\nimport '../../_chunks/dep-e3204123.mjs';\nimport '../../_chunks/dep-b6946d89.mjs';\nimport '../../_chunks/dep-6ea85de8.mjs';\nimport '../../_chunks/dep-92ce9c6c.mjs';\nimport '../../_chunks/dep-3b84887f.mjs';\nimport '../../_chunks/dep-0223e29d.mjs';\nimport '../../_chunks/dep-3d61d8a6.mjs';\nimport '../../_chunks/dep-88c02450.mjs';\nimport '../../_chunks/dep-f7067d3d.mjs';\nimport '../../_chunks/dep-cd1b7f96.mjs';\nimport '../../_chunks/dep-eea784eb.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-0c808c2e.mjs';\nimport '../../_chunks/dep-4c103c66.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../_chunks/dep-67dca09a.mjs';\nimport '../../_chunks/dep-8ee0987a.mjs';\nimport '../../_chunks/dep-e98ea432.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-bc75f95c.mjs';\nimport '../../_chunks/dep-190cc0b3.mjs';\nimport '../../_chunks/dep-003c9b00.mjs';\nimport '../../_chunks/dep-29a308fc.mjs';\nimport '../../_chunks/dep-18af437d.mjs';\nimport '../../_chunks/dep-28a28c00.mjs';\nimport '../../_chunks/dep-1c9d9f8d.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../tooltip/index.mjs';\nimport '../../tooltip/tooltip.mjs';\nimport '../../_chunks/dep-8bcdb054.mjs';\nimport '../../_chunks/dep-05b564d9.mjs';\nimport '../../_chunks/dep-dd2681d3.mjs';\nimport '../../_chunks/dep-e56cdb74.mjs';\nimport '../../tooltip/props.mjs';\nimport '../../popup/props.mjs';\nimport '../../popup/index.mjs';\nimport '../../popup/popup.mjs';\nimport '@popperjs/core';\nimport '../../hooks/index.mjs';\nimport '../../hooks/icon.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../hooks/tnode.mjs';\nimport '../../hooks/useCommonClassName.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport '../../hooks/useDestroyOnClose.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/useVirtualScroll.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../hooks/useImagePreviewUrl.mjs';\nimport '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../_common/js/utils/set-style.mjs';\nimport '../../popup/container.mjs';\nimport '../../_chunks/dep-4d2c39b6.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../../popup/type.mjs';\nimport '../../tooltip/util.mjs';\nimport '../../tooltip/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);\n}\nfunction renderTitle(slots, col, index) {\n  var params = {\n    col: col,\n    colIndex: index\n  };\n  if (isFunction_1(col.title)) {\n    return col.title(h, params);\n  }\n  if (isString_1(col.title) && slots[col.title]) {\n    return slots[col.title](params);\n  }\n  if (isFunction_1(col.render)) {\n    return col.render(h, _objectSpread(_objectSpread({}, params), {}, {\n      type: \"title\",\n      row: {},\n      rowIndex: -1\n    })) || col.title;\n  }\n  return col.title;\n}\nfunction useTableHeader(props) {\n  var _useClassName = useClassName(),\n    tableSortClasses = _useClassName.tableSortClasses,\n    tableFilterClasses = _useClassName.tableFilterClasses;\n  var spansAndLeafNodes = computed(function () {\n    return getThRowspanAndColspan(props.columns);\n  });\n  var thList = computed(function () {\n    return getThList(props.columns);\n  });\n  var isMultipleHeader = computed(function () {\n    return thList.value.length > 1;\n  });\n  var renderTitleWidthIcon = function renderTitleWidthIcon(_ref, col, colIndex, ellipsisTitle, attach, extra) {\n    var _ref2 = _slicedToArray(_ref, 3),\n      title = _ref2[0],\n      sortIcon = _ref2[1],\n      filterIcon = _ref2[2];\n    var classes = _defineProperty(_defineProperty({}, tableSortClasses.sortable, sortIcon), tableFilterClasses.filterable, filterIcon);\n    var content = isFunction_1(ellipsisTitle) ? ellipsisTitle(h, {\n      col: col,\n      colIndex: colIndex\n    }) : void 0;\n    var isEllipsis = ellipsisTitle !== void 0 ? Boolean(ellipsisTitle) : Boolean(col.ellipsis);\n    return createVNode(\"div\", {\n      \"class\": classes\n    }, [createVNode(\"div\", {\n      \"class\": tableSortClasses.title\n    }, [isEllipsis ? createVNode(TEllipsis, {\n      \"placement\": \"bottom\",\n      \"attach\": props.attach || (attach ? function () {\n        return attach;\n      } : void 0),\n      \"tooltipContent\": content && function () {\n        return content;\n      },\n      \"tooltipProps\": _typeof(ellipsisTitle) === \"object\" ? ellipsisTitle : void 0,\n      \"classPrefix\": extra === null || extra === void 0 ? void 0 : extra.classPrefix,\n      \"overlayClassName\": extra === null || extra === void 0 ? void 0 : extra.ellipsisOverlayClassName\n    }, _isSlot(title) ? title : {\n      \"default\": function _default() {\n        return [title];\n      }\n    }) : createVNode(\"div\", null, [title]), Boolean(sortIcon || filterIcon) && createVNode(\"div\", {\n      \"class\": tableFilterClasses.iconWrap\n    }, [sortIcon, filterIcon])])]);\n  };\n  return {\n    thList: thList,\n    isMultipleHeader: isMultipleHeader,\n    spansAndLeafNodes: spansAndLeafNodes,\n    renderTitleWidthIcon: renderTitleWidthIcon\n  };\n}\nexport { useTableHeader as default, renderTitle };","map":{"version":3,"names":["_isSlot","s","Object","prototype","toString","call","isVNode","renderTitle","slots","col","index","params","colIndex","isFunction_1","title","h","isString_1","render","_objectSpread","type","row","rowIndex","useTableHeader","props","_useClassName","useClassName","tableSortClasses","tableFilterClasses","spansAndLeafNodes","computed","getThRowspanAndColspan","columns","thList","getThList","isMultipleHeader","value","length","renderTitleWidthIcon","_ref","ellipsisTitle","attach","extra","_ref2","_slicedToArray","sortIcon","filterIcon","classes","_defineProperty","sortable","filterable","content","isEllipsis","Boolean","ellipsis","createVNode","TEllipsis","_typeof","classPrefix","ellipsisOverlayClassName","iconWrap"],"sources":["../../../src/table/hooks/useTableHeader.tsx"],"sourcesContent":["import { SetupContext, computed, h } from 'vue';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\nimport { BaseTableCol, PrimaryTableCol, TableRowData, TdBaseTableProps } from '../type';\nimport { getThRowspanAndColspan, getThList } from './useMultiHeader';\nimport useClassName from './useClassName';\nimport { TNodeReturnValue } from '../../common';\nimport { BaseTableColumns } from '../interface';\nimport TEllipsis from '../ellipsis';\n\n// 渲染表头的通用方法\nexport function renderTitle(slots: SetupContext['slots'], col: BaseTableColumns[0], index: number) {\n  const params = { col, colIndex: index };\n  if (isFunction(col.title)) {\n    return col.title(h, params);\n  }\n  if (isString(col.title) && slots[col.title]) {\n    return slots[col.title](params);\n  }\n  if (isFunction(col.render)) {\n    return (\n      col.render(h, {\n        ...params,\n        type: 'title',\n        row: {},\n        rowIndex: -1,\n      }) || col.title\n    );\n  }\n  return col.title;\n}\n\nexport default function useTableHeader(props: TdBaseTableProps) {\n  const { tableSortClasses, tableFilterClasses } = useClassName();\n  // 一次性获取 colspan 和 rowspan 可以避免其他数据更新导致的重复计算\n  const spansAndLeafNodes = computed(() => getThRowspanAndColspan(props.columns));\n  // 表头二维数据\n  const thList = computed(() => getThList(props.columns));\n  const isMultipleHeader = computed(() => thList.value.length > 1);\n\n  const renderTitleWidthIcon = (\n    [title, sortIcon, filterIcon]: TNodeReturnValue[],\n    col: PrimaryTableCol<TableRowData>,\n    colIndex: number,\n    ellipsisTitle: BaseTableCol['ellipsisTitle'],\n    attach: HTMLElement,\n    extra?: {\n      classPrefix: string;\n      ellipsisOverlayClassName: string;\n    },\n  ) => {\n    const classes = {\n      [tableSortClasses.sortable]: sortIcon,\n      [tableFilterClasses.filterable]: filterIcon,\n    };\n    const content = isFunction(ellipsisTitle) ? ellipsisTitle(h, { col, colIndex }) : undefined;\n    const isEllipsis = ellipsisTitle !== undefined ? Boolean(ellipsisTitle) : Boolean(col.ellipsis);\n    return (\n      <div class={classes}>\n        <div class={tableSortClasses.title}>\n          {isEllipsis ? (\n            <TEllipsis\n              placement=\"bottom\"\n              attach={props.attach || (attach ? () => attach : undefined)}\n              tooltipContent={content && (() => content)}\n              tooltipProps={typeof ellipsisTitle === 'object' ? ellipsisTitle : undefined}\n              classPrefix={extra?.classPrefix}\n              overlayClassName={extra?.ellipsisOverlayClassName}\n            >\n              {title}\n            </TEllipsis>\n          ) : (\n            <div>{title}</div>\n          )}\n          {Boolean(sortIcon || filterIcon) && (\n            <div class={tableFilterClasses.iconWrap}>\n              {sortIcon}\n              {filterIcon}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  return {\n    thList,\n    isMultipleHeader,\n    spansAndLeafNodes,\n    renderTitleWidthIcon,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}