{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../../_chunks/dep-a5dfe884.mjs';\nimport { defineComponent, ref, reactive, computed, onMounted, onBeforeUnmount, createVNode } from 'vue';\nimport '../const.mjs';\nimport '../utils/index.mjs';\nimport { useBaseClassName } from '../hooks.mjs';\nimport baseProps from './base-props.mjs';\nimport { SLIDER_DEFAULT_WIDTH } from '../../_common/js/color-picker/constants.mjs';\nimport { Draggable } from '../../_common/js/color-picker/draggable.mjs';\nimport '../../_chunks/dep-d33c5d88.mjs';\nimport '../../_common/js/color-picker/index.mjs';\nimport '../../_common/js/color-picker/cmyk.mjs';\nimport '../../_common/js/color-picker/color.mjs';\nimport '../../_chunks/dep-a71c8f5b.mjs';\nimport '../../_chunks/dep-0e21c401.mjs';\nimport '../../_chunks/dep-e7c4d7b2.mjs';\nimport '../../_chunks/dep-e7ab8269.mjs';\nimport '../../_common/js/color-picker/gradient.mjs';\nimport '../../_chunks/dep-5d7be5c6.mjs';\nimport '../../_chunks/dep-437d10c6.mjs';\nimport '../../_chunks/dep-6ad32365.mjs';\nimport '../../_chunks/dep-10c900d8.mjs';\nimport '../../_chunks/dep-1c5d24dd.mjs';\nimport '../../_chunks/dep-75628739.mjs';\nimport '../../_chunks/dep-b20328d2.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-6e7655db.mjs';\nimport '../../_chunks/dep-62ad5a36.mjs';\nimport '../../_chunks/dep-f76ec896.mjs';\nimport '../../_chunks/dep-db7324ec.mjs';\nimport '../../_chunks/dep-d090226f.mjs';\nimport '../../_chunks/dep-c31faaef.mjs';\nimport '../../_chunks/dep-5f15268c.mjs';\nimport '../../_chunks/dep-c70e40ae.mjs';\nimport '../../_chunks/dep-4382b808.mjs';\nimport '../../_chunks/dep-0894e3ae.mjs';\nimport '../../_chunks/dep-0ced8e2e.mjs';\nimport '../../_chunks/dep-fb9941c5.mjs';\nimport '../../_chunks/dep-1494b54a.mjs';\nimport '../../_chunks/dep-0e5b2b76.mjs';\nimport '../../_chunks/dep-f3a27c4c.mjs';\nimport '../../_chunks/dep-e3204123.mjs';\nimport '../../_chunks/dep-b6946d89.mjs';\nimport '../../_chunks/dep-6ea85de8.mjs';\nimport '../../_chunks/dep-92ce9c6c.mjs';\nimport '../../_chunks/dep-3b84887f.mjs';\nimport '../../_chunks/dep-0223e29d.mjs';\nimport '../../_chunks/dep-3d61d8a6.mjs';\nimport '../../_chunks/dep-88c02450.mjs';\nimport '../../_chunks/dep-f7067d3d.mjs';\nimport '../../_chunks/dep-cd1b7f96.mjs';\nimport '../../_chunks/dep-eea784eb.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-0c808c2e.mjs';\nimport '../../_chunks/dep-4c103c66.mjs';\nimport '../../config-provider/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar ColorSlider = defineComponent({\n  name: \"ColorSlider\",\n  props: _objectSpread(_objectSpread({}, baseProps), {}, {\n    className: {\n      type: String,\n      \"default\": \"\"\n    },\n    value: {\n      type: Number,\n      \"default\": 0\n    },\n    maxValue: {\n      type: Number,\n      \"default\": 360\n    },\n    railStyle: {\n      type: Object\n    },\n    type: {\n      type: String,\n      \"default\": \"hue\"\n    }\n  }),\n  setup: function setup(props) {\n    var baseClassName = useBaseClassName();\n    var refPanel = ref(null);\n    var refThumb = ref(null);\n    var dragInstance = ref(null);\n    var panelRect = reactive({\n      width: SLIDER_DEFAULT_WIDTH\n    });\n    var styles = computed(function () {\n      var width = panelRect.width;\n      if (!width) {\n        return;\n      }\n      var left = Math.round(props.value / props.maxValue * width);\n      return {\n        left: \"\".concat(left, \"px\"),\n        color: props.color.rgb\n      };\n    });\n    var handleDrag = function handleDrag(coordinate, isEnded) {\n      if (props.disabled) {\n        return;\n      }\n      var width = panelRect.width;\n      var x = coordinate.x;\n      var value = Math.round(x / width * props.maxValue * 100) / 100;\n      props.onChange(value, isEnded);\n    };\n    var handleDragEnd = function handleDragEnd(coordinate) {\n      if (props.disabled) {\n        return;\n      }\n      handleDrag(coordinate, true);\n    };\n    onMounted(function () {\n      panelRect.width = refPanel.value.offsetWidth || SLIDER_DEFAULT_WIDTH;\n      dragInstance.value = new Draggable(refPanel.value, {\n        start: function start() {\n          panelRect.width = refPanel.value.offsetWidth;\n        },\n        drag: function drag(coordinate) {\n          handleDrag(coordinate);\n        },\n        end: handleDragEnd\n      });\n    });\n    onBeforeUnmount(function () {\n      dragInstance.value.destroy();\n    });\n    return {\n      baseClassName: baseClassName,\n      refThumb: refThumb,\n      refPanel: refPanel,\n      styles: styles\n    };\n  },\n  render: function render() {\n    var baseClassName = this.baseClassName,\n      className = this.className,\n      railStyle = this.railStyle,\n      styles = this.styles,\n      type = this.type,\n      color = this.color;\n    var paddingStyle = {\n      background: \"linear-gradient(90deg, rgba(0,0,0,.0) 0%, rgba(0,0,0,.0) 93%, \".concat(color.rgb, \" 93%, \").concat(color.rgb, \" 100%)\")\n    };\n    return createVNode(\"div\", {\n      \"class\": [\"\".concat(baseClassName, \"__slider-wrapper\"), \"\".concat(baseClassName, \"__slider-wrapper--\").concat(type, \"-type\")]\n    }, [type === \"alpha\" && createVNode(\"div\", {\n      \"className\": \"\".concat(baseClassName, \"__slider-padding\"),\n      \"style\": paddingStyle\n    }, null), createVNode(\"div\", {\n      \"class\": [\"\".concat(baseClassName, \"__slider\"), className],\n      \"ref\": \"refPanel\"\n    }, [createVNode(\"div\", {\n      \"class\": \"\".concat(baseClassName, \"__rail\"),\n      \"style\": railStyle\n    }, null), createVNode(\"span\", {\n      \"class\": [\"\".concat(baseClassName, \"__thumb\")],\n      \"role\": \"slider\",\n      \"tabindex\": 0,\n      \"ref\": \"refThumb\",\n      \"style\": styles\n    }, null)])]);\n  }\n});\nexport { ColorSlider as default };","map":{"version":3,"names":["ColorSlider","defineComponent","name","props","_objectSpread","baseProps","className","type","String","value","Number","maxValue","railStyle","Object","setup","baseClassName","useBaseClassName","refPanel","ref","refThumb","dragInstance","panelRect","reactive","width","SLIDER_DEFAULT_WIDTH","styles","computed","left","Math","round","concat","color","rgb","handleDrag","coordinate","isEnded","disabled","x","onChange","handleDragEnd","onMounted","offsetWidth","Draggable","start","drag","end","onBeforeUnmount","destroy","render","paddingStyle","background","createVNode"],"sources":["../../../src/color-picker/panel/slider.tsx"],"sourcesContent":["import { computed, defineComponent, onBeforeUnmount, onMounted, PropType, reactive, ref } from 'vue';\nimport { SLIDER_DEFAULT_WIDTH } from '../const';\nimport { Draggable, Coordinate } from '../utils';\nimport { useBaseClassName } from '../hooks';\nimport baseProps from './base-props';\n\nexport default defineComponent({\n  name: 'ColorSlider',\n  props: {\n    ...baseProps,\n    className: {\n      type: String,\n      default: '',\n    },\n    value: {\n      type: Number,\n      default: 0,\n    },\n    maxValue: {\n      type: Number,\n      default: 360,\n    },\n    railStyle: {\n      type: Object as PropType<any>,\n    },\n    type: {\n      type: String as PropType<'hue' | 'alpha'>,\n      default: 'hue',\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const refPanel = ref<HTMLElement>(null);\n    const refThumb = ref<HTMLElement>(null);\n    const dragInstance = ref<Draggable>(null);\n    const panelRect = reactive({\n      width: SLIDER_DEFAULT_WIDTH,\n    });\n    const styles = computed(() => {\n      const { width } = panelRect;\n      if (!width) {\n        return;\n      }\n      const left = Math.round((props.value / props.maxValue) * width);\n      return {\n        left: `${left}px`,\n        color: props.color.rgb,\n      };\n    });\n\n    const handleDrag = (coordinate: Coordinate, isEnded?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      const { width } = panelRect;\n      const { x } = coordinate;\n      const value = Math.round((x / width) * props.maxValue * 100) / 100;\n      props.onChange(value, isEnded);\n    };\n\n    const handleDragEnd = (coordinate: Coordinate) => {\n      if (props.disabled) {\n        return;\n      }\n      handleDrag(coordinate, true);\n    };\n\n    onMounted(() => {\n      panelRect.width = refPanel.value.offsetWidth || SLIDER_DEFAULT_WIDTH;\n      dragInstance.value = new Draggable(refPanel.value, {\n        start: () => {\n          // pop模式下由于是隐藏显示，这个宽度让其每次点击的时候重新计算\n          panelRect.width = refPanel.value.offsetWidth;\n        },\n        drag: (coordinate: Coordinate) => {\n          handleDrag(coordinate);\n        },\n        end: handleDragEnd,\n      });\n    });\n\n    onBeforeUnmount(() => {\n      dragInstance.value.destroy();\n    });\n\n    return {\n      baseClassName,\n      refThumb,\n      refPanel,\n      styles,\n    };\n  },\n  render() {\n    const { baseClassName, className, railStyle, styles, type, color } = this;\n    const paddingStyle = {\n      background: `linear-gradient(90deg, rgba(0,0,0,.0) 0%, rgba(0,0,0,.0) 93%, ${color.rgb} 93%, ${color.rgb} 100%)`,\n    };\n    return (\n      <div class={[`${baseClassName}__slider-wrapper`, `${baseClassName}__slider-wrapper--${type}-type`]}>\n        {type === 'alpha' && <div className={`${baseClassName}__slider-padding`} style={paddingStyle} />}\n        <div class={[`${baseClassName}__slider`, className]} ref=\"refPanel\">\n          <div class={`${baseClassName}__rail`} style={railStyle}></div>\n          <span class={[`${baseClassName}__thumb`]} role=\"slider\" tabindex={0} ref=\"refThumb\" style={styles}></span>\n        </div>\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}