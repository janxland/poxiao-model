{"ast":null,"code":"/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-7deaa3b9.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-b089fa1f.mjs';\nimport { defineComponent, toRefs, provide, createVNode, mergeProps } from 'vue';\nimport _TabPanel from './tab-panel.mjs';\nimport TTabNav from './tab-nav.mjs';\nimport props from './props.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { i as isArray_1 } from '../_chunks/dep-ab439391.mjs';\nimport '../_chunks/dep-8dbc9855.mjs';\nimport '../_chunks/dep-8e411f1c.mjs';\nimport './tab-panel-props.mjs';\nimport '../hooks/useDestroyOnClose.mjs';\nimport '../_chunks/dep-665d45b4.mjs';\nimport '../_chunks/dep-cb814df4.mjs';\nimport '../_chunks/dep-715774e0.mjs';\nimport '../_chunks/dep-5a5a1764.mjs';\nimport '../_chunks/dep-cd533155.mjs';\nimport '../_chunks/dep-27be073b.mjs';\nimport '../_chunks/dep-10024af3.mjs';\nimport '../_chunks/dep-2adf18a2.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../_common/js/tabs/base.mjs';\nimport './tab-nav-item.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../_chunks/dep-b3734774.mjs';\nimport '../_chunks/dep-e5142249.mjs';\nimport '../_chunks/dep-c4f80cb4.mjs';\nimport '../_chunks/dep-996b4900.mjs';\nimport '../_chunks/dep-66473aa9.mjs';\nimport '../_chunks/dep-3108c312.mjs';\nimport '../_chunks/dep-93498383.mjs';\nimport '../_chunks/dep-36582a92.mjs';\nimport '../_chunks/dep-a2db6df1.mjs';\nimport '../_chunks/dep-0f89a1dd.mjs';\nimport '../_chunks/dep-60d62610.mjs';\nimport '../_chunks/dep-d4da440a.mjs';\nimport '../_chunks/dep-013382c3.mjs';\nimport '../_chunks/dep-ca764006.mjs';\nimport '../_chunks/dep-2ee9d497.mjs';\nimport '../_chunks/dep-a4a3ac25.mjs';\nimport '../_chunks/dep-6861d388.mjs';\nimport '../_chunks/dep-396d852b.mjs';\nimport '../_chunks/dep-8a3fd140.mjs';\nimport '../_chunks/dep-5db0da5c.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-bf19d9ba.mjs';\nimport '../_chunks/dep-6963a882.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-37e3e644.mjs';\nimport '../_chunks/dep-31dc0415.mjs';\nimport '../_chunks/dep-c545db54.mjs';\nimport '../_chunks/dep-3f15cb30.mjs';\nimport '../_chunks/dep-fd2b6c64.mjs';\nimport '../_chunks/dep-30b3f256.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport './tab-nav-bar.mjs';\nimport '../utils/helper.mjs';\nimport '../_chunks/dep-807e1747.mjs';\nimport '../_chunks/dep-f8909853.mjs';\nimport '../_chunks/dep-67e59a11.mjs';\nimport '../_chunks/dep-d00e2e04.mjs';\nimport '../_chunks/dep-ec2f76cc.mjs';\nimport '../_chunks/dep-96484611.mjs';\nimport '../_chunks/dep-ac561548.mjs';\nimport '../_chunks/dep-413fbf03.mjs';\nimport '../_chunks/dep-0e4de31a.mjs';\nimport '../hooks/useListener.mjs';\nimport '../hooks/useDragSort.mjs';\nimport '../_chunks/dep-bd7cd061.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-60ee423b.mjs';\nvar _Tabs = defineComponent({\n  name: \"TTabs\",\n  props: props,\n  setup: function setup(props2) {\n    var COMPONENT_NAME = usePrefixClass(\"tabs\");\n    var classPrefix = usePrefixClass();\n    var renderTNodeJSX = useTNodeJSX();\n    var _toRefs = toRefs(props2),\n      value = _toRefs.value,\n      modelValue = _toRefs.modelValue;\n    var _useVModel = useVModel(value, modelValue, props2.defaultValue || \"\", props2.onChange),\n      _useVModel2 = _slicedToArray(_useVModel, 2),\n      tabValue = _useVModel2[0],\n      setTabValue = _useVModel2[1];\n    provide(\"tabs\", {\n      value: tabValue\n    });\n    var onTabAdd = function onTabAdd(context) {\n      var _props2$onAdd;\n      (_props2$onAdd = props2.onAdd) === null || _props2$onAdd === void 0 || _props2$onAdd.call(props2, {\n        e: context.e\n      });\n    };\n    var onTabChange = function onTabChange(value2) {\n      setTabValue(value2);\n    };\n    var onTabRemove = function onTabRemove(_ref) {\n      var _props2$onRemove;\n      var e = _ref.e,\n        value2 = _ref.value,\n        index = _ref.index;\n      (_props2$onRemove = props2.onRemove) === null || _props2$onRemove === void 0 || _props2$onRemove.call(props2, {\n        value: value2,\n        index: index,\n        e: e\n      });\n    };\n    var getSlotPanels = function getSlotPanels() {\n      var content = renderTNodeJSX(\"default\");\n      if (!content) return [];\n      var flatContent = function flatContent(ct) {\n        return ct.map(function (item) {\n          if (item.children && isArray_1(item.children)) return flatContent(item.children);\n          return item;\n        }).flat().filter(function (item) {\n          return item.type.name === \"TTabPanel\";\n        });\n      };\n      return flatContent(content);\n    };\n    var renderHeader = function renderHeader() {\n      var _props2$list;\n      var panels = ((_props2$list = props2.list) !== null && _props2$list !== void 0 && _props2$list.length ? props2.list : getSlotPanels()) || [];\n      var actionContent = renderTNodeJSX(\"action\");\n      var panelsData = panels.map(function (item) {\n        var selfItem = item;\n        if (item.props) {\n          Object.keys(item.props).forEach(function (key) {\n            selfItem[key] = item.props[key];\n          });\n        }\n        return selfItem;\n      });\n      var tabNavProps = {\n        theme: props2.theme,\n        value: tabValue.value,\n        size: props2.size,\n        disabled: props2.disabled,\n        placement: props2.placement,\n        addable: props2.addable,\n        panels: panelsData,\n        dragSort: props2.dragSort,\n        action: actionContent\n      };\n      return createVNode(\"div\", {\n        \"class\": _defineProperty(_defineProperty({}, \"\".concat(classPrefix.value, \"-tabs__header\"), true), \"\".concat(classPrefix.value, \"-is-\").concat(props2.placement), true)\n      }, [createVNode(TTabNav, mergeProps(tabNavProps, {\n        \"onDragSort\": props2.onDragSort,\n        \"onChange\": onTabChange,\n        \"onAdd\": onTabAdd,\n        \"onRemove\": onTabRemove\n      }), null)]);\n    };\n    var renderContent = function renderContent() {\n      var _props2$list2;\n      var panels = getSlotPanels();\n      if ((_props2$list2 = props2.list) !== null && _props2$list2 !== void 0 && _props2$list2.length) {\n        return props2.list.map(function (item) {\n          return createVNode(_TabPanel, mergeProps(item, {\n            \"onRemove\": onTabRemove\n          }), null);\n        });\n      }\n      if (panels && panels.length) {\n        return createVNode(\"div\", {\n          \"class\": [\"\".concat(classPrefix.value, \"-tabs__content\")]\n        }, [panels]);\n      }\n    };\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": [COMPONENT_NAME.value]\n      }, [props2.placement !== \"bottom\" ? [renderHeader(), renderContent()] : [renderContent(), renderHeader()]]);\n    };\n  }\n});\nexport { _Tabs as default };","map":{"version":3,"names":["_Tabs","defineComponent","name","props","setup","props2","COMPONENT_NAME","usePrefixClass","classPrefix","renderTNodeJSX","useTNodeJSX","_toRefs","toRefs","value","modelValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","tabValue","setTabValue","provide","onTabAdd","context","_props2$onAdd","onAdd","call","e","onTabChange","value2","onTabRemove","_ref","_props2$onRemove","index","onRemove","getSlotPanels","content","flatContent","ct","map","item","children","isArray_1","flat","filter","type","renderHeader","_props2$list","panels","list","length","actionContent","panelsData","selfItem","Object","keys","forEach","key","tabNavProps","theme","size","disabled","placement","addable","dragSort","action","createVNode","_defineProperty","concat","TTabNav","mergeProps","onDragSort","renderContent","_props2$list2","_TabPanel"],"sources":["../../src/tabs/tabs.tsx"],"sourcesContent":["import { ComponentPublicInstance, defineComponent, provide, Ref, toRefs } from 'vue';\nimport TTabPanel from './tab-panel';\nimport TTabNav from './tab-nav';\nimport { TabValue, TdTabsProps } from './type';\nimport props from './props';\n\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport useVModel from '../hooks/useVModel';\nimport isArray from 'lodash/isArray';\n\nexport interface InjectTabs {\n  value: Ref<TabValue>;\n}\n\nexport default defineComponent({\n  name: 'TTabs',\n\n  props,\n\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('tabs');\n    const classPrefix = usePrefixClass();\n    const renderTNodeJSX = useTNodeJSX();\n\n    const { value, modelValue } = toRefs(props);\n    const [tabValue, setTabValue] = useVModel(value, modelValue, props.defaultValue || '', props.onChange);\n\n    provide<InjectTabs>('tabs', { value: tabValue });\n\n    // methods\n    const onTabAdd = (context: { e: MouseEvent }) => {\n      props.onAdd?.({ e: context.e });\n    };\n    const onTabChange = (value: TabValue) => {\n      setTabValue(value);\n    };\n    const onTabRemove = ({ e, value, index }: Parameters<TdTabsProps['onRemove']>[0]) => {\n      props.onRemove?.({ value, index, e });\n    };\n\n    // render\n    const getSlotPanels = () => {\n      const content = renderTNodeJSX('default');\n      if (!content) return [];\n\n      const flatContent = (ct: any) => {\n        return ct\n          .map((item: ComponentPublicInstance) => {\n            if (item.children && isArray(item.children)) return flatContent(item.children);\n            return item;\n          })\n          .flat()\n          .filter((item: ComponentPublicInstance) => {\n            return item.type.name === 'TTabPanel';\n          });\n      };\n\n      return flatContent(content);\n    };\n    const renderHeader = () => {\n      const panels = (props.list?.length ? props.list : getSlotPanels()) || [];\n      const actionContent = renderTNodeJSX('action');\n      const panelsData = panels.map((item: ComponentPublicInstance) => {\n        const selfItem = item;\n\n        if (item.props) {\n          Object.keys(item.props).forEach((key) => {\n            selfItem[key] = item.props[key];\n          });\n        }\n\n        return selfItem;\n      });\n      const tabNavProps = {\n        theme: props.theme,\n        value: tabValue.value,\n        size: props.size,\n        disabled: props.disabled,\n        placement: props.placement,\n        addable: props.addable,\n        panels: panelsData,\n        dragSort: props.dragSort,\n        action: actionContent,\n      };\n      return (\n        <div\n          class={{\n            [`${classPrefix.value}-tabs__header`]: true,\n            [`${classPrefix.value}-is-${props.placement}`]: true,\n          }}\n        >\n          <TTabNav\n            {...tabNavProps}\n            onDragSort={props.onDragSort}\n            onChange={onTabChange}\n            onAdd={onTabAdd}\n            onRemove={onTabRemove}\n          />\n        </div>\n      );\n    };\n    const renderContent = () => {\n      const panels = getSlotPanels();\n      if (props.list?.length) {\n        return props.list.map((item) => <TTabPanel {...item} onRemove={onTabRemove} />);\n      }\n      if (panels && panels.length) {\n        return <div class={[`${classPrefix.value}-tabs__content`]}>{panels}</div>;\n      }\n    };\n\n    return () => {\n      return (\n        <div class={[COMPONENT_NAME.value]}>\n          {props.placement !== 'bottom' ? [renderHeader(), renderContent()] : [renderContent(), renderHeader()]}\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}