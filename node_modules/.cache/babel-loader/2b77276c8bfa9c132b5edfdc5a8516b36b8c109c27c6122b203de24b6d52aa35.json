{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-a5dfe884.mjs';\nimport { c as camelCase_1 } from '../_chunks/dep-190cc0b3.mjs';\nimport { isVueNext } from './adapt.mjs';\nimport '../_chunks/dep-d33c5d88.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nimport '../_chunks/dep-003c9b00.mjs';\nimport '../_chunks/dep-6ad32365.mjs';\nimport '../_chunks/dep-10c900d8.mjs';\nimport '../_chunks/dep-1c5d24dd.mjs';\nimport '../_chunks/dep-e98ea432.mjs';\nimport '../_chunks/dep-75628739.mjs';\nimport '../_chunks/dep-29a308fc.mjs';\nimport '../_chunks/dep-18af437d.mjs';\nimport '../_chunks/dep-28a28c00.mjs';\nimport 'vue';\nimport '../utils/withInstall.mjs';\nimport '../hooks/useVModel.mjs';\nimport '../_chunks/dep-1c9d9f8d.mjs';\nimport '../hooks/useDefaultValue.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../checkbox/index.mjs';\nimport '../checkbox/checkbox.mjs';\nimport '../_chunks/dep-a71c8f5b.mjs';\nimport '../_chunks/dep-0e21c401.mjs';\nimport '../checkbox/props.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../hooks/useConfig.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-6e7655db.mjs';\nimport '../_chunks/dep-62ad5a36.mjs';\nimport '../_chunks/dep-f76ec896.mjs';\nimport '../_chunks/dep-db7324ec.mjs';\nimport '../_chunks/dep-d090226f.mjs';\nimport '../_chunks/dep-c31faaef.mjs';\nimport '../_chunks/dep-5f15268c.mjs';\nimport '../_chunks/dep-c70e40ae.mjs';\nimport '../_chunks/dep-4382b808.mjs';\nimport '../_chunks/dep-0894e3ae.mjs';\nimport '../_chunks/dep-0ced8e2e.mjs';\nimport '../_chunks/dep-fb9941c5.mjs';\nimport '../_chunks/dep-1494b54a.mjs';\nimport '../_chunks/dep-0e5b2b76.mjs';\nimport '../_chunks/dep-f3a27c4c.mjs';\nimport '../_chunks/dep-e3204123.mjs';\nimport '../_chunks/dep-b6946d89.mjs';\nimport '../_chunks/dep-6ea85de8.mjs';\nimport '../_chunks/dep-92ce9c6c.mjs';\nimport '../_chunks/dep-3b84887f.mjs';\nimport '../_chunks/dep-5d7be5c6.mjs';\nimport '../_chunks/dep-0223e29d.mjs';\nimport '../_chunks/dep-3d61d8a6.mjs';\nimport '../_chunks/dep-88c02450.mjs';\nimport '../_chunks/dep-f7067d3d.mjs';\nimport '../_chunks/dep-cd1b7f96.mjs';\nimport '../_chunks/dep-eea784eb.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-0c808c2e.mjs';\nimport '../_chunks/dep-4c103c66.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/tnode.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-bc75f95c.mjs';\nimport '../checkbox/constants.mjs';\nimport '../checkbox/hooks/useCheckboxLazyLoad.mjs';\nimport '../_common/js/utils/observe.mjs';\nimport '../checkbox/hooks/useKeyboardEvent.mjs';\nimport '../_common/js/common.mjs';\nimport '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-36f0e4f4.mjs';\nimport '../checkbox/group.mjs';\nimport '../_chunks/dep-4d2c39b6.mjs';\nimport '../_chunks/dep-69da1a80.mjs';\nimport '../_chunks/dep-017fc8db.mjs';\nimport '../_chunks/dep-2f0b4a52.mjs';\nimport '../_chunks/dep-3c3faac3.mjs';\nimport '../checkbox/checkbox-group-props.mjs';\nimport '../hooks/slot.mjs';\nimport './style/css.mjs';\nimport '../checkbox/type.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-c4a2d318.mjs';\nimport '../_chunks/dep-143154a5.mjs';\nimport '../_chunks/dep-69610219.mjs';\nimport '../_chunks/dep-04ba5b59.mjs';\nimport '../_chunks/dep-05b564d9.mjs';\nimport '../_chunks/dep-f41eb5b9.mjs';\nimport '../_chunks/dep-8cc70cb2.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-8325f53f.mjs';\nimport '../_chunks/dep-b20328d2.mjs';\nimport '../_chunks/dep-ae66bf73.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../loading/type.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport '../hooks/useLazyLoad.mjs';\nimport '../hooks/useVirtualScrollNew.mjs';\nimport '../hooks/useResizeObserver.mjs';\nimport '../_chunks/dep-1e57b42e.mjs';\nimport '../_chunks/dep-67dca09a.mjs';\nimport '../_chunks/dep-8ee0987a.mjs';\nimport '../_common/js/tree/tree-node.mjs';\nimport '../_chunks/dep-009e46c9.mjs';\nimport '../_chunks/dep-e7c4d7b2.mjs';\nimport '../_chunks/dep-c9bc2340.mjs';\nimport '../_chunks/dep-83d6a01b.mjs';\nimport '../_common/js/tree/tree-node-model.mjs';\nimport '../_chunks/dep-8bcdb054.mjs';\nimport '../_chunks/dep-dd2681d3.mjs';\nimport '../_chunks/dep-e56cdb74.mjs';\nimport '../_common/js/log/log.mjs';\nimport '../_common/js/log/index.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction emitEvent(props, context, evtName) {\n  var apiName = camelCase_1(\"on-\".concat(evtName));\n  evtName.replace(/^on/, \"\").toLowerCase();\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n  if (typeof props[apiName] === \"function\") {\n    props[apiName].apply(props, args);\n  }\n  if (!isVueNext) {\n    context.emit.apply(context, [evtName].concat(args));\n  }\n}\nfunction getParentsToRoot(element, root) {\n  var list = [];\n  var el = element;\n  while (el && el.parentNode) {\n    list.push(el);\n    if (el === root) {\n      break;\n    }\n    el = el.parentNode;\n  }\n  return list;\n}\nfunction getParentMarks(name, element, root) {\n  var list = getParentsToRoot(element, root);\n  return list.map(function (el) {\n    var mark = {\n      name: name,\n      value: (el === null || el === void 0 ? void 0 : el.getAttribute(name)) || \"\",\n      el: el\n    };\n    return mark;\n  }).filter(function (mark) {\n    return mark.value;\n  });\n}\nfunction getMark(name, element, root) {\n  var list = getParentMarks(name, element, root);\n  var info = list.pop() || null;\n  return info;\n}\nfunction pathMatchClass(name, element, root) {\n  var list = getParentsToRoot(element, root);\n  var rs = list.some(function (el) {\n    return el.classList.contains(name);\n  });\n  return rs;\n}\nfunction getTNode(prop, options) {\n  var tnode = null;\n  var item = null;\n  var conf = _objectSpread({}, options);\n  if (typeof prop === \"function\") {\n    var _conf$node;\n    item = prop(conf.createElement, (_conf$node = conf.node) === null || _conf$node === void 0 ? void 0 : _conf$node.getModel());\n  } else if (typeof prop === \"string\") {\n    item = prop;\n  }\n  if (typeof item === \"string\") {\n    tnode = item;\n  } else if (item) {\n    tnode = item;\n  }\n  return tnode;\n}\nfunction getLineModel(nodes, node, index) {\n  var lineModel = {\n    top: false,\n    right: false,\n    bottom: false,\n    left: false\n  };\n  var nodeChildren = [];\n  if (Array.isArray(node.children)) {\n    nodeChildren = node.children;\n  }\n  var childNode = nodes[index - 1] || null;\n  var nodeItemIndex = childNode ? childNode.getIndex() : 0;\n  if (index === 0) {\n    lineModel.left = !!node.parent;\n    lineModel.bottom = node.children && node.expanded;\n    lineModel.right = node.parent && !node.children;\n  } else if (index === 1) {\n    lineModel.top = true;\n    lineModel.right = true;\n    lineModel.bottom = nodeItemIndex < nodeChildren.length - 1;\n  } else if (nodeItemIndex < nodeChildren.length - 1) {\n    lineModel.top = true;\n    lineModel.bottom = true;\n  }\n  return lineModel;\n}\nfunction isTreeNodeValue(item) {\n  return typeof item === \"string\" || typeof item === \"number\";\n}\nfunction getNode(store, item) {\n  var node = null;\n  var val = null;\n  if (typeof item === \"string\" || typeof item === \"number\") {\n    val = item;\n  } else if (item && isTreeNodeValue(item.value)) {\n    val = item.value;\n  }\n  node = store.getNode(val);\n  return node;\n}\nexport { emitEvent, getLineModel, getMark, getNode, getParentMarks, getParentsToRoot, getTNode, isTreeNodeValue, pathMatchClass };","map":{"version":3,"names":["emitEvent","props","context","evtName","apiName","camelCase_1","concat","replace","toLowerCase","_len","arguments","length","args","Array","_key","apply","isVueNext","emit","getParentsToRoot","element","root","list","el","parentNode","push","getParentMarks","name","map","mark","value","getAttribute","filter","getMark","info","pop","pathMatchClass","rs","some","classList","contains","getTNode","prop","options","tnode","item","conf","_objectSpread","_conf$node","createElement","node","getModel","getLineModel","nodes","index","lineModel","top","right","bottom","left","nodeChildren","isArray","children","childNode","nodeItemIndex","getIndex","parent","expanded","isTreeNodeValue","getNode","store","val"],"sources":["../../src/tree/util.ts"],"sourcesContent":["import camelCase from 'lodash/camelCase';\nimport { TypeVNode, TypeSetupContext, isVueNext } from './adapt';\nimport {\n  TreeProps,\n  TypeTreeStore,\n  TypeTreeNode,\n  TypeMark,\n  TypeLineModel,\n  TypeTNodeProp,\n  TypeGetTNodeOption,\n  TypeTargetNode,\n} from './tree-types';\n\nexport function emitEvent<T extends any[]>(props: TreeProps, context: TypeSetupContext, evtName: string, ...args: T) {\n  const apiName = camelCase(`on-${evtName}`);\n  evtName.replace(/^on/, '').toLowerCase();\n  if (typeof props[apiName] === 'function') {\n    props[apiName](...args);\n  }\n  if (!isVueNext) {\n    // vue3 调用 props.onClick 时就已经派发了事件了\n    context.emit(evtName, ...args);\n  }\n}\n\nexport function getParentsToRoot(element?: HTMLElement, root?: HTMLElement): HTMLElement[] {\n  const list = [];\n  let el: HTMLElement = element;\n  while (el && el.parentNode) {\n    list.push(el);\n    if (el === root) {\n      break;\n    }\n    el = el.parentNode as HTMLElement;\n  }\n  return list;\n}\n\nexport function getParentMarks(name: string, element?: HTMLElement, root?: HTMLElement): TypeMark[] {\n  const list = getParentsToRoot(element, root);\n  return list\n    .map((el) => {\n      const mark: TypeMark = {\n        name,\n        value: el?.getAttribute(name) || '',\n        el,\n      };\n      return mark;\n    })\n    .filter((mark) => mark.value);\n}\n\nexport function getMark(name: string, element?: HTMLElement, root?: HTMLElement): TypeMark {\n  const list = getParentMarks(name, element, root);\n  const info = list.pop() || null;\n  return info;\n}\n\nexport function pathMatchClass(name: string, element?: HTMLElement, root?: HTMLElement): boolean {\n  const list = getParentsToRoot(element, root);\n  const rs = list.some((el) => el.classList.contains(name));\n  return rs;\n}\n\nexport function getTNode(prop: TypeTNodeProp, options: TypeGetTNodeOption): string | TypeVNode {\n  let tnode = null;\n  let item = null;\n  const conf = {\n    ...options,\n  };\n  if (typeof prop === 'function') {\n    item = prop(conf.createElement, conf.node?.getModel());\n  } else if (typeof prop === 'string') {\n    item = prop;\n  }\n  if (typeof item === 'string') {\n    tnode = item;\n  } else if (item) {\n    tnode = item as TypeVNode;\n  }\n  return tnode;\n}\n\n// 获取一个节点层级位置的连线模型\nexport function getLineModel(nodes: TypeTreeNode[], node: TypeTreeNode, index: number): TypeLineModel {\n  // 标记 [上，右，下，左] 是否有连线\n  const lineModel: TypeLineModel = {\n    top: false,\n    right: false,\n    bottom: false,\n    left: false,\n  };\n\n  let nodeChildren = [];\n  if (Array.isArray(node.children)) {\n    nodeChildren = node.children;\n  }\n  const childNode = nodes[index - 1] || null;\n  const nodeItemIndex = childNode ? childNode.getIndex() : 0;\n\n  if (index === 0) {\n    lineModel.left = !!node.parent;\n    lineModel.bottom = node.children && node.expanded;\n    lineModel.right = node.parent && !node.children;\n  } else if (index === 1) {\n    lineModel.top = true;\n    lineModel.right = true;\n    lineModel.bottom = nodeItemIndex < nodeChildren.length - 1;\n  } else if (nodeItemIndex < nodeChildren.length - 1) {\n    lineModel.top = true;\n    lineModel.bottom = true;\n  }\n\n  return lineModel;\n}\n\nexport function isTreeNodeValue(item: unknown): boolean {\n  return typeof item === 'string' || typeof item === 'number';\n}\n\nexport function getNode(store: TypeTreeStore, item: TypeTargetNode): TypeTreeNode {\n  let node = null;\n  let val = null;\n  if (typeof item === 'string' || typeof item === 'number') {\n    val = item;\n  } else if (item && isTreeNodeValue(item.value)) {\n    val = item.value;\n  }\n  node = store.getNode(val);\n  return node;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}