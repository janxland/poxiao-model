{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-a5dfe884.mjs';\nimport { defineComponent, ref, computed, watch, nextTick, createVNode, withDirectives, resolveDirective, onMounted, onBeforeUnmount, Teleport, Transition, mergeProps, vShow } from 'vue';\nimport { CloseIcon, InfoCircleFilledIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon } from 'tdesign-icons-vue-next';\nimport props from './props.mjs';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport { useAction, useSameTarget } from './hooks.mjs';\nimport { useContent, useTNodeJSX } from '../hooks/tnode.mjs';\nimport useDestroyOnClose from '../hooks/useDestroyOnClose.mjs';\nimport { getScrollbarWidth } from '../_common/js/utils/getScrollbarWidth.mjs';\nimport useTeleport from '../hooks/useTeleport.mjs';\nimport usePopupManager from '../hooks/usePopupManager.mjs';\nimport { useConfig } from '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-d33c5d88.mjs';\nimport '../_chunks/dep-5d7be5c6.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nimport '../_chunks/dep-6ad32365.mjs';\nimport '../_chunks/dep-10c900d8.mjs';\nimport '../_chunks/dep-1c5d24dd.mjs';\nimport '../_chunks/dep-75628739.mjs';\nimport '../_chunks/dep-62ad5a36.mjs';\nimport '../_chunks/dep-8bcdb054.mjs';\nimport '../_chunks/dep-003c9b00.mjs';\nimport '../_chunks/dep-e98ea432.mjs';\nimport '../_chunks/dep-d090226f.mjs';\nimport '../_chunks/dep-c31faaef.mjs';\nimport '../_chunks/dep-5f15268c.mjs';\nimport '../_chunks/dep-c70e40ae.mjs';\nimport '../_chunks/dep-6e7655db.mjs';\nimport '../_chunks/dep-f76ec896.mjs';\nimport '../_chunks/dep-4382b808.mjs';\nimport '../_chunks/dep-0894e3ae.mjs';\nimport '../_chunks/dep-0ced8e2e.mjs';\nimport '../_chunks/dep-fb9941c5.mjs';\nimport '../_chunks/dep-1494b54a.mjs';\nimport '../_chunks/dep-0e5b2b76.mjs';\nimport '../_chunks/dep-f3a27c4c.mjs';\nimport '../_chunks/dep-e3204123.mjs';\nimport '../_chunks/dep-b6946d89.mjs';\nimport '../_chunks/dep-6ea85de8.mjs';\nimport '../_chunks/dep-92ce9c6c.mjs';\nimport '../_chunks/dep-3b84887f.mjs';\nimport '../_chunks/dep-05b564d9.mjs';\nimport '../_chunks/dep-dd2681d3.mjs';\nimport '../_chunks/dep-18af437d.mjs';\nimport '../_chunks/dep-cd1b7f96.mjs';\nimport '../_chunks/dep-e56cdb74.mjs';\nimport '../_chunks/dep-f7067d3d.mjs';\nimport '../_chunks/dep-88c02450.mjs';\nimport '../button/index.mjs';\nimport '../button/button.mjs';\nimport '../_chunks/dep-4d2c39b6.mjs';\nimport '../_chunks/dep-0e21c401.mjs';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-c4a2d318.mjs';\nimport '../_chunks/dep-0223e29d.mjs';\nimport '../_chunks/dep-3d61d8a6.mjs';\nimport '../_chunks/dep-eea784eb.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-0c808c2e.mjs';\nimport '../_chunks/dep-4c103c66.mjs';\nimport '../_chunks/dep-143154a5.mjs';\nimport '../_chunks/dep-017fc8db.mjs';\nimport '../_chunks/dep-69610219.mjs';\nimport '../_chunks/dep-04ba5b59.mjs';\nimport '../_chunks/dep-f41eb5b9.mjs';\nimport '../_chunks/dep-8cc70cb2.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../_chunks/dep-a71c8f5b.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-8325f53f.mjs';\nimport '../_chunks/dep-b20328d2.mjs';\nimport '../_chunks/dep-3c3faac3.mjs';\nimport '../_chunks/dep-ae66bf73.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-bc75f95c.mjs';\nimport '../_chunks/dep-190cc0b3.mjs';\nimport '../_chunks/dep-29a308fc.mjs';\nimport '../_chunks/dep-28a28c00.mjs';\nimport '../_chunks/dep-1c9d9f8d.mjs';\nimport '../loading/props.mjs';\nimport '../_chunks/dep-db7324ec.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../loading/type.mjs';\nimport '../button/props.mjs';\nimport '../hooks/useRipple.mjs';\nimport '../hooks/useKeepAnimation.mjs';\nimport '../utils/set-style.mjs';\nimport '../hooks/useDisabled.mjs';\nimport '../_chunks/dep-36f0e4f4.mjs';\nimport '../button/type.mjs';\nimport '../_chunks/dep-e7c4d7b2.mjs';\nfunction GetCSSValue(v) {\n  return Number.isNaN(Number(v)) ? v : \"\".concat(Number(v), \"px\");\n}\nvar mousePosition;\nvar getClickPosition = function getClickPosition(e) {\n  mousePosition = {\n    x: e.clientX,\n    y: e.clientY\n  };\n  setTimeout(function () {\n    mousePosition = null;\n  }, 100);\n};\nif (typeof window !== \"undefined\" && window.document && window.document.documentElement) {\n  document.documentElement.addEventListener(\"click\", getClickPosition, true);\n}\nfunction InitDragEvent(dragBox) {\n  var target = dragBox;\n  var windowInnerWidth = window.innerWidth || document.documentElement.clientWidth;\n  var windowInnerHeight = window.innerHeight || document.documentElement.clientHeight;\n  target.addEventListener(\"mousedown\", function (targetEvent) {\n    var disX = targetEvent.clientX - target.offsetLeft;\n    var disY = targetEvent.clientY - target.offsetTop;\n    var dialogW = target.offsetWidth;\n    var dialogH = target.offsetHeight;\n    if (dialogW > windowInnerWidth || dialogH > windowInnerHeight) return;\n    function mouseMoverHandler(documentEvent) {\n      var left = documentEvent.clientX - disX;\n      var top = documentEvent.clientY - disY;\n      if (left < 0) left = 0;\n      if (top < 0) top = 0;\n      if (windowInnerWidth - target.offsetWidth - left < 0) left = windowInnerWidth - target.offsetWidth;\n      if (windowInnerHeight - target.offsetHeight - top < 0) top = windowInnerHeight - target.offsetHeight;\n      target.style.position = \"absolute\";\n      target.style.left = \"\".concat(left, \"px\");\n      target.style.top = \"\".concat(top, \"px\");\n    }\n    function mouseUpHandler() {\n      document.removeEventListener(\"mousemove\", mouseMoverHandler);\n      document.removeEventListener(\"mouseup\", mouseUpHandler);\n    }\n    document.addEventListener(\"mousemove\", mouseMoverHandler);\n    document.addEventListener(\"mouseup\", mouseUpHandler);\n    document.addEventListener(\"dragend\", mouseUpHandler);\n  });\n}\nvar key = 1;\nvar _Dialog = defineComponent({\n  name: \"TDialog\",\n  directives: {\n    draggable: function draggable(el, binding) {\n      if (el && binding && binding.value) {\n        InitDragEvent(el);\n      }\n    }\n  },\n  inheritAttrs: false,\n  props: props,\n  emits: [\"update:visible\"],\n  setup: function setup(props2, context) {\n    var _this = this;\n    var COMPONENT_NAME = usePrefixClass(\"dialog\");\n    var classPrefix = usePrefixClass();\n    var renderContent = useContent();\n    var renderTNodeJSX = useTNodeJSX();\n    var dialogEle = ref(null);\n    var _useConfig = useConfig(\"dialog\"),\n      globalConfig = _useConfig.globalConfig;\n    var _useGlobalIcon = useGlobalIcon({\n        CloseIcon: CloseIcon,\n        InfoCircleFilledIcon: InfoCircleFilledIcon,\n        CheckCircleFilledIcon: CheckCircleFilledIcon,\n        ErrorCircleFilledIcon: ErrorCircleFilledIcon\n      }),\n      CloseIcon$1 = _useGlobalIcon.CloseIcon,\n      InfoCircleFilledIcon$1 = _useGlobalIcon.InfoCircleFilledIcon,\n      CheckCircleFilledIcon$1 = _useGlobalIcon.CheckCircleFilledIcon,\n      ErrorCircleFilledIcon$1 = _useGlobalIcon.ErrorCircleFilledIcon;\n    var confirmBtnAction = function confirmBtnAction(e) {\n      var _props2$onConfirm;\n      (_props2$onConfirm = props2.onConfirm) === null || _props2$onConfirm === void 0 || _props2$onConfirm.call(props2, {\n        e: e\n      });\n    };\n    var cancelBtnAction = function cancelBtnAction(e) {\n      var _props2$onCancel;\n      (_props2$onCancel = props2.onCancel) === null || _props2$onCancel === void 0 || _props2$onCancel.call(props2, {\n        e: e\n      });\n      emitCloseEvent({\n        e: e,\n        trigger: \"cancel\"\n      });\n    };\n    var _useAction = useAction({\n        confirmBtnAction: confirmBtnAction,\n        cancelBtnAction: cancelBtnAction\n      }),\n      getConfirmBtn = _useAction.getConfirmBtn,\n      getCancelBtn = _useAction.getCancelBtn;\n    var teleportElement = useTeleport(function () {\n      return props2.attach;\n    });\n    useDestroyOnClose();\n    var timer = ref();\n    var styleEl = ref();\n    var isModal = computed(function () {\n      return props2.mode === \"modal\";\n    });\n    var isModeLess = computed(function () {\n      return props2.mode === \"modeless\";\n    });\n    var isNormal = computed(function () {\n      return props2.mode === \"normal\";\n    });\n    var isFullScreen = computed(function () {\n      return props2.mode === \"full-screen\";\n    });\n    var computedVisible = computed(function () {\n      return props2.visible;\n    });\n    var maskClass = computed(function () {\n      return [\"\".concat(COMPONENT_NAME.value, \"__mask\"), !props2.showOverlay && \"\".concat(classPrefix.value, \"-is-hidden\")];\n    });\n    var positionClass = computed(function () {\n      if (isNormal.value) return [];\n      if (isFullScreen.value) return [\"\".concat(COMPONENT_NAME.value, \"__position_fullscreen\")];\n      return [\"\".concat(COMPONENT_NAME.value, \"__position\"), !!props2.top && \"\".concat(COMPONENT_NAME.value, \"--top\"), \"\".concat(props2.placement && !props2.top ? \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.placement) : \"\")];\n    });\n    var wrapClass = computed(function () {\n      return [!isNormal.value && \"\".concat(COMPONENT_NAME.value, \"__wrap\")];\n    });\n    var positionStyle = computed(function () {\n      if (isFullScreen.value) return {};\n      var top = props2.top;\n      var topStyle = {};\n      if (top !== void 0) {\n        var topValue = GetCSSValue(top);\n        topStyle = {\n          paddingTop: topValue\n        };\n      }\n      return topStyle;\n    });\n    var dialogClass = computed(function () {\n      var dialogClass2 = [\"\".concat(COMPONENT_NAME.value), \"\".concat(COMPONENT_NAME.value, \"__modal-\").concat(props2.theme), isModeLess.value && props2.draggable && \"\".concat(COMPONENT_NAME.value, \"--draggable\")];\n      if (isFullScreen.value) {\n        dialogClass2.push(\"\".concat(COMPONENT_NAME.value, \"__fullscreen\"));\n      } else {\n        dialogClass2.push.apply(dialogClass2, [\"\".concat(COMPONENT_NAME.value, \"--default\"), \"\".concat(COMPONENT_NAME.value, \"--\").concat(props2.placement)]);\n      }\n      return dialogClass2;\n    });\n    var dialogStyle = computed(function () {\n      return !isFullScreen.value ? {\n        width: GetCSSValue(props2.width)\n      } : {};\n    });\n    var _usePopupManager = usePopupManager(\"dialog\", {\n        visible: computedVisible\n      }),\n      isLastDialog = _usePopupManager.isLastDialog;\n    watch(function () {\n      return props2.visible;\n    }, function (value) {\n      if (value) {\n        var _document$activeEleme;\n        if (isModal.value && !props2.showInAttachedElement || isFullScreen.value) {\n          if (props2.preventScrollThrough) {\n            document.body.appendChild(styleEl.value);\n          }\n          nextTick(function () {\n            if (mousePosition && dialogEle.value) {\n              dialogEle.value.style.transformOrigin = \"\".concat(mousePosition.x - dialogEle.value.offsetLeft, \"px \").concat(mousePosition.y - dialogEle.value.offsetTop, \"px\");\n            }\n          });\n        }\n        (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 || _document$activeEleme.blur();\n      } else {\n        clearStyleFunc();\n      }\n      addKeyboardEvent(value);\n    });\n    function destroySelf() {\n      var _styleEl$value$parent, _styleEl$value$parent2;\n      (_styleEl$value$parent = styleEl.value.parentNode) === null || _styleEl$value$parent === void 0 || (_styleEl$value$parent2 = _styleEl$value$parent.removeChild) === null || _styleEl$value$parent2 === void 0 || _styleEl$value$parent2.call(_styleEl$value$parent, styleEl.value);\n    }\n    function clearStyleFunc() {\n      clearTimeout(timer.value);\n      timer.value = setTimeout(function () {\n        destroySelf();\n      }, 150);\n    }\n    var addKeyboardEvent = function addKeyboardEvent(status) {\n      if (status) {\n        document.addEventListener(\"keydown\", keyboardEvent);\n        props2.confirmOnEnter && document.addEventListener(\"keydown\", keyboardEnterEvent);\n      } else {\n        document.removeEventListener(\"keydown\", keyboardEvent);\n        props2.confirmOnEnter && document.removeEventListener(\"keydown\", keyboardEnterEvent);\n      }\n    };\n    var keyboardEnterEvent = function keyboardEnterEvent(e) {\n      var eventSrc = e.target;\n      if (eventSrc.tagName.toLowerCase() === \"input\") return;\n      var code = e.code;\n      if ((code === \"Enter\" || code === \"NumpadEnter\") && isLastDialog()) {\n        var _props2$onConfirm2;\n        (_props2$onConfirm2 = props2.onConfirm) === null || _props2$onConfirm2 === void 0 || _props2$onConfirm2.call(props2, {\n          e: e\n        });\n      }\n    };\n    var keyboardEvent = function keyboardEvent(e) {\n      if (e.code === \"Escape\" && isLastDialog()) {\n        var _props2$onEscKeydown, _props2$closeOnEscKey;\n        (_props2$onEscKeydown = props2.onEscKeydown) === null || _props2$onEscKeydown === void 0 || _props2$onEscKeydown.call(props2, {\n          e: e\n        });\n        if ((_props2$closeOnEscKey = props2.closeOnEscKeydown) !== null && _props2$closeOnEscKey !== void 0 ? _props2$closeOnEscKey : globalConfig.value.closeOnEscKeydown) {\n          emitCloseEvent({\n            e: e,\n            trigger: \"esc\"\n          });\n        }\n      }\n    };\n    var overlayAction = function overlayAction(e) {\n      var _props2$closeOnOverla;\n      if (props2.showOverlay && ((_props2$closeOnOverla = props2.closeOnOverlayClick) !== null && _props2$closeOnOverla !== void 0 ? _props2$closeOnOverla : globalConfig.value.closeOnOverlayClick)) {\n        var _props2$onOverlayClic;\n        (_props2$onOverlayClic = props2.onOverlayClick) === null || _props2$onOverlayClic === void 0 || _props2$onOverlayClic.call(props2, {\n          e: e\n        });\n        emitCloseEvent({\n          e: e,\n          trigger: \"overlay\"\n        });\n      }\n    };\n    var _useSameTarget = useSameTarget(overlayAction),\n      onClick = _useSameTarget.onClick,\n      onMousedown = _useSameTarget.onMousedown,\n      onMouseup = _useSameTarget.onMouseup;\n    var closeBtnAction = function closeBtnAction(e) {\n      var _props2$onCloseBtnCli;\n      (_props2$onCloseBtnCli = props2.onCloseBtnClick) === null || _props2$onCloseBtnCli === void 0 || _props2$onCloseBtnCli.call(props2, {\n        e: e\n      });\n      emitCloseEvent({\n        trigger: \"close-btn\",\n        e: e\n      });\n    };\n    var afterEnter = function afterEnter() {\n      var _props2$onOpened;\n      (_props2$onOpened = props2.onOpened) === null || _props2$onOpened === void 0 || _props2$onOpened.call(props2);\n    };\n    var afterLeave = function afterLeave() {\n      var _props2$onClosed;\n      if (isModeLess.value && props2.draggable && dialogEle.value) {\n        dialogEle.value.style.position = \"relative\";\n        dialogEle.value.style.left = \"unset\";\n        dialogEle.value.style.top = \"unset\";\n      }\n      (_props2$onClosed = props2.onClosed) === null || _props2$onClosed === void 0 || _props2$onClosed.call(props2);\n    };\n    var emitCloseEvent = function emitCloseEvent(ctx) {\n      var _props2$onClose;\n      (_props2$onClose = props2.onClose) === null || _props2$onClose === void 0 || _props2$onClose.call(props2, ctx);\n      context.emit(\"update:visible\", false);\n    };\n    var hasEventOn = function hasEventOn(name) {\n      var _this$_events;\n      var eventFuncs = (_this$_events = _this[\"_events\"]) === null || _this$_events === void 0 ? void 0 : _this$_events[name];\n      return !!(eventFuncs !== null && eventFuncs !== void 0 && eventFuncs.length);\n    };\n    var getIcon = function getIcon() {\n      var icon = {\n        info: createVNode(InfoCircleFilledIcon$1, {\n          \"class\": \"\".concat(classPrefix.value, \"-is-info\")\n        }, null),\n        warning: createVNode(ErrorCircleFilledIcon$1, {\n          \"class\": \"\".concat(classPrefix.value, \"-is-warning\")\n        }, null),\n        danger: createVNode(ErrorCircleFilledIcon$1, {\n          \"class\": \"\".concat(classPrefix.value, \"-is-error\")\n        }, null),\n        success: createVNode(CheckCircleFilledIcon$1, {\n          \"class\": \"\".concat(classPrefix.value, \"-is-success\")\n        }, null)\n      };\n      return icon[props2.theme];\n    };\n    var renderDialog = function renderDialog() {\n      var defaultHeader = createVNode(\"h5\", {\n        \"class\": \"title\"\n      }, null);\n      var defaultCloseBtn = createVNode(CloseIcon$1, null, null);\n      var body = renderContent(\"default\", \"body\");\n      var defaultFooter = createVNode(\"div\", null, [getCancelBtn({\n        cancelBtn: props2.cancelBtn,\n        globalCancel: globalConfig.value.cancel,\n        className: \"\".concat(COMPONENT_NAME.value, \"__cancel\")\n      }), getConfirmBtn({\n        theme: props2.theme,\n        confirmBtn: props2.confirmBtn,\n        globalConfirm: globalConfig.value.confirm,\n        globalConfirmBtnTheme: globalConfig.value.confirmBtnTheme,\n        className: \"\".concat(COMPONENT_NAME.value, \"__confirm\"),\n        confirmLoading: props2.confirmLoading\n      })]);\n      var headerClassName = isFullScreen.value ? [\"\".concat(COMPONENT_NAME.value, \"__header\"), \"\".concat(COMPONENT_NAME.value, \"__header--fullscreen\")] : \"\".concat(COMPONENT_NAME.value, \"__header\");\n      var closeClassName = isFullScreen.value ? [\"\".concat(COMPONENT_NAME.value, \"__close\"), \"\".concat(COMPONENT_NAME.value, \"__close--fullscreen\")] : \"\".concat(COMPONENT_NAME.value, \"__close\");\n      var bodyClassName = props2.theme === \"default\" ? [\"\".concat(COMPONENT_NAME.value, \"__body\")] : [\"\".concat(COMPONENT_NAME.value, \"__body__icon\")];\n      var footerContent = renderTNodeJSX(\"footer\", defaultFooter);\n      if (isFullScreen.value && footerContent) {\n        bodyClassName.push(\"\".concat(COMPONENT_NAME.value, \"__body--fullscreen\"));\n      } else if (isFullScreen.value) {\n        bodyClassName.push(\"\".concat(COMPONENT_NAME.value, \"__body--fullscreen--without-footer\"));\n      }\n      var footerClassName = isFullScreen.value ? [\"\".concat(COMPONENT_NAME.value, \"__footer\"), \"\".concat(COMPONENT_NAME.value, \"__footer--fullscreen\")] : \"\".concat(COMPONENT_NAME.value, \"__footer\");\n      var onStopDown = function onStopDown(e) {\n        if (isModeLess.value && props2.draggable) e.stopPropagation();\n      };\n      return createVNode(\"div\", {\n        \"class\": wrapClass.value\n      }, [createVNode(\"div\", {\n        \"class\": positionClass.value,\n        \"style\": positionStyle.value,\n        \"onClick\": onClick,\n        \"onMousedown\": onMousedown,\n        \"onMouseup\": onMouseup\n      }, [withDirectives(createVNode(\"div\", {\n        \"key\": \"dialog\",\n        \"class\": dialogClass.value,\n        \"style\": dialogStyle.value,\n        \"ref\": dialogEle\n      }, [createVNode(\"div\", {\n        \"class\": headerClassName,\n        \"onMousedown\": onStopDown\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__header-content\")\n      }, [getIcon(), renderTNodeJSX(\"header\", defaultHeader)]), props2.closeBtn ? createVNode(\"span\", {\n        \"class\": closeClassName,\n        \"onClick\": closeBtnAction\n      }, [renderTNodeJSX(\"closeBtn\", defaultCloseBtn)]) : null]), createVNode(\"div\", {\n        \"class\": bodyClassName,\n        \"onMousedown\": onStopDown\n      }, [body]), footerContent && createVNode(\"div\", {\n        \"class\": footerClassName,\n        \"onMousedown\": onStopDown\n      }, [footerContent])]), [[resolveDirective(\"draggable\"), isModeLess.value && props2.draggable]])])]);\n    };\n    onMounted(function () {\n      var hasScrollBar = document.documentElement.scrollHeight > document.documentElement.clientHeight;\n      var scrollWidth = hasScrollBar ? getScrollbarWidth() : 0;\n      styleEl.value = document.createElement(\"style\");\n      styleEl.value.dataset.id = \"td_dialog_\".concat(+new Date(), \"_\").concat(key += 1);\n      styleEl.value.innerHTML = \"\\n        html body {\\n          overflow-y: hidden;\\n          width: calc(100% - \".concat(scrollWidth, \"px);\\n        }\\n      \");\n    });\n    onBeforeUnmount(function () {\n      addKeyboardEvent(false);\n      destroySelf();\n    });\n    return {\n      COMPONENT_NAME: COMPONENT_NAME,\n      isModal: isModal,\n      isModeLess: isModeLess,\n      isFullScreen: isFullScreen,\n      maskClass: maskClass,\n      dialogClass: dialogClass,\n      dialogStyle: dialogStyle,\n      dialogEle: dialogEle,\n      afterEnter: afterEnter,\n      afterLeave: afterLeave,\n      hasEventOn: hasEventOn,\n      renderDialog: renderDialog,\n      teleportElement: teleportElement\n    };\n  },\n  render: function render() {\n    var _this2 = this;\n    var COMPONENT_NAME = this.COMPONENT_NAME;\n    var maskView = (this.isModal || this.isFullScreen) && createVNode(\"div\", {\n      \"key\": \"mask\",\n      \"class\": this.maskClass\n    }, null);\n    var dialogView = this.renderDialog();\n    var view = [maskView, dialogView];\n    var ctxStyle = {\n      zIndex: this.zIndex\n    };\n    var ctxClass = [\"\".concat(COMPONENT_NAME, \"__ctx\"), _defineProperty(_defineProperty(_defineProperty({}, \"\".concat(COMPONENT_NAME, \"__ctx--fixed\"), this.isModal || this.isFullScreen), \"\".concat(COMPONENT_NAME, \"__ctx--absolute\"), this.isModal && this.showInAttachedElement), \"\".concat(COMPONENT_NAME, \"__ctx--modeless\"), this.isModeLess)];\n    return createVNode(Teleport, {\n      \"disabled\": !this.attach || !this.teleportElement,\n      \"to\": this.teleportElement\n    }, {\n      \"default\": function _default() {\n        return [createVNode(Transition, {\n          \"duration\": 300,\n          \"name\": \"\".concat(COMPONENT_NAME, \"-zoom__vue\"),\n          \"onAfterEnter\": _this2.afterEnter,\n          \"onAfterLeave\": _this2.afterLeave\n        }, {\n          \"default\": function _default() {\n            return [(!_this2.destroyOnClose || _this2.visible) && withDirectives(createVNode(\"div\", mergeProps({\n              \"class\": ctxClass,\n              \"style\": ctxStyle\n            }, _this2.$attrs), [view]), [[vShow, _this2.visible]])];\n          }\n        })];\n      }\n    });\n  }\n});\nexport { _Dialog as default };","map":{"version":3,"names":["GetCSSValue","v","Number","isNaN","concat","mousePosition","getClickPosition","e","x","clientX","y","clientY","setTimeout","window","document","documentElement","addEventListener","InitDragEvent","dragBox","target","windowInnerWidth","innerWidth","clientWidth","windowInnerHeight","innerHeight","clientHeight","targetEvent","disX","offsetLeft","disY","offsetTop","dialogW","offsetWidth","dialogH","offsetHeight","mouseMoverHandler","documentEvent","left","top","style","position","mouseUpHandler","removeEventListener","key","_Dialog","defineComponent","name","directives","draggable","el","binding","value","inheritAttrs","props","emits","setup","props2","context","_this","COMPONENT_NAME","usePrefixClass","classPrefix","renderContent","useContent","renderTNodeJSX","useTNodeJSX","dialogEle","ref","_useConfig","useConfig","globalConfig","_useGlobalIcon","useGlobalIcon","CloseIcon","InfoCircleFilledIcon","CheckCircleFilledIcon","ErrorCircleFilledIcon","CloseIcon$1","InfoCircleFilledIcon$1","CheckCircleFilledIcon$1","ErrorCircleFilledIcon$1","confirmBtnAction","_props2$onConfirm","onConfirm","call","cancelBtnAction","_props2$onCancel","onCancel","emitCloseEvent","trigger","_useAction","useAction","getConfirmBtn","getCancelBtn","teleportElement","useTeleport","attach","useDestroyOnClose","timer","styleEl","isModal","computed","mode","isModeLess","isNormal","isFullScreen","computedVisible","visible","maskClass","showOverlay","positionClass","placement","wrapClass","positionStyle","topStyle","topValue","paddingTop","dialogClass","dialogClass2","theme","push","apply","dialogStyle","width","_usePopupManager","usePopupManager","isLastDialog","watch","_document$activeEleme","showInAttachedElement","preventScrollThrough","body","appendChild","nextTick","transformOrigin","activeElement","blur","clearStyleFunc","addKeyboardEvent","destroySelf","_styleEl$value$parent","_styleEl$value$parent2","parentNode","removeChild","clearTimeout","status","keyboardEvent","confirmOnEnter","keyboardEnterEvent","eventSrc","tagName","toLowerCase","code","_props2$onConfirm2","_props2$onEscKeydown","_props2$closeOnEscKey","onEscKeydown","closeOnEscKeydown","overlayAction","_props2$closeOnOverla","closeOnOverlayClick","_props2$onOverlayClic","onOverlayClick","_useSameTarget","useSameTarget","onClick","onMousedown","onMouseup","closeBtnAction","_props2$onCloseBtnCli","onCloseBtnClick","afterEnter","_props2$onOpened","onOpened","afterLeave","_props2$onClosed","onClosed","ctx","_props2$onClose","onClose","emit","hasEventOn","_this$_events","eventFuncs","length","getIcon","icon","info","createVNode","warning","danger","success","renderDialog","defaultHeader","defaultCloseBtn","defaultFooter","cancelBtn","globalCancel","cancel","className","confirmBtn","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","confirmLoading","headerClassName","closeClassName","bodyClassName","footerContent","footerClassName","onStopDown","stopPropagation","withDirectives","closeBtn","resolveDirective","onMounted","hasScrollBar","scrollHeight","scrollWidth","getScrollbarWidth","createElement","dataset","id","Date","innerHTML","onBeforeUnmount","render","_this2","maskView","dialogView","view","ctxStyle","zIndex","ctxClass","_defineProperty","Teleport","_default","Transition","destroyOnClose","mergeProps","$attrs","vShow"],"sources":["../../src/dialog/dialog.tsx"],"sourcesContent":["import { computed, defineComponent, nextTick, onBeforeUnmount, onMounted, ref, Transition, watch, Teleport } from 'vue';\nimport {\n  CloseIcon as TdCloseIcon,\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\n\nimport { DialogCloseContext } from './type';\nimport props from './props';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useAction, useSameTarget } from './hooks';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport useDestroyOnClose from '../hooks/useDestroyOnClose';\nimport { getScrollbarWidth } from '../_common/js/utils/getScrollbarWidth';\n\nimport type { TdDialogProps } from './type';\nimport useTeleport from '../hooks/useTeleport';\nimport usePopupManager from '../hooks/usePopupManager';\n\nfunction GetCSSValue(v: string | number) {\n  return Number.isNaN(Number(v)) ? v : `${Number(v)}px`;\n}\n\nlet mousePosition: { x: number; y: number } | null;\nconst getClickPosition = (e: MouseEvent) => {\n  mousePosition = {\n    x: e.clientX,\n    y: e.clientY,\n  };\n  setTimeout(() => {\n    mousePosition = null;\n  }, 100);\n};\n\nif (typeof window !== 'undefined' && window.document && window.document.documentElement) {\n  document.documentElement.addEventListener('click', getClickPosition, true);\n}\n\nfunction InitDragEvent(dragBox: HTMLElement) {\n  const target = dragBox;\n  const windowInnerWidth = window.innerWidth || document.documentElement.clientWidth;\n  const windowInnerHeight = window.innerHeight || document.documentElement.clientHeight;\n  target.addEventListener('mousedown', (targetEvent: MouseEvent) => {\n    // 算出鼠标相对元素的位置\n    const disX = targetEvent.clientX - target.offsetLeft;\n    const disY = targetEvent.clientY - target.offsetTop;\n    const dialogW = target.offsetWidth;\n    const dialogH = target.offsetHeight;\n    // 如果弹出框超出屏幕范围 不能进行拖拽\n    if (dialogW > windowInnerWidth || dialogH > windowInnerHeight) return;\n    function mouseMoverHandler(documentEvent: MouseEvent) {\n      // 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\n      let left = documentEvent.clientX - disX;\n      let top = documentEvent.clientY - disY;\n      // 临界判断\n      // 拖拽上左边界限制\n      if (left < 0) left = 0;\n      if (top < 0) top = 0;\n      if (windowInnerWidth - target.offsetWidth - left < 0) left = windowInnerWidth - target.offsetWidth;\n      if (windowInnerHeight - target.offsetHeight - top < 0) top = windowInnerHeight - target.offsetHeight;\n      target.style.position = 'absolute';\n      target.style.left = `${left}px`;\n      target.style.top = `${top}px`;\n    }\n    function mouseUpHandler() {\n      // 鼠标弹起来的时候不再移动\n      document.removeEventListener('mousemove', mouseMoverHandler);\n      // 预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\n      document.removeEventListener('mouseup', mouseUpHandler);\n    }\n    // 元素按下时注册document鼠标监听事件\n    document.addEventListener('mousemove', mouseMoverHandler);\n    // 鼠标弹起来移除document鼠标监听事件\n    document.addEventListener('mouseup', mouseUpHandler);\n    // 拖拽结束移除鼠标监听事件，解决文字拖拽结束事件未解绑问题\n    document.addEventListener('dragend', mouseUpHandler);\n  });\n}\n\nlet key = 1;\n\nexport default defineComponent({\n  name: 'TDialog',\n  // 注册v-draggable指令,传入true时候初始化拖拽事件\n  directives: {\n    draggable(el, binding) {\n      // el 指令绑定的元素\n      if (el && binding && binding.value) {\n        InitDragEvent(el);\n      }\n    },\n  },\n  inheritAttrs: false,\n  props,\n  emits: ['update:visible'],\n  setup(props, context) {\n    const COMPONENT_NAME = usePrefixClass('dialog');\n    const classPrefix = usePrefixClass();\n    const renderContent = useContent();\n    const renderTNodeJSX = useTNodeJSX();\n    const dialogEle = ref<HTMLElement | null>(null);\n    const { globalConfig } = useConfig('dialog');\n    const { CloseIcon, InfoCircleFilledIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      CloseIcon: TdCloseIcon,\n      InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n      CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n    };\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      emitCloseEvent({ e, trigger: 'cancel' });\n    };\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n    // teleport容器\n    const teleportElement = useTeleport(() => props.attach);\n    useDestroyOnClose();\n    const timer = ref();\n    const styleEl = ref();\n    // 是否模态形式的对话框\n    const isModal = computed(() => props.mode === 'modal');\n    // 是否非模态对话框\n    const isModeLess = computed(() => props.mode === 'modeless');\n    // 是否普通对话框，没有脱离文档流的对话框\n    const isNormal = computed(() => props.mode === 'normal');\n    // 是否全屏对话框\n    const isFullScreen = computed(() => props.mode === 'full-screen');\n    const computedVisible = computed(() => props.visible);\n    const maskClass = computed(() => [\n      `${COMPONENT_NAME.value}__mask`,\n      !props.showOverlay && `${classPrefix.value}-is-hidden`,\n    ]);\n    const positionClass = computed(() => {\n      if (isNormal.value) return [];\n      if (isFullScreen.value) return [`${COMPONENT_NAME.value}__position_fullscreen`];\n\n      return [\n        `${COMPONENT_NAME.value}__position`,\n        !!props.top && `${COMPONENT_NAME.value}--top`,\n        `${props.placement && !props.top ? `${COMPONENT_NAME.value}--${props.placement}` : ''}`,\n      ];\n    });\n    const wrapClass = computed(() => [!isNormal.value && `${COMPONENT_NAME.value}__wrap`]);\n    const positionStyle = computed(() => {\n      if (isFullScreen.value) return {}; // 全屏模式，top属性不生效\n\n      // 此处获取定位方式 top 优先级较高 存在时 默认使用top定位\n      const { top } = props;\n      let topStyle = {};\n      if (top !== undefined) {\n        const topValue = GetCSSValue(top);\n        topStyle = { paddingTop: topValue };\n      }\n      return topStyle;\n    });\n    const dialogClass = computed(() => {\n      const dialogClass = [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}__modal-${props.theme}`,\n        isModeLess.value && props.draggable && `${COMPONENT_NAME.value}--draggable`,\n      ];\n\n      if (isFullScreen.value) {\n        dialogClass.push(`${COMPONENT_NAME.value}__fullscreen`);\n      } else {\n        dialogClass.push(...[`${COMPONENT_NAME.value}--default`, `${COMPONENT_NAME.value}--${props.placement}`]);\n      }\n      return dialogClass;\n    });\n    const dialogStyle = computed(() => {\n      return !isFullScreen.value ? { width: GetCSSValue(props.width) } : {}; // width全屏模式不生效\n    });\n    const { isLastDialog } = usePopupManager('dialog', {\n      visible: computedVisible,\n    });\n\n    watch(\n      () => props.visible,\n      (value) => {\n        if (value) {\n          if ((isModal.value && !props.showInAttachedElement) || isFullScreen.value) {\n            if (props.preventScrollThrough) {\n              document.body.appendChild(styleEl.value);\n            }\n\n            nextTick(() => {\n              if (mousePosition && dialogEle.value) {\n                dialogEle.value.style.transformOrigin = `${mousePosition.x - dialogEle.value.offsetLeft}px ${\n                  mousePosition.y - dialogEle.value.offsetTop\n                }px`;\n              }\n            });\n          }\n          // 清除鼠标焦点 避免entry事件多次触发（按钮弹出弹窗 不移除焦点 立即按Entry按键 会造成弹窗关闭再弹出）\n          (document.activeElement as HTMLElement)?.blur();\n        } else {\n          clearStyleFunc();\n        }\n        addKeyboardEvent(value);\n      },\n    );\n\n    function destroySelf() {\n      styleEl.value.parentNode?.removeChild?.(styleEl.value);\n    }\n\n    function clearStyleFunc() {\n      clearTimeout(timer.value);\n      timer.value = setTimeout(() => {\n        destroySelf();\n      }, 150);\n    }\n\n    const addKeyboardEvent = (status: boolean) => {\n      if (status) {\n        document.addEventListener('keydown', keyboardEvent);\n        props.confirmOnEnter && document.addEventListener('keydown', keyboardEnterEvent);\n      } else {\n        document.removeEventListener('keydown', keyboardEvent);\n        props.confirmOnEnter && document.removeEventListener('keydown', keyboardEnterEvent);\n      }\n    };\n    // 回车出发确认事件\n    const keyboardEnterEvent = (e: KeyboardEvent) => {\n      const eventSrc = e.target as HTMLElement;\n      if (eventSrc.tagName.toLowerCase() === 'input') return; // 若是input触发 则不执行\n      const { code } = e;\n      if ((code === 'Enter' || code === 'NumpadEnter') && isLastDialog()) {\n        props.onConfirm?.({ e });\n      }\n    };\n    const keyboardEvent = (e: KeyboardEvent) => {\n      if (e.code === 'Escape' && isLastDialog()) {\n        props.onEscKeydown?.({ e });\n        // 根据closeOnEscKeydown判断按下ESC时是否触发close事件\n        if (props.closeOnEscKeydown ?? globalConfig.value.closeOnEscKeydown) {\n          emitCloseEvent({ e, trigger: 'esc' });\n        }\n      }\n    };\n    const overlayAction = (e: MouseEvent) => {\n      if (props.showOverlay && (props.closeOnOverlayClick ?? globalConfig.value.closeOnOverlayClick)) {\n        props.onOverlayClick?.({ e });\n        emitCloseEvent({ e, trigger: 'overlay' });\n      }\n    };\n    const { onClick, onMousedown, onMouseup } = useSameTarget(overlayAction);\n    const closeBtnAction = (e: MouseEvent) => {\n      props.onCloseBtnClick?.({ e });\n      emitCloseEvent({\n        trigger: 'close-btn',\n        e,\n      });\n    };\n\n    // 打开弹窗动画结束时事件\n    const afterEnter = () => {\n      props.onOpened?.();\n    };\n    // 关闭弹窗动画结束时事件\n    const afterLeave = () => {\n      if (isModeLess.value && props.draggable && dialogEle.value) {\n        // 关闭弹窗 清空拖拽设置的相关css\n        dialogEle.value.style.position = 'relative';\n        dialogEle.value.style.left = 'unset';\n        dialogEle.value.style.top = 'unset';\n      }\n      props.onClosed?.();\n    };\n\n    const emitCloseEvent = (ctx: DialogCloseContext) => {\n      props.onClose?.(ctx);\n      // 默认关闭弹窗\n      context.emit('update:visible', false);\n    };\n\n    // Vue在引入阶段对事件的处理还做了哪些初始化操作。Vue在实例上用一个_events属性存贮管理事件的派发和更新，\n    // 暴露出$on, $once, $off, $emit方法给外部管理事件和派发执行事件\n    // 所以通过判断_events某个事件下监听函数数组是否超过一个，可以判断出组件是否监听了当前事件\n    const hasEventOn = (name: string) => {\n      // _events 因没有被暴露在vue实例接口中，只能把这个规则注释掉\n      // eslint-disable-next-line dot-notation\n      const eventFuncs = this['_events']?.[name];\n      return !!eventFuncs?.length;\n    };\n    const getIcon = () => {\n      const icon = {\n        info: <InfoCircleFilledIcon class={`${classPrefix.value}-is-info`} />,\n        warning: <ErrorCircleFilledIcon class={`${classPrefix.value}-is-warning`} />,\n        danger: <ErrorCircleFilledIcon class={`${classPrefix.value}-is-error`} />,\n        success: <CheckCircleFilledIcon class={`${classPrefix.value}-is-success`} />,\n      };\n      return icon[props.theme];\n    };\n    const renderDialog = () => {\n      // header 值为 true 显示空白头部\n      const defaultHeader = <h5 class=\"title\"></h5>;\n      const defaultCloseBtn = <CloseIcon />;\n      const body = renderContent('default', 'body');\n      const defaultFooter = (\n        <div>\n          {getCancelBtn({\n            cancelBtn: props.cancelBtn as TdDialogProps['cancelBtn'],\n            globalCancel: globalConfig.value.cancel,\n            className: `${COMPONENT_NAME.value}__cancel`,\n          })}\n          {getConfirmBtn({\n            theme: props.theme,\n            confirmBtn: props.confirmBtn as TdDialogProps['confirmBtn'],\n            globalConfirm: globalConfig.value.confirm,\n            globalConfirmBtnTheme: globalConfig.value.confirmBtnTheme,\n            className: `${COMPONENT_NAME.value}__confirm`,\n            confirmLoading: props.confirmLoading,\n          })}\n        </div>\n      );\n      const headerClassName = isFullScreen.value\n        ? [`${COMPONENT_NAME.value}__header`, `${COMPONENT_NAME.value}__header--fullscreen`]\n        : `${COMPONENT_NAME.value}__header`;\n\n      const closeClassName = isFullScreen.value\n        ? [`${COMPONENT_NAME.value}__close`, `${COMPONENT_NAME.value}__close--fullscreen`]\n        : `${COMPONENT_NAME.value}__close`;\n\n      const bodyClassName =\n        props.theme === 'default' ? [`${COMPONENT_NAME.value}__body`] : [`${COMPONENT_NAME.value}__body__icon`];\n\n      const footerContent = renderTNodeJSX('footer', defaultFooter);\n\n      if (isFullScreen.value && footerContent) {\n        bodyClassName.push(`${COMPONENT_NAME.value}__body--fullscreen`);\n      } else if (isFullScreen.value) {\n        bodyClassName.push(`${COMPONENT_NAME.value}__body--fullscreen--without-footer`);\n      }\n\n      const footerClassName = isFullScreen.value\n        ? [`${COMPONENT_NAME.value}__footer`, `${COMPONENT_NAME.value}__footer--fullscreen`]\n        : `${COMPONENT_NAME.value}__footer`;\n\n      const onStopDown = (e: MouseEvent) => {\n        if (isModeLess.value && props.draggable) e.stopPropagation();\n      };\n\n      return (\n        // /* 非模态形态下draggable为true才允许拖拽 */\n        <div class={wrapClass.value}>\n          <div\n            class={positionClass.value}\n            style={positionStyle.value}\n            onClick={onClick}\n            onMousedown={onMousedown}\n            onMouseup={onMouseup}\n          >\n            <div\n              key=\"dialog\"\n              class={dialogClass.value}\n              style={dialogStyle.value}\n              v-draggable={isModeLess.value && props.draggable}\n              ref={dialogEle}\n            >\n              <div class={headerClassName} onMousedown={onStopDown}>\n                <div class={`${COMPONENT_NAME.value}__header-content`}>\n                  {getIcon()}\n                  {renderTNodeJSX('header', defaultHeader)}\n                </div>\n\n                {props.closeBtn ? (\n                  <span class={closeClassName} onClick={closeBtnAction}>\n                    {renderTNodeJSX('closeBtn', defaultCloseBtn)}\n                  </span>\n                ) : null}\n              </div>\n              <div class={bodyClassName} onMousedown={onStopDown}>\n                {body}\n              </div>\n              {footerContent && (\n                <div class={footerClassName} onMousedown={onStopDown}>\n                  {footerContent}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    };\n\n    onMounted(() => {\n      const hasScrollBar = document.documentElement.scrollHeight > document.documentElement.clientHeight;\n      const scrollWidth = hasScrollBar ? getScrollbarWidth() : 0;\n      styleEl.value = document.createElement('style');\n      styleEl.value.dataset.id = `td_dialog_${+new Date()}_${(key += 1)}`;\n      styleEl.value.innerHTML = `\n        html body {\n          overflow-y: hidden;\n          width: calc(100% - ${scrollWidth}px);\n        }\n      `;\n    });\n\n    onBeforeUnmount(() => {\n      addKeyboardEvent(false);\n      destroySelf();\n    });\n\n    return {\n      COMPONENT_NAME,\n      isModal,\n      isModeLess,\n      isFullScreen,\n      maskClass,\n      dialogClass,\n      dialogStyle,\n      dialogEle,\n      afterEnter,\n      afterLeave,\n      hasEventOn,\n      renderDialog,\n      teleportElement,\n    };\n  },\n  render() {\n    const { COMPONENT_NAME } = this;\n    const maskView = (this.isModal || this.isFullScreen) && <div key=\"mask\" class={this.maskClass}></div>;\n    const dialogView = this.renderDialog();\n    const view = [maskView, dialogView];\n    const ctxStyle = { zIndex: this.zIndex };\n    // dialog__ctx--fixed 绝对定位\n    // dialog__ctx--absolute 挂载在attach元素上 相对定位\n    // __ctx--modeless modeless 点击穿透\n    const ctxClass = [\n      `${COMPONENT_NAME}__ctx`,\n      {\n        [`${COMPONENT_NAME}__ctx--fixed`]: this.isModal || this.isFullScreen,\n        [`${COMPONENT_NAME}__ctx--absolute`]: this.isModal && this.showInAttachedElement,\n        [`${COMPONENT_NAME}__ctx--modeless`]: this.isModeLess,\n      },\n    ];\n    return (\n      <Teleport disabled={!this.attach || !this.teleportElement} to={this.teleportElement}>\n        <Transition\n          duration={300}\n          name={`${COMPONENT_NAME}-zoom__vue`}\n          onAfterEnter={this.afterEnter}\n          onAfterLeave={this.afterLeave}\n        >\n          {(!this.destroyOnClose || this.visible) && (\n            <div v-show={this.visible} class={ctxClass} style={ctxStyle} {...this.$attrs}>\n              {view}\n            </div>\n          )}\n        </Transition>\n      </Teleport>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}