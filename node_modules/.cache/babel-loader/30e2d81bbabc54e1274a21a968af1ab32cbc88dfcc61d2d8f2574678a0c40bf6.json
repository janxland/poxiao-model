{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-a5dfe884.mjs';\nimport { defineComponent, ref, computed, createVNode, mergeProps } from 'vue';\nimport { PLACEMENT_OFFSET } from './const.mjs';\nimport _Message from './message.mjs';\nimport { usePrefixClass } from '../hooks/useConfig.mjs';\nimport '../_chunks/dep-d33c5d88.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../loading/index.mjs';\nimport '../_chunks/dep-c4a2d318.mjs';\nimport '../_chunks/dep-62ad5a36.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nimport '../_chunks/dep-0e5b2b76.mjs';\nimport '../_chunks/dep-f3a27c4c.mjs';\nimport '../_chunks/dep-c70e40ae.mjs';\nimport '../_chunks/dep-6e7655db.mjs';\nimport '../_chunks/dep-6ad32365.mjs';\nimport '../_chunks/dep-f76ec896.mjs';\nimport '../_chunks/dep-4382b808.mjs';\nimport '../_chunks/dep-0894e3ae.mjs';\nimport '../_chunks/dep-0223e29d.mjs';\nimport '../_chunks/dep-c31faaef.mjs';\nimport '../_chunks/dep-5f15268c.mjs';\nimport '../_chunks/dep-0ced8e2e.mjs';\nimport '../_chunks/dep-fb9941c5.mjs';\nimport '../_chunks/dep-75628739.mjs';\nimport '../_chunks/dep-1494b54a.mjs';\nimport '../_chunks/dep-e3204123.mjs';\nimport '../_chunks/dep-10c900d8.mjs';\nimport '../_chunks/dep-1c5d24dd.mjs';\nimport '../_chunks/dep-b6946d89.mjs';\nimport '../_chunks/dep-3d61d8a6.mjs';\nimport '../_chunks/dep-88c02450.mjs';\nimport '../_chunks/dep-f7067d3d.mjs';\nimport '../_chunks/dep-cd1b7f96.mjs';\nimport '../_chunks/dep-eea784eb.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-0c808c2e.mjs';\nimport '../_chunks/dep-4c103c66.mjs';\nimport '../_chunks/dep-d090226f.mjs';\nimport '../_chunks/dep-6ea85de8.mjs';\nimport '../_chunks/dep-92ce9c6c.mjs';\nimport '../_chunks/dep-3b84887f.mjs';\nimport '../_chunks/dep-143154a5.mjs';\nimport '../_chunks/dep-017fc8db.mjs';\nimport '../_chunks/dep-69610219.mjs';\nimport '../_chunks/dep-04ba5b59.mjs';\nimport '../_chunks/dep-05b564d9.mjs';\nimport '../_chunks/dep-e98ea432.mjs';\nimport '../_chunks/dep-003c9b00.mjs';\nimport '../_chunks/dep-f41eb5b9.mjs';\nimport '../_chunks/dep-8cc70cb2.mjs';\nimport '../loading/plugin.mjs';\nimport '../loading/loading.mjs';\nimport '../_chunks/dep-a71c8f5b.mjs';\nimport '../_chunks/dep-0e21c401.mjs';\nimport '../loading/icon/gradient.mjs';\nimport '../_common/js/loading/circle-adapter.mjs';\nimport '../_common/js/utils/set-style.mjs';\nimport '../_common/js/utils/helper.mjs';\nimport '../_chunks/dep-4d2c39b6.mjs';\nimport '../_chunks/dep-8325f53f.mjs';\nimport '../_chunks/dep-5d7be5c6.mjs';\nimport '../_chunks/dep-b20328d2.mjs';\nimport '../_chunks/dep-3c3faac3.mjs';\nimport '../_chunks/dep-ae66bf73.mjs';\nimport '../utils/dom.mjs';\nimport '../utils/easing.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-bc75f95c.mjs';\nimport '../_chunks/dep-190cc0b3.mjs';\nimport '../_chunks/dep-29a308fc.mjs';\nimport '../_chunks/dep-18af437d.mjs';\nimport '../_chunks/dep-28a28c00.mjs';\nimport '../_chunks/dep-1c9d9f8d.mjs';\nimport '../loading/props.mjs';\nimport '../hooks/useTeleport.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-db7324ec.mjs';\nimport '../config-provider/type.mjs';\nimport '../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../loading/type.mjs';\nimport './props.mjs';\nimport '../hooks/useGlobalIcon.mjs';\nimport './animation.mjs';\nimport '../hooks/tnode.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar DEFAULT_Z_INDEX = 6e3;\nvar getUniqueId = function () {\n  var id = 0;\n  return function () {\n    id += 1;\n    return id;\n  };\n}();\nvar MessageList = defineComponent({\n  name: \"TMessageList\",\n  props: {\n    zIndex: {\n      type: Number,\n      \"default\": 0\n    },\n    placement: {\n      type: String,\n      \"default\": \"\"\n    }\n  },\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose;\n    var COMPONENT_NAME = usePrefixClass(\"message__list\");\n    var list = ref([]);\n    var messageList = ref([]);\n    var styles = computed(function () {\n      return _objectSpread(_objectSpread({}, PLACEMENT_OFFSET[props.placement]), {}, {\n        zIndex: props.zIndex !== DEFAULT_Z_INDEX ? props.zIndex : DEFAULT_Z_INDEX\n      });\n    });\n    var add = function add(msg) {\n      var mg = _objectSpread(_objectSpread({}, msg), {}, {\n        key: getUniqueId()\n      });\n      list.value.push(mg);\n      return mg.key;\n    };\n    var remove = function remove(index) {\n      list.value.splice(index, 1);\n    };\n    var removeAll = function removeAll() {\n      list.value = [];\n    };\n    var getOffset = function getOffset(val) {\n      if (!val) return;\n      return isNaN(Number(val)) ? val : \"\".concat(val, \"px\");\n    };\n    var msgStyles = function msgStyles(item) {\n      return item.offset && {\n        position: \"relative\",\n        left: getOffset(item.offset[0]),\n        top: getOffset(item.offset[1])\n      };\n    };\n    var getProps = function getProps(index, item) {\n      return _objectSpread(_objectSpread({}, item), {}, {\n        onCloseBtnClick: function onCloseBtnClick(e) {\n          if (item.onCloseBtnClick) {\n            item.onCloseBtnClick(e);\n          }\n          return remove(index);\n        },\n        onDurationEnd: function onDurationEnd() {\n          if (item.onDurationEnd) {\n            item.onDurationEnd();\n          }\n          return remove(index);\n        }\n      });\n    };\n    var addChild = function addChild(el) {\n      if (el) {\n        messageList.value.push(el);\n      }\n    };\n    expose({\n      add: add,\n      removeAll: removeAll,\n      list: list,\n      messageList: messageList\n    });\n    return function () {\n      if (!list.value.length) return;\n      return createVNode(\"div\", {\n        \"class\": COMPONENT_NAME.value,\n        \"style\": styles.value\n      }, [list.value.map(function (item, index) {\n        return createVNode(_Message, mergeProps({\n          \"key\": item.key,\n          \"style\": msgStyles(item),\n          \"ref\": addChild\n        }, getProps(index, item)), null);\n      })]);\n    };\n  }\n});\nexport { DEFAULT_Z_INDEX, MessageList, MessageList as default };","map":{"version":3,"names":["DEFAULT_Z_INDEX","getUniqueId","id","MessageList","defineComponent","name","props","zIndex","type","Number","placement","String","setup","_ref","expose","COMPONENT_NAME","usePrefixClass","list","ref","messageList","styles","computed","_objectSpread","PLACEMENT_OFFSET","add","msg","mg","key","value","push","remove","index","splice","removeAll","getOffset","val","isNaN","concat","msgStyles","item","offset","position","left","top","getProps","onCloseBtnClick","e","onDurationEnd","addChild","el","length","createVNode","map","_Message","mergeProps"],"sources":["../../src/message/messageList.tsx"],"sourcesContent":["import { computed, defineComponent, ref } from 'vue';\nimport { PLACEMENT_OFFSET } from './const';\nimport TMessage from './message';\nimport { MessageOptions } from './type';\nimport { usePrefixClass } from '../hooks/useConfig';\n\nexport const DEFAULT_Z_INDEX = 6000;\n\nconst getUniqueId = (() => {\n  let id = 0;\n  return () => {\n    id += 1;\n    return id;\n  };\n})();\n\nexport const MessageList = defineComponent({\n  name: 'TMessageList',\n  props: {\n    zIndex: {\n      type: Number,\n      default: 0,\n    },\n    placement: {\n      type: String,\n      default: '',\n    },\n  },\n  setup(props, { expose }) {\n    const COMPONENT_NAME = usePrefixClass('message__list');\n    const list = ref([]);\n    const messageList = ref([]);\n\n    const styles = computed(() => ({\n      ...PLACEMENT_OFFSET[props.placement],\n      zIndex: props.zIndex !== DEFAULT_Z_INDEX ? props.zIndex : DEFAULT_Z_INDEX,\n    }));\n\n    const add = (msg: MessageOptions): number => {\n      const mg = { ...msg, key: getUniqueId() };\n      list.value.push(mg);\n      return mg.key;\n    };\n\n    const remove = (index: number) => {\n      list.value.splice(index, 1);\n    };\n\n    const removeAll = () => {\n      list.value = [];\n    };\n\n    const getOffset = (val: string | number) => {\n      if (!val) return;\n      return isNaN(Number(val)) ? val : `${val}px`;\n    };\n\n    const msgStyles = (item: { offset: Array<string | number> }) => {\n      return (\n        item.offset && {\n          position: 'relative',\n          left: getOffset(item.offset[0]),\n          top: getOffset(item.offset[1]),\n        }\n      );\n    };\n\n    const getProps = (index: number, item: MessageOptions) => {\n      return {\n        ...item,\n        onCloseBtnClick: (e: any) => {\n          if (item.onCloseBtnClick) {\n            item.onCloseBtnClick(e);\n          }\n          return remove(index);\n        },\n        onDurationEnd: () => {\n          if (item.onDurationEnd) {\n            item.onDurationEnd();\n          }\n          return remove(index);\n        },\n      };\n    };\n\n    const addChild = (el: Element) => {\n      if (el) {\n        messageList.value.push(el);\n      }\n    };\n\n    expose({ add, removeAll, list, messageList });\n\n    return () => {\n      if (!list.value.length) return;\n\n      return (\n        <div class={COMPONENT_NAME.value} style={styles.value}>\n          {list.value.map((item, index) => (\n            <TMessage key={item.key} style={msgStyles(item)} ref={addChild} {...getProps(index, item)} />\n          ))}\n        </div>\n      );\n    };\n  },\n});\n\nexport default MessageList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}