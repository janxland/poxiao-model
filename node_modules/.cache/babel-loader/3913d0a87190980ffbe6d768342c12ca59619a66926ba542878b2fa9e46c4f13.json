{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../../_chunks/dep-a5dfe884.mjs';\nimport { defineComponent, ref, reactive, watch, onMounted, onBeforeUnmount, createVNode } from 'vue';\nimport { c as cloneDeep_1 } from '../../_chunks/dep-db7324ec.mjs';\nimport '../const.mjs';\nimport '../utils/index.mjs';\nimport { InputNumber } from '../../input-number/index.mjs';\nimport { useBaseClassName } from '../hooks.mjs';\nimport { useCommonClassName } from '../../hooks/useConfig.mjs';\nimport baseProps from './base-props.mjs';\nimport { GRADIENT_SLIDER_DEFAULT_WIDTH } from '../../_common/js/color-picker/constants.mjs';\nimport { genGradientPoint, gradientColors2string } from '../../_common/js/color-picker/color.mjs';\nimport '../../_chunks/dep-d33c5d88.mjs';\nimport '../../_chunks/dep-437d10c6.mjs';\nimport '../../_chunks/dep-d090226f.mjs';\nimport '../../_chunks/dep-c31faaef.mjs';\nimport '../../_chunks/dep-5f15268c.mjs';\nimport '../../_chunks/dep-c70e40ae.mjs';\nimport '../../_chunks/dep-6e7655db.mjs';\nimport '../../_chunks/dep-6ad32365.mjs';\nimport '../../_chunks/dep-62ad5a36.mjs';\nimport '../../_chunks/dep-f76ec896.mjs';\nimport '../../_chunks/dep-4382b808.mjs';\nimport '../../_chunks/dep-0894e3ae.mjs';\nimport '../../_chunks/dep-0ced8e2e.mjs';\nimport '../../_chunks/dep-fb9941c5.mjs';\nimport '../../_chunks/dep-75628739.mjs';\nimport '../../_chunks/dep-1494b54a.mjs';\nimport '../../_chunks/dep-0e5b2b76.mjs';\nimport '../../_chunks/dep-f3a27c4c.mjs';\nimport '../../_chunks/dep-e3204123.mjs';\nimport '../../_chunks/dep-10c900d8.mjs';\nimport '../../_chunks/dep-1c5d24dd.mjs';\nimport '../../_chunks/dep-b6946d89.mjs';\nimport '../../_chunks/dep-6ea85de8.mjs';\nimport '../../_chunks/dep-92ce9c6c.mjs';\nimport '../../_chunks/dep-3b84887f.mjs';\nimport '../../_common/js/color-picker/index.mjs';\nimport '../../_common/js/color-picker/cmyk.mjs';\nimport '../../_common/js/color-picker/draggable.mjs';\nimport '../../_chunks/dep-e7c4d7b2.mjs';\nimport '../../_common/js/color-picker/gradient.mjs';\nimport '../../_chunks/dep-5d7be5c6.mjs';\nimport '../../_chunks/dep-b20328d2.mjs';\nimport '../../_chunks/dep-e7ab8269.mjs';\nimport '../../input-number/input-number.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../../button/index.mjs';\nimport '../../button/button.mjs';\nimport '../../_chunks/dep-4d2c39b6.mjs';\nimport '../../_chunks/dep-0e21c401.mjs';\nimport '../../loading/index.mjs';\nimport '../../_chunks/dep-c4a2d318.mjs';\nimport '../../_chunks/dep-0223e29d.mjs';\nimport '../../_chunks/dep-3d61d8a6.mjs';\nimport '../../_chunks/dep-88c02450.mjs';\nimport '../../_chunks/dep-f7067d3d.mjs';\nimport '../../_chunks/dep-cd1b7f96.mjs';\nimport '../../_chunks/dep-eea784eb.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-0c808c2e.mjs';\nimport '../../_chunks/dep-4c103c66.mjs';\nimport '../../_chunks/dep-143154a5.mjs';\nimport '../../_chunks/dep-017fc8db.mjs';\nimport '../../_chunks/dep-69610219.mjs';\nimport '../../_chunks/dep-04ba5b59.mjs';\nimport '../../_chunks/dep-05b564d9.mjs';\nimport '../../_chunks/dep-e98ea432.mjs';\nimport '../../_chunks/dep-003c9b00.mjs';\nimport '../../_chunks/dep-f41eb5b9.mjs';\nimport '../../_chunks/dep-8cc70cb2.mjs';\nimport '../../loading/plugin.mjs';\nimport '../../loading/loading.mjs';\nimport '../../_chunks/dep-a71c8f5b.mjs';\nimport '../../loading/icon/gradient.mjs';\nimport '../../_common/js/loading/circle-adapter.mjs';\nimport '../../_common/js/utils/set-style.mjs';\nimport '../../_common/js/utils/helper.mjs';\nimport '../../_chunks/dep-8325f53f.mjs';\nimport '../../_chunks/dep-3c3faac3.mjs';\nimport '../../_chunks/dep-ae66bf73.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-bc75f95c.mjs';\nimport '../../_chunks/dep-190cc0b3.mjs';\nimport '../../_chunks/dep-29a308fc.mjs';\nimport '../../_chunks/dep-18af437d.mjs';\nimport '../../_chunks/dep-28a28c00.mjs';\nimport '../../_chunks/dep-1c9d9f8d.mjs';\nimport '../../loading/props.mjs';\nimport '../../hooks/useTeleport.mjs';\nimport '../../utils/withInstall.mjs';\nimport './style/css.mjs';\nimport '../../loading/type.mjs';\nimport '../../button/props.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/tnode.mjs';\nimport '../../hooks/useDisabled.mjs';\nimport '../../_chunks/dep-36f0e4f4.mjs';\nimport '../../button/type.mjs';\nimport '../../input/index.mjs';\nimport '../../input/input.mjs';\nimport '../../input/props.mjs';\nimport '../../form/hooks.mjs';\nimport '../../hooks/useGlobalIcon.mjs';\nimport '../../input/useInput.mjs';\nimport '../../form/const.mjs';\nimport '../../hooks/index.mjs';\nimport '../../hooks/icon.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../hooks/useCommonClassName.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport '../../hooks/useDestroyOnClose.mjs';\nimport '../../hooks/useVirtualScroll.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../hooks/useImagePreviewUrl.mjs';\nimport '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../input/useLengthLimit.mjs';\nimport '../../_common/js/log/index.mjs';\nimport '../../input/useInputEventHandler.mjs';\nimport '../../input/useInputWidth.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../input/input-group.mjs';\nimport '../../input/input-group-props.mjs';\nimport '../../input/type.mjs';\nimport '../../input-number/props.mjs';\nimport '../../input-number/useInputNumber.mjs';\nimport '../../_common/js/input-number/number.mjs';\nimport '../../_common/js/input-number/large-number.mjs';\nimport '../../input-number/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar DELETE_KEYS = [\"delete\", \"backspace\"];\nvar LinearGradient = defineComponent({\n  name: \"LinearGradient\",\n  inheritAttrs: false,\n  props: _objectSpread(_objectSpread({}, baseProps), {}, {\n    enableMultipleGradient: {\n      type: Boolean,\n      \"default\": true\n    }\n  }),\n  setup: function setup(props) {\n    var baseClassName = useBaseClassName();\n    var _useCommonClassName = useCommonClassName(),\n      STATUS = _useCommonClassName.STATUS;\n    var statusClassNames = STATUS.value;\n    var refSlider = ref(null);\n    var sliderRect = reactive({\n      left: 0,\n      width: GRADIENT_SLIDER_DEFAULT_WIDTH\n    });\n    var isDragging = ref(false);\n    var isMoved = ref(false);\n    var degree = ref(props.color.gradientDegree);\n    var selectedId = ref(props.color.gradientSelectedId);\n    var colors = ref(cloneDeep_1(props.color.gradientColors));\n    watch(function () {\n      return props.color.gradientDegree;\n    }, function (value) {\n      return degree.value = value;\n    });\n    watch(function () {\n      return props.color.gradientSelectedId;\n    }, function (value) {\n      return selectedId.value = value;\n    });\n    watch(function () {\n      return props.color.gradientColors;\n    }, function (value) {\n      colors.value = cloneDeep_1(value);\n    }, {\n      deep: true\n    });\n    var handleChange = function handleChange(key, payload, addUsedColor) {\n      if (props.disabled) {\n        return;\n      }\n      props.onChange({\n        key: key,\n        payload: payload,\n        addUsedColor: addUsedColor\n      });\n    };\n    var handleDegreeChange = function handleDegreeChange(value) {\n      if (props.disabled || value === props.color.gradientDegree) {\n        return;\n      }\n      degree.value = value;\n      handleChange(\"degree\", value, true);\n    };\n    var handleSelectedIdChange = function handleSelectedIdChange(value) {\n      if (props.disabled) {\n        return;\n      }\n      selectedId.value = value;\n      handleChange(\"selectedId\", value);\n    };\n    var handleColorsChange = function handleColorsChange(value, isEnded) {\n      if (props.disabled) {\n        return;\n      }\n      colors.value = value;\n      handleChange(\"colors\", value, isEnded);\n    };\n    var updateActiveThumbLeft = function updateActiveThumbLeft(left) {\n      var index = colors.value.findIndex(function (c) {\n        return c.id === selectedId.value;\n      });\n      if (index === -1) {\n        return;\n      }\n      var point = colors.value[index];\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      var percentLeft = left / sliderRect.width * 100;\n      colors.value.splice(index, 1, {\n        color: point.color,\n        left: percentLeft,\n        id: point.id\n      });\n      handleColorsChange(colors.value);\n    };\n    var handleStart = function handleStart(id) {\n      var rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n      if (isDragging.value || props.disabled) {\n        return;\n      }\n      isMoved.value = false;\n      isDragging.value = true;\n      handleSelectedIdChange(id);\n      refSlider.value.focus();\n      window.addEventListener(\"mousemove\", handleMove, false);\n      window.addEventListener(\"mouseup\", handleEnd, false);\n      window.addEventListener(\"contextmenu\", handleEnd, false);\n    };\n    var handleMove = function handleMove(e) {\n      if (!isDragging.value || props.disabled) {\n        return;\n      }\n      var left = e.clientX - sliderRect.left;\n      isMoved.value = true;\n      updateActiveThumbLeft(left);\n    };\n    var handleEnd = function handleEnd() {\n      if (!isDragging.value) {\n        return;\n      }\n      setTimeout(function () {\n        isDragging.value = false;\n      }, 0);\n      if (isMoved.value) {\n        handleColorsChange(colors.value, true);\n        isMoved.value = false;\n      }\n      window.removeEventListener(\"mousemove\", handleMove, false);\n      window.removeEventListener(\"mouseup\", handleEnd, false);\n      window.removeEventListener(\"contextmenu\", handleEnd, false);\n    };\n    var handleKeyup = function handleKeyup(e) {\n      if (props.disabled) {\n        return;\n      }\n      var points = colors.value;\n      var pos = points.findIndex(function (c) {\n        return c.id === selectedId.value;\n      });\n      var length = points.length;\n      if (DELETE_KEYS.includes(e.key.toLocaleLowerCase()) && length > 2 && pos >= 0 && pos <= length - 1) {\n        points.splice(pos, 1);\n        if (!points[pos]) {\n          pos = points[pos + 1] ? pos + 1 : points[pos - 1] ? pos - 1 : 0;\n        }\n        var current = points[pos];\n        handleColorsChange(points, true);\n        handleSelectedIdChange(current === null || current === void 0 ? void 0 : current.id);\n      }\n    };\n    var handleThumbBarClick = function handleThumbBarClick(e) {\n      if (props.disabled || !props.enableMultipleGradient) {\n        return;\n      }\n      var left = e.clientX - sliderRect.left;\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      var percentLeft = left / sliderRect.width * 100;\n      var newPoint = genGradientPoint(percentLeft, props.color.rgba);\n      colors.value.push(newPoint);\n      handleColorsChange(colors.value, true);\n      handleSelectedIdChange(newPoint.id);\n    };\n    onMounted(function () {\n      var rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n    });\n    onBeforeUnmount(function () {\n      window.removeEventListener(\"mousemove\", handleMove, false);\n      window.removeEventListener(\"mouseup\", handleEnd, false);\n      window.removeEventListener(\"contextmenu\", handleEnd, false);\n    });\n    return {\n      baseClassName: baseClassName,\n      statusClassNames: statusClassNames,\n      refSlider: refSlider,\n      degree: degree,\n      selectedId: selectedId,\n      colors: colors,\n      handleDegreeChange: handleDegreeChange,\n      handleStart: handleStart,\n      handleMove: handleMove,\n      handleEnd: handleEnd,\n      handleKeyup: handleKeyup,\n      handleThumbBarClick: handleThumbBarClick\n    };\n  },\n  render: function render() {\n    var _this = this;\n    var _this$color = this.color,\n      linearGradient = _this$color.linearGradient,\n      gradientColors = _this$color.gradientColors;\n    var colors = this.colors,\n      selectedId = this.selectedId,\n      degree = this.degree,\n      disabled = this.disabled,\n      baseClassName = this.baseClassName,\n      statusClassNames = this.statusClassNames;\n    var thumbBackground = gradientColors2string({\n      points: gradientColors,\n      degree: 90\n    });\n    return createVNode(\"div\", {\n      \"class\": \"\".concat(baseClassName, \"__gradient\")\n    }, [createVNode(\"div\", {\n      \"class\": \"\".concat(baseClassName, \"__gradient-slider\")\n    }, [createVNode(\"div\", {\n      \"class\": [\"\".concat(baseClassName, \"__slider\"), \"\".concat(baseClassName, \"--bg-alpha\")],\n      \"onKeyup\": this.handleKeyup,\n      \"tabindex\": 0,\n      \"ref\": \"refSlider\"\n    }, [createVNode(\"ul\", {\n      \"class\": \"gradient-thumbs\",\n      \"onClick\": this.handleThumbBarClick,\n      \"style\": {\n        background: thumbBackground\n      }\n    }, [colors.map(function (t) {\n      var left = \"\".concat(Math.round(t.left * 100) / 100, \"%\");\n      return createVNode(\"li\", {\n        \"class\": [\"\".concat(baseClassName, \"__thumb\"), \"gradient-thumbs__item\", selectedId === t.id ? statusClassNames.active : \"\"],\n        \"key\": t.id,\n        \"title\": \"\".concat(t.color, \" \").concat(left),\n        \"style\": {\n          color: t.color,\n          left: left\n        },\n        \"onClick\": function onClick(e) {\n          return e.stopPropagation();\n        },\n        \"onMousedown\": function onMousedown() {\n          return _this.handleStart(t.id);\n        }\n      }, [createVNode(\"span\", {\n        \"class\": [\"gradient-thumbs__item-inner\", \"\".concat(baseClassName, \"--bg-alpha\")]\n      }, null)]);\n    })])])]), createVNode(\"div\", {\n      \"class\": \"\".concat(baseClassName, \"__gradient-degree\"),\n      \"title\": \"\".concat(degree, \"deg\")\n    }, [createVNode(InputNumber, {\n      \"size\": \"small\",\n      \"theme\": \"normal\",\n      \"min\": 0,\n      \"max\": 360,\n      \"step\": 1,\n      \"format\": function format(value) {\n        return \"\".concat(value, \"\\xB0\");\n      },\n      \"modelValue\": _this.degree,\n      \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n        return _this.degree = $event;\n      },\n      \"onBlur\": this.handleDegreeChange,\n      \"onEnter\": this.handleDegreeChange,\n      \"disabled\": disabled\n    }, null)]), createVNode(\"div\", {\n      \"class\": [\"\".concat(baseClassName, \"__gradient-preview\"), \"\".concat(baseClassName, \"--bg-alpha\")]\n    }, [createVNode(\"span\", {\n      \"class\": \"preview-inner\",\n      \"style\": {\n        background: linearGradient\n      }\n    }, null)])]);\n  }\n});\nexport { LinearGradient as default };","map":{"version":3,"names":["DELETE_KEYS","LinearGradient","defineComponent","name","inheritAttrs","props","_objectSpread","baseProps","enableMultipleGradient","type","Boolean","setup","baseClassName","useBaseClassName","_useCommonClassName","useCommonClassName","STATUS","statusClassNames","value","refSlider","ref","sliderRect","reactive","left","width","GRADIENT_SLIDER_DEFAULT_WIDTH","isDragging","isMoved","degree","color","gradientDegree","selectedId","gradientSelectedId","colors","cloneDeep_1","gradientColors","watch","deep","handleChange","key","payload","addUsedColor","disabled","onChange","handleDegreeChange","handleSelectedIdChange","handleColorsChange","isEnded","updateActiveThumbLeft","index","findIndex","c","id","point","Math","max","min","percentLeft","splice","handleStart","rect","getBoundingClientRect","focus","window","addEventListener","handleMove","handleEnd","e","clientX","setTimeout","removeEventListener","handleKeyup","points","pos","length","includes","toLocaleLowerCase","current","handleThumbBarClick","newPoint","genGradientPoint","rgba","push","onMounted","onBeforeUnmount","render","_this","_this$color","linearGradient","thumbBackground","gradientColors2string","createVNode","concat","background","map","t","round","active","onClick","stopPropagation","onMousedown","InputNumber","format","onUpdateModelValue","$event"],"sources":["../../../src/color-picker/panel/linear-gradient.tsx"],"sourcesContent":["import { defineComponent, onBeforeUnmount, onMounted, reactive, ref, watch } from 'vue';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { GRADIENT_SLIDER_DEFAULT_WIDTH } from '../const';\nimport { genGradientPoint, gradientColors2string, GradientColorPoint } from '../utils';\nimport { InputNumber as TInputNumber } from '../../input-number';\nimport { useBaseClassName } from '../hooks';\nimport { useCommonClassName } from '../../hooks/useConfig';\nimport baseProps from './base-props';\n\nconst DELETE_KEYS: string[] = ['delete', 'backspace'];\n\nexport default defineComponent({\n  name: 'LinearGradient',\n\n  inheritAttrs: false,\n  props: {\n    ...baseProps,\n    enableMultipleGradient: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const refSlider = ref<HTMLElement>(null);\n    const sliderRect = reactive({\n      left: 0,\n      width: GRADIENT_SLIDER_DEFAULT_WIDTH,\n    });\n    const isDragging = ref<Boolean>(false);\n    const isMoved = ref<Boolean>(false);\n    const degree = ref(props.color.gradientDegree);\n    const selectedId = ref(props.color.gradientSelectedId);\n    const colors = ref<GradientColorPoint[]>(cloneDeep(props.color.gradientColors));\n\n    watch(\n      () => props.color.gradientDegree,\n      (value) => (degree.value = value),\n    );\n    watch(\n      () => props.color.gradientSelectedId,\n      (value) => (selectedId.value = value),\n    );\n    watch(\n      () => props.color.gradientColors,\n      (value) => {\n        colors.value = cloneDeep(value);\n      },\n      {\n        deep: true,\n      },\n    );\n\n    const handleChange = (key: 'degree' | 'selectedId' | 'colors', payload: any, addUsedColor?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      props.onChange({\n        key,\n        payload,\n        addUsedColor,\n      });\n    };\n\n    const handleDegreeChange = (value: number) => {\n      if (props.disabled || value === props.color.gradientDegree) {\n        return;\n      }\n      degree.value = value;\n      handleChange('degree', value, true);\n    };\n\n    const handleSelectedIdChange = (value: string) => {\n      if (props.disabled) {\n        return;\n      }\n      selectedId.value = value;\n      handleChange('selectedId', value);\n    };\n\n    const handleColorsChange = (value: GradientColorPoint[], isEnded?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      colors.value = value;\n      handleChange('colors', value, isEnded);\n    };\n\n    /**\n     * 设置bar的位置\n     * @param left\n     * @returns\n     */\n    const updateActiveThumbLeft = (left: number) => {\n      const index = colors.value.findIndex((c) => c.id === selectedId.value);\n      if (index === -1) {\n        return;\n      }\n      const point = colors.value[index];\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      const percentLeft = (left / sliderRect.width) * 100;\n      colors.value.splice(index, 1, {\n        color: point.color,\n        left: percentLeft,\n        id: point.id,\n      });\n      handleColorsChange(colors.value);\n    };\n\n    // 移动开始\n    const handleStart = (id: string) => {\n      const rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n      if (isDragging.value || props.disabled) {\n        return;\n      }\n      isMoved.value = false;\n      isDragging.value = true;\n      handleSelectedIdChange(id);\n      // 让slider获取焦点，以便键盘事件生效。\n      refSlider.value.focus();\n      window.addEventListener('mousemove', handleMove, false);\n      window.addEventListener('mouseup', handleEnd, false);\n      window.addEventListener('contextmenu', handleEnd, false);\n    };\n\n    // 移动中\n    const handleMove = (e: MouseEvent) => {\n      if (!isDragging.value || props.disabled) {\n        return;\n      }\n      const left = e.clientX - sliderRect.left;\n      isMoved.value = true;\n      updateActiveThumbLeft(left);\n    };\n\n    // 移动结束\n    const handleEnd = () => {\n      if (!isDragging.value) {\n        return;\n      }\n      setTimeout(() => {\n        isDragging.value = false;\n      }, 0);\n      if (isMoved.value) {\n        handleColorsChange(colors.value, true);\n        isMoved.value = false;\n      }\n      window.removeEventListener('mousemove', handleMove, false);\n      window.removeEventListener('mouseup', handleEnd, false);\n      window.removeEventListener('contextmenu', handleEnd, false);\n    };\n\n    const handleKeyup = (e: KeyboardEvent) => {\n      if (props.disabled) {\n        return;\n      }\n      const points = colors.value;\n      let pos = points.findIndex((c) => c.id === selectedId.value);\n      const { length } = points;\n      // 必须保证有两个点\n      if (DELETE_KEYS.includes(e.key.toLocaleLowerCase()) && length > 2 && pos >= 0 && pos <= length - 1) {\n        points.splice(pos, 1);\n        if (!points[pos]) {\n          // eslint-disable-next-line no-nested-ternary\n          pos = points[pos + 1] ? pos + 1 : points[pos - 1] ? pos - 1 : 0;\n        }\n        const current = points[pos];\n        handleColorsChange(points, true);\n        handleSelectedIdChange(current?.id);\n      }\n    };\n\n    const handleThumbBarClick = (e: MouseEvent) => {\n      if (props.disabled || !props.enableMultipleGradient) {\n        return;\n      }\n      let left = e.clientX - sliderRect.left;\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      const percentLeft = (left / sliderRect.width) * 100;\n      const newPoint = genGradientPoint(percentLeft, props.color.rgba);\n      colors.value.push(newPoint);\n      handleColorsChange(colors.value, true);\n      handleSelectedIdChange(newPoint.id);\n    };\n\n    onMounted(() => {\n      const rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('mousemove', handleMove, false);\n      window.removeEventListener('mouseup', handleEnd, false);\n      window.removeEventListener('contextmenu', handleEnd, false);\n    });\n\n    return {\n      baseClassName,\n      statusClassNames,\n      refSlider,\n      degree,\n      selectedId,\n      colors,\n      handleDegreeChange,\n      handleStart,\n      handleMove,\n      handleEnd,\n      handleKeyup,\n      handleThumbBarClick,\n    };\n  },\n  render() {\n    const { linearGradient, gradientColors } = this.color;\n    const { colors, selectedId, degree, disabled, baseClassName, statusClassNames } = this;\n    const thumbBackground = gradientColors2string({\n      points: gradientColors,\n      degree: 90,\n    });\n    return (\n      <div class={`${baseClassName}__gradient`}>\n        <div class={`${baseClassName}__gradient-slider`}>\n          <div\n            class={[`${baseClassName}__slider`, `${baseClassName}--bg-alpha`]}\n            onKeyup={this.handleKeyup}\n            tabindex={0}\n            ref=\"refSlider\"\n          >\n            <ul\n              class=\"gradient-thumbs\"\n              onClick={this.handleThumbBarClick}\n              style={{\n                background: thumbBackground,\n              }}\n            >\n              {colors.map((t) => {\n                const left = `${Math.round(t.left * 100) / 100}%`;\n                return (\n                  <li\n                    class={[\n                      `${baseClassName}__thumb`,\n                      'gradient-thumbs__item',\n                      selectedId === t.id ? statusClassNames.active : '',\n                    ]}\n                    key={t.id}\n                    title={`${t.color} ${left}`}\n                    style={{\n                      color: t.color,\n                      left,\n                    }}\n                    onClick={(e: MouseEvent) => e.stopPropagation()}\n                    onMousedown={() => this.handleStart(t.id)}\n                  >\n                    <span class={['gradient-thumbs__item-inner', `${baseClassName}--bg-alpha`]}></span>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </div>\n        <div class={`${baseClassName}__gradient-degree`} title={`${degree}deg`}>\n          <TInputNumber\n            size=\"small\"\n            theme=\"normal\"\n            min={0}\n            max={360}\n            step={1}\n            format={(value: number) => `${value}°`}\n            v-model={this.degree}\n            onBlur={this.handleDegreeChange}\n            onEnter={this.handleDegreeChange}\n            disabled={disabled}\n          />\n        </div>\n        <div class={[`${baseClassName}__gradient-preview`, `${baseClassName}--bg-alpha`]}>\n          <span\n            class=\"preview-inner\"\n            style={{\n              background: linearGradient,\n            }}\n          ></span>\n        </div>\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}