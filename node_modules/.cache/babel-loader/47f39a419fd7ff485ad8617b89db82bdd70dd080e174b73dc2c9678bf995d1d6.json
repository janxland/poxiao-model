{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../../_chunks/dep-b15588b0.mjs';\nimport { _ as _defineProperty } from '../../_chunks/dep-7deaa3b9.mjs';\nimport { defineComponent, ref, computed, createVNode } from 'vue';\nimport { DeleteIcon, AddIcon } from 'tdesign-icons-vue-next';\nimport '../utils/index.mjs';\nimport { useBaseClassName } from '../hooks.mjs';\nimport { useCommonClassName } from '../../hooks/useConfig.mjs';\nimport { useGlobalIcon } from '../../hooks/useGlobalIcon.mjs';\nimport baseProps from './base-props.mjs';\nimport { Color } from '../../_common/js/color-picker/color.mjs';\nimport '../../_chunks/dep-8e411f1c.mjs';\nimport '../../_chunks/dep-8dbc9855.mjs';\nimport '../../_common/js/color-picker/index.mjs';\nimport '../../_common/js/color-picker/cmyk.mjs';\nimport '../../_common/js/color-picker/draggable.mjs';\nimport '../../_chunks/dep-12bcaf4a.mjs';\nimport '../../_chunks/dep-40e59b4b.mjs';\nimport '../../_chunks/dep-30b3f256.mjs';\nimport '../../_chunks/dep-cb814df4.mjs';\nimport '../../_chunks/dep-cd533155.mjs';\nimport '../../_chunks/dep-ab439391.mjs';\nimport '../../_chunks/dep-60d62610.mjs';\nimport '../../_chunks/dep-2adf18a2.mjs';\nimport '../../_chunks/dep-413fbf03.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-66473aa9.mjs';\nimport '../../_chunks/dep-715774e0.mjs';\nimport '../../_chunks/dep-5a5a1764.mjs';\nimport '../../_chunks/dep-37e3e644.mjs';\nimport '../../_chunks/dep-31dc0415.mjs';\nimport '../../_chunks/dep-e5142249.mjs';\nimport '../../_chunks/dep-c4f80cb4.mjs';\nimport '../../_chunks/dep-996b4900.mjs';\nimport '../../_chunks/dep-3108c312.mjs';\nimport '../../_chunks/dep-93498383.mjs';\nimport '../../_chunks/dep-36582a92.mjs';\nimport '../../_chunks/dep-a2db6df1.mjs';\nimport '../../_chunks/dep-0f89a1dd.mjs';\nimport '../../_chunks/dep-d4da440a.mjs';\nimport '../../_chunks/dep-013382c3.mjs';\nimport '../../_chunks/dep-ca764006.mjs';\nimport '../../_chunks/dep-2ee9d497.mjs';\nimport '../../_chunks/dep-c545db54.mjs';\nimport '../../_chunks/dep-3f15cb30.mjs';\nimport '../../_chunks/dep-fd2b6c64.mjs';\nimport '../../_chunks/dep-b3734774.mjs';\nimport '../../_chunks/dep-a4a3ac25.mjs';\nimport '../../_chunks/dep-6861d388.mjs';\nimport '../../_chunks/dep-396d852b.mjs';\nimport '../../_chunks/dep-8a3fd140.mjs';\nimport '../../_chunks/dep-5db0da5c.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-bf19d9ba.mjs';\nimport '../../_chunks/dep-6963a882.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../_chunks/dep-b089fa1f.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar SwatchesPanel = defineComponent({\n  name: \"SwatchesPanel\",\n  props: _objectSpread(_objectSpread({}, baseProps), {}, {\n    colors: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    title: {\n      type: String,\n      \"default\": \"\\u7CFB\\u7EDF\\u8272\\u5F69\"\n    },\n    editable: {\n      type: Boolean,\n      \"default\": false\n    },\n    onSetColor: {\n      type: Function,\n      \"default\": function _default() {\n        return function () {};\n      }\n    },\n    handleAddColor: {\n      type: Function,\n      \"default\": function _default() {\n        return function () {};\n      }\n    }\n  }),\n  setup: function setup(props) {\n    var baseClassName = useBaseClassName();\n    var _useGlobalIcon = useGlobalIcon({\n        DeleteIcon: DeleteIcon,\n        AddIcon: AddIcon\n      }),\n      DeleteIcon$1 = _useGlobalIcon.DeleteIcon,\n      AddIcon$1 = _useGlobalIcon.AddIcon;\n    var _useCommonClassName = useCommonClassName(),\n      STATUS = _useCommonClassName.STATUS;\n    var statusClassNames = STATUS.value;\n    var visiblePopConfirm = ref(false);\n    var setVisiblePopConfirm = function setVisiblePopConfirm(visible) {\n      visiblePopConfirm.value = visible;\n    };\n    var handleClick = function handleClick(color) {\n      return props.onSetColor(color);\n    };\n    var isEqualCurrentColor = function isEqualCurrentColor(color) {\n      return Color.compare(color, props.color.css);\n    };\n    var selectedColorIndex = computed(function () {\n      return props.colors.findIndex(function (color) {\n        return isEqualCurrentColor(color);\n      });\n    });\n    var handleRemoveColor = function handleRemoveColor() {\n      var colors = _toConsumableArray(props.colors);\n      var selectedIndex = selectedColorIndex.value;\n      if (selectedIndex > -1) {\n        colors.splice(selectedIndex, 1);\n      } else {\n        colors.length = 0;\n      }\n      props.onChange(colors);\n      setVisiblePopConfirm(false);\n    };\n    return {\n      baseClassName: baseClassName,\n      DeleteIcon: DeleteIcon$1,\n      AddIcon: AddIcon$1,\n      statusClassNames: statusClassNames,\n      selectedColorIndex: selectedColorIndex,\n      visiblePopConfirm: visiblePopConfirm,\n      setVisiblePopConfirm: setVisiblePopConfirm,\n      handleClick: handleClick,\n      isEqualCurrentColor: isEqualCurrentColor,\n      handleRemoveColor: handleRemoveColor\n    };\n  },\n  render: function render() {\n    var _this = this;\n    var baseClassName = this.baseClassName,\n      DeleteIcon = this.DeleteIcon,\n      AddIcon = this.AddIcon,\n      statusClassNames = this.statusClassNames,\n      title = this.title,\n      editable = this.editable;\n    var swatchesClass = \"\".concat(baseClassName, \"__swatches\");\n    var renderActions = function renderActions() {\n      if (!editable) {\n        return null;\n      }\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(swatchesClass, \"--actions\")\n      }, [createVNode(\"span\", {\n        \"role\": \"button\",\n        \"class\": \"\".concat(baseClassName, \"__icon\"),\n        \"onClick\": function onClick() {\n          return _this.handleAddColor();\n        }\n      }, [createVNode(AddIcon, null, null)]), _this.colors.length > 0 ? createVNode(\"span\", {\n        \"role\": \"button\",\n        \"class\": \"\".concat(baseClassName, \"__icon\"),\n        \"onClick\": function onClick() {\n          return _this.handleRemoveColor();\n        }\n      }, [createVNode(DeleteIcon, null, null)]) : null]);\n    };\n    return createVNode(\"div\", {\n      \"class\": swatchesClass\n    }, [createVNode(\"h3\", {\n      \"class\": \"\".concat(swatchesClass, \"--title\")\n    }, [createVNode(\"span\", null, [title]), renderActions()]), createVNode(\"ul\", {\n      \"class\": [\"\".concat(swatchesClass, \"--items\"), \"narrow-scrollbar\"]\n    }, [this.colors.map(function (color) {\n      return createVNode(\"li\", {\n        \"class\": [\"\".concat(swatchesClass, \"--item\"), _this.isEqualCurrentColor(color) && editable ? statusClassNames.active : \"\"],\n        \"title\": color,\n        \"key\": color,\n        \"onClick\": function onClick() {\n          if (_this.disabled) {\n            return;\n          }\n          _this.handleClick(color);\n        }\n      }, [createVNode(\"div\", {\n        \"class\": [\"\".concat(swatchesClass, \"--color\"), \"\".concat(baseClassName, \"--bg-alpha\")]\n      }, [createVNode(\"span\", {\n        \"class\": \"\".concat(swatchesClass, \"--inner\"),\n        \"style\": {\n          background: color\n        }\n      }, null)])]);\n    })])]);\n  }\n});\nexport { SwatchesPanel as default };","map":{"version":3,"names":["SwatchesPanel","defineComponent","name","props","_objectSpread","baseProps","colors","type","Array","_default","title","String","editable","Boolean","onSetColor","Function","handleAddColor","setup","baseClassName","useBaseClassName","_useGlobalIcon","useGlobalIcon","DeleteIcon","AddIcon","DeleteIcon$1","AddIcon$1","_useCommonClassName","useCommonClassName","STATUS","statusClassNames","value","visiblePopConfirm","ref","setVisiblePopConfirm","visible","handleClick","color","isEqualCurrentColor","Color","compare","css","selectedColorIndex","computed","findIndex","handleRemoveColor","_toConsumableArray","selectedIndex","splice","length","onChange","render","_this","swatchesClass","concat","renderActions","createVNode","onClick","map","active","disabled","background"],"sources":["../../../src/color-picker/panel/swatches.tsx"],"sourcesContent":["import { computed, defineComponent, PropType, ref } from 'vue';\nimport { DeleteIcon as TdDeleteIcon, AddIcon as TdAddIcon } from 'tdesign-icons-vue-next';\n\nimport { Color } from '../utils';\nimport { useBaseClassName } from '../hooks';\nimport { useCommonClassName } from '../../hooks/useConfig';\nimport { useGlobalIcon } from '../../hooks/useGlobalIcon';\nimport baseProps from './base-props';\n\nexport default defineComponent({\n  name: 'SwatchesPanel',\n  props: {\n    ...baseProps,\n    colors: {\n      type: Array as PropType<string[]>,\n      default: () => [] as PropType<string[]>,\n    },\n    title: {\n      type: String,\n      default: '系统色彩',\n    },\n    editable: {\n      type: Boolean,\n      default: false,\n    },\n    onSetColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n    handleAddColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { DeleteIcon, AddIcon } = useGlobalIcon({ DeleteIcon: TdDeleteIcon, AddIcon: TdAddIcon });\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const visiblePopConfirm = ref<boolean>(false);\n    const setVisiblePopConfirm = (visible: boolean) => {\n      visiblePopConfirm.value = visible;\n    };\n\n    const handleClick = (color: string) => props.onSetColor(color);\n\n    const isEqualCurrentColor = (color: string) => {\n      return Color.compare(color, props.color.css);\n    };\n\n    const selectedColorIndex = computed(() => {\n      return props.colors.findIndex((color) => isEqualCurrentColor(color));\n    });\n\n    /**\n     * 移除颜色\n     */\n    const handleRemoveColor = () => {\n      const colors = [...props.colors];\n      const selectedIndex = selectedColorIndex.value;\n      if (selectedIndex > -1) {\n        colors.splice(selectedIndex, 1);\n      } else {\n        colors.length = 0;\n      }\n      props.onChange(colors);\n      setVisiblePopConfirm(false);\n    };\n\n    return {\n      baseClassName,\n      DeleteIcon,\n      AddIcon,\n      statusClassNames,\n      selectedColorIndex,\n      visiblePopConfirm,\n      setVisiblePopConfirm,\n      handleClick,\n      isEqualCurrentColor,\n      handleRemoveColor,\n    };\n  },\n  render() {\n    const { baseClassName, DeleteIcon, AddIcon, statusClassNames, title, editable } = this;\n    const swatchesClass = `${baseClassName}__swatches`;\n\n    const renderActions = () => {\n      if (!editable) {\n        return null;\n      }\n\n      return (\n        <div class={`${swatchesClass}--actions`}>\n          <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleAddColor()}>\n            <AddIcon />\n          </span>\n          {this.colors.length > 0 ? (\n            <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleRemoveColor()}>\n              <DeleteIcon />\n            </span>\n          ) : null}\n        </div>\n      );\n    };\n\n    return (\n      <div class={swatchesClass}>\n        <h3 class={`${swatchesClass}--title`}>\n          <span>{title}</span>\n          {renderActions()}\n        </h3>\n        <ul class={[`${swatchesClass}--items`, 'narrow-scrollbar']}>\n          {this.colors.map((color) => {\n            return (\n              <li\n                class={[\n                  `${swatchesClass}--item`,\n                  this.isEqualCurrentColor(color) && editable ? statusClassNames.active : '',\n                ]}\n                title={color}\n                key={color}\n                onClick={() => {\n                  if (this.disabled) {\n                    return;\n                  }\n                  this.handleClick(color);\n                }}\n              >\n                <div class={[`${swatchesClass}--color`, `${baseClassName}--bg-alpha`]}>\n                  <span\n                    class={`${swatchesClass}--inner`}\n                    style={{\n                      background: color,\n                    }}\n                  ></span>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  },\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,IAAAA,aAAA,GAAeC,eAAgB;EAC7BC,IAAM;EACNC,KAAO,EAAAC,aAAA,CAAAA,aAAA,KACFC,SAAA;IACHC,MAAQ;MACNC,IAAM,EAAAC,KAAA;MACN,WAAS,SAAAC,SAAA;QAAA,OAAM,EAAC;MAAA;KAClB;IACAC,KAAO;MACLH,IAAM,EAAAI,MAAA;MACN,SAAS;KACX;IACAC,QAAU;MACRL,IAAM,EAAAM,OAAA;MACN,SAAS;KACX;IACAC,UAAY;MACVP,IAAM,EAAAQ,QAAA;MACN,SAAS,WAAAN,SAAA,EAAM;QACb,OAAO,YAAM,EAAC;MAChB;KACF;IACAO,cAAgB;MACdT,IAAM,EAAAQ,QAAA;MACN,SAAS,WAAAN,SAAA,EAAM;QACb,OAAO,YAAM,EAAC;MAChB;IACF;GACF;EACAQ,KAAA,WAAAA,KAAMA,CAAAd,KAAO;IACX,IAAMe,aAAA,GAAgBC,gBAAiB;IACjC,IAAAC,cAAA,GAA0BC,aAAA,CAAc;QAAEC,UAAY,EAAAA,UAAA;QAAcC,OAAS,EAAAA;MAAU,CAAC;MAAtFC,YAAY,GAAAJ,cAAA,CAAZE,UAAY;MAAAG,SAAA,GAAAL,cAAA,CAAAG,OAAA;IACd,IAAAG,mBAAA,GAAaC,kBAAmB;MAA9BC,MAAO,GAAAF,mBAAA,CAAPE,MAAO;IACf,IAAMC,gBAAA,GAAmBD,MAAO,CAAAE,KAAA;IAC1B,IAAAC,iBAAA,GAAoBC,GAAA,CAAa,KAAK;IACtC,IAAAC,oBAAA,GAAuB,SAAvBA,qBAAwBC,OAAqB;MACjDH,iBAAA,CAAkBD,KAAQ,GAAAI,OAAA;KAC5B;IAEA,IAAMC,WAAc,YAAdA,WAAcA,CAACC,KAAkB;MAAA,OAAAjC,KAAA,CAAMW,UAAA,CAAWsB,KAAK;IAAA;IAEvD,IAAAC,mBAAA,GAAsB,SAAtBA,oBAAuBD,KAAkB;MAC7C,OAAOE,KAAM,CAAAC,OAAA,CAAQH,KAAO,EAAAjC,KAAA,CAAMiC,KAAA,CAAMI,GAAG;KAC7C;IAEM,IAAAC,kBAAA,GAAqBC,QAAA,CAAS,YAAM;MACxC,OAAOvC,KAAA,CAAMG,MAAO,CAAAqC,SAAA,CAAU,UAACP,KAAU;QAAA,OAAAC,mBAAA,CAAoBD,KAAK,CAAC;OAAA;IACrE,CAAC;IAKD,IAAMQ,iBAAA,GAAoB,SAApBA,kBAAA,EAA0B;MAC9B,IAAMtC,MAAS,GAAAuC,kBAAA,CAAI1C,KAAA,CAAMG,MAAM;MAC/B,IAAMwC,aAAA,GAAgBL,kBAAmB,CAAAX,KAAA;MACzC,IAAIgB,aAAA,GAAgB,CAAI;QACfxC,MAAA,CAAAyC,MAAA,CAAOD,aAAA,EAAe,CAAC;MAChC,CAAO;QACLxC,MAAA,CAAO0C,MAAS;MAClB;MACA7C,KAAA,CAAM8C,QAAA,CAAS3C,MAAM;MACrB2B,oBAAA,CAAqB,KAAK;KAC5B;IAEO;MACLf,aAAA,EAAAA,aAAA;MACAI,UAAA,EAAAE,YAAA;MACAD,OAAA,EAAAE,SAAA;MACAI,gBAAA,EAAAA,gBAAA;MACAY,kBAAA,EAAAA,kBAAA;MACAV,iBAAA,EAAAA,iBAAA;MACAE,oBAAA,EAAAA,oBAAA;MACAE,WAAA,EAAAA,WAAA;MACAE,mBAAA,EAAAA,mBAAA;MACAO,iBAAA,EAAAA;KACF;GACF;EACAM,MAAS,WAAAA,OAAA;IAAA,IAAAC,KAAA;IACP,IAAQjC,aAAe,GAA2D,KAA1EA,aAAe;MAAAI,UAAA,GAA2D,KAA3DA,UAAA;MAAYC,OAAA,GAA+C,KAA/CA,OAAA;MAASM,gBAAkB,GAAoB,KAAtCA,gBAAkB;MAAAnB,KAAA,GAAoB,KAApBA,KAAA;MAAOE,QAAA,GAAa,KAAbA,QAAA;IACrE,IAAMwC,aAAA,MAAAC,MAAA,CAAmBnC,aAAA;IAEzB,IAAMoC,aAAA,GAAgB,SAAhBA,cAAA,EAAsB;MAC1B,IAAI,CAAC1C,QAAU;QACN;MACT;MAGE,OAAA2C,WAAA;QAAA,YAAAF,MAAA,CAAeD,aAAA;MAAA,IAAAG,WAAA;QAAA,QACF;QAAA,YAAAF,MAAA,CAAmBnC,aAAA;QAAA,WAAgC,SAAAsC,QAAA;UAAA,OAAML,KAAA,CAAKnC,cAAe;QAAA;MAAA,IAAAuC,WAAA,CAAAhC,OAAA,iBAGvF4B,KAAA,CAAK7C,MAAA,CAAO0C,MAAS,OAAAO,WAAA;QAAA,QACT;2BAAmBrC,aAAA;mBAAgC,SAAAsC,QAAA;UAAA,OAAML,KAAA,CAAKP,iBAAkB;QAAA;MAAA,IAAAW,WAAA,CAAAjC,UAAA,kBAGzF;KAGV;IAGE,OAAAiC,WAAA;MAAA,OAAY,EAAAH;IAAA,IAAAG,WAAA;MAAA,YAAAF,MAAA,CACID,aAAA;KAAA,GAAAG,WAAA,gBACL7C,KAAA,IACN4C,aAAc,MAAAC,WAAA;MAAA,SAEN,IAAAF,MAAA,CAAID,aAAA,cAAwB,kBAAkB;KACtD,OAAK,CAAA9C,MAAA,CAAOmD,GAAI,WAACrB,KAAU;MAExB,OAAAmB,WAAA;QAAA,SACS,IAAAF,MAAA,CACFD,aAAA,EACH,WAAAD,KAAA,CAAKd,mBAAoB,CAAAD,KAAK,CAAK,IAAAxB,QAAA,GAAWiB,gBAAA,CAAiB6B,MAAS;iBAEnEtB,KAAA;QAAA,OACFA,KAAA;QAAA,SACI,WAAAoB,QAAA,EAAM;UACb,IAAIL,KAAA,CAAKQ,QAAU;YACjB;UACF;UACAR,KAAA,CAAKhB,WAAA,CAAYC,KAAK;QACxB;MAEA,IAAAmB,WAAA;QAAA,SAAY,IAAAF,MAAA,CAAID,aAAA,iBAAAC,MAAA,CAA2BnC,aAAA;;2BAE7BkC,aAAA;eACH;UACLQ,UAAY,EAAAxB;QACd;MACD;IAIT,CAAC;EAIT;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}