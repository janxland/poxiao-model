{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-7deaa3b9.mjs';\nimport { defineComponent, inject, h, watch, onMounted, onUnmounted, createVNode } from 'vue';\nimport { ANCHOR_SHARP_REGEXP } from './utils.mjs';\nimport props from './anchor-item-props.mjs';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig.mjs';\nimport { AnchorInjectionKey } from './constants.mjs';\nimport { i as isFunction_1 } from '../_chunks/dep-66473aa9.mjs';\nimport { i as isString_1 } from '../_chunks/dep-30b3f256.mjs';\nimport '../_chunks/dep-8dbc9855.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-37e3e644.mjs';\nimport '../_chunks/dep-cb814df4.mjs';\nimport '../_chunks/dep-31dc0415.mjs';\nimport '../_chunks/dep-e5142249.mjs';\nimport '../_chunks/dep-c4f80cb4.mjs';\nimport '../_chunks/dep-996b4900.mjs';\nimport '../_chunks/dep-3108c312.mjs';\nimport '../_chunks/dep-cd533155.mjs';\nimport '../_chunks/dep-715774e0.mjs';\nimport '../_chunks/dep-5a5a1764.mjs';\nimport '../_chunks/dep-93498383.mjs';\nimport '../_chunks/dep-36582a92.mjs';\nimport '../_chunks/dep-a2db6df1.mjs';\nimport '../_chunks/dep-0f89a1dd.mjs';\nimport '../_chunks/dep-2adf18a2.mjs';\nimport '../_chunks/dep-ab439391.mjs';\nimport '../_chunks/dep-60d62610.mjs';\nimport '../_chunks/dep-d4da440a.mjs';\nimport '../_chunks/dep-013382c3.mjs';\nimport '../_chunks/dep-ca764006.mjs';\nimport '../_chunks/dep-2ee9d497.mjs';\nimport '../_chunks/dep-c545db54.mjs';\nimport '../_chunks/dep-3f15cb30.mjs';\nimport '../_chunks/dep-fd2b6c64.mjs';\nimport '../_chunks/dep-b3734774.mjs';\nimport '../_chunks/dep-a4a3ac25.mjs';\nimport '../_chunks/dep-6861d388.mjs';\nimport '../_chunks/dep-396d852b.mjs';\nimport '../_chunks/dep-8a3fd140.mjs';\nimport '../_chunks/dep-5db0da5c.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-bf19d9ba.mjs';\nimport '../_chunks/dep-6963a882.mjs';\nimport '../config-provider/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar localProps = _objectSpread(_objectSpread({}, props), {}, {\n  href: {\n    type: String,\n    required: true,\n    validator: function validator(v) {\n      return ANCHOR_SHARP_REGEXP.test(v);\n    }\n  }\n});\nvar _AnchorItem = defineComponent({\n  name: \"TAnchorItem\",\n  inject: {\n    tAnchor: {\n      \"default\": void 0\n    }\n  },\n  props: localProps,\n  setup: function setup(props2, _ref) {\n    var slots = _ref.slots;\n    var anchor = inject(AnchorInjectionKey, void 0);\n    var CLASSNAME_PREFIX = usePrefixClass(\"anchor__item\");\n    var _useCommonClassName = useCommonClassName(),\n      STATUS = _useCommonClassName.STATUS;\n    var register = function register() {\n      anchor.registerLink(props2.href);\n    };\n    var unregister = function unregister() {\n      var href = props2.href;\n      if (!href) return;\n      anchor.unregisterLink(href);\n    };\n    var handleClick = function handleClick(e) {\n      var href = props2.href,\n        title = props2.title;\n      anchor.handleScrollTo(href);\n      anchor.handleLinkClick({\n        href: href,\n        title: isString_1(title) ? title : void 0,\n        e: e\n      });\n    };\n    var renderTitle = function renderTitle() {\n      var title = props2.title;\n      var titleSlot = slots.title;\n      var titleVal;\n      if (isString_1(title)) {\n        titleVal = title;\n      } else if (isFunction_1(title)) {\n        titleVal = title(h);\n      } else if (titleSlot) {\n        titleVal = titleSlot(null);\n      }\n      return titleVal;\n    };\n    watch(function () {\n      return props2.href;\n    }, function () {\n      unregister();\n      register();\n    }, {\n      immediate: true\n    });\n    onMounted(function () {\n      register();\n    });\n    onUnmounted(function () {\n      unregister();\n    });\n    return function () {\n      var href = props2.href,\n        target = props2.target;\n      var children = slots[\"default\"],\n        titleSlot = slots.title;\n      var title = renderTitle();\n      var titleAttr = isString_1(title) ? title : null;\n      var active = anchor.active === href;\n      var wrapperClass = _defineProperty(_defineProperty({}, CLASSNAME_PREFIX.value, true), STATUS.value.active, active);\n      var titleClass = _defineProperty({}, \"\".concat(CLASSNAME_PREFIX.value, \"-link\"), true);\n      return createVNode(\"div\", {\n        \"class\": wrapperClass\n      }, [createVNode(\"a\", {\n        \"href\": href,\n        \"title\": titleAttr,\n        \"class\": titleClass,\n        \"target\": target,\n        \"onClick\": handleClick\n      }, [titleSlot ? titleSlot(null) : title]), children && children(null)]);\n    };\n  }\n});\nexport { _AnchorItem as default };","map":{"version":3,"names":["localProps","_objectSpread","props","href","type","String","required","validator","v","ANCHOR_SHARP_REGEXP","test","_AnchorItem","defineComponent","name","inject","tAnchor","setup","props2","_ref","slots","anchor","AnchorInjectionKey","CLASSNAME_PREFIX","usePrefixClass","_useCommonClassName","useCommonClassName","STATUS","register","registerLink","unregister","unregisterLink","handleClick","e","title","handleScrollTo","handleLinkClick","isString_1","renderTitle","titleSlot","titleVal","isFunction_1","h","watch","immediate","onMounted","onUnmounted","target","children","titleAttr","active","wrapperClass","_defineProperty","value","titleClass","concat","createVNode"],"sources":["../../src/anchor/anchor-item.tsx"],"sourcesContent":["import { defineComponent, h, VNodeChild, onMounted, onUnmounted, inject, watch } from 'vue';\nimport { ANCHOR_SHARP_REGEXP } from './utils';\nimport props from './anchor-item-props';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { AnchorInjectionKey } from './constants';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\n\nconst localProps = {\n  ...props,\n  href: {\n    type: String,\n    required: true,\n    validator(v: string): boolean {\n      return ANCHOR_SHARP_REGEXP.test(v);\n    },\n  },\n};\n\nexport default defineComponent({\n  name: 'TAnchorItem',\n  inject: {\n    tAnchor: { default: undefined },\n  },\n  props: localProps,\n  setup(props, { slots }) {\n    const anchor = inject(AnchorInjectionKey, undefined);\n    const CLASSNAME_PREFIX = usePrefixClass('anchor__item');\n    const { STATUS } = useCommonClassName();\n    const register = () => {\n      anchor.registerLink(props.href as string);\n    };\n    const unregister = () => {\n      const { href } = props;\n      if (!href) return;\n      anchor.unregisterLink(href);\n    };\n    const handleClick = (e: MouseEvent) => {\n      const { href, title } = props;\n      anchor.handleScrollTo(href);\n      anchor.handleLinkClick({ href, title: isString(title) ? title : undefined, e });\n    };\n    const renderTitle = () => {\n      const { title } = props;\n      const { title: titleSlot } = slots;\n      let titleVal: VNodeChild;\n      if (isString(title)) {\n        titleVal = title;\n      } else if (isFunction(title)) {\n        titleVal = title(h);\n      } else if (titleSlot) {\n        titleVal = titleSlot(null);\n      }\n      return titleVal;\n    };\n    watch(\n      () => props.href,\n      () => {\n        unregister();\n        register();\n      },\n      { immediate: true },\n    );\n    onMounted(() => {\n      register();\n    });\n    onUnmounted(() => {\n      unregister();\n    });\n    return () => {\n      const { href, target } = props;\n      const { default: children, title: titleSlot } = slots;\n      const title = renderTitle();\n      const titleAttr = isString(title) ? title : null;\n      const active = anchor.active === href;\n      const wrapperClass = {\n        [CLASSNAME_PREFIX.value]: true,\n        [STATUS.value.active]: active,\n      };\n      const titleClass = {\n        [`${CLASSNAME_PREFIX.value}-link`]: true,\n      };\n      return (\n        <div class={wrapperClass}>\n          <a href={href} title={titleAttr} class={titleClass} target={target} onClick={handleClick}>\n            {titleSlot ? titleSlot(null) : title}\n          </a>\n          {children && children(null)}\n        </div>\n      );\n    };\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}