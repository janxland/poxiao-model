{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../../_chunks/dep-7deaa3b9.mjs';\nimport { i as isFunction_1 } from '../../_chunks/dep-66473aa9.mjs';\nimport { i as isBoolean_1 } from '../../_chunks/dep-03dfef8f.mjs';\nimport { computed, nextTick } from 'vue';\nimport { d as dayjs } from '../../_chunks/dep-bf19d9ba.mjs';\nimport { COMPONENT_NAME } from '../const.mjs';\nimport '../../hooks/useConfig.mjs';\nimport { useConfig } from '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-8dbc9855.mjs';\nimport '../../_chunks/dep-cb814df4.mjs';\nimport '../../_chunks/dep-cd533155.mjs';\nimport '../../_chunks/dep-715774e0.mjs';\nimport '../../_chunks/dep-5a5a1764.mjs';\nimport '../../_chunks/dep-2adf18a2.mjs';\nimport '../../_chunks/dep-37e3e644.mjs';\nimport '../../_chunks/dep-31dc0415.mjs';\nimport '../../_chunks/dep-e5142249.mjs';\nimport '../../_chunks/dep-c4f80cb4.mjs';\nimport '../../_chunks/dep-996b4900.mjs';\nimport '../../_chunks/dep-3108c312.mjs';\nimport '../../_chunks/dep-93498383.mjs';\nimport '../../_chunks/dep-36582a92.mjs';\nimport '../../_chunks/dep-a2db6df1.mjs';\nimport '../../_chunks/dep-0f89a1dd.mjs';\nimport '../../_chunks/dep-ab439391.mjs';\nimport '../../_chunks/dep-60d62610.mjs';\nimport '../../_chunks/dep-d4da440a.mjs';\nimport '../../_chunks/dep-013382c3.mjs';\nimport '../../_chunks/dep-ca764006.mjs';\nimport '../../_chunks/dep-2ee9d497.mjs';\nimport '../../_chunks/dep-c545db54.mjs';\nimport '../../_chunks/dep-3f15cb30.mjs';\nimport '../../_chunks/dep-fd2b6c64.mjs';\nimport '../../_chunks/dep-30b3f256.mjs';\nimport '../../_chunks/dep-b3734774.mjs';\nimport '../../_chunks/dep-a4a3ac25.mjs';\nimport '../../_chunks/dep-6861d388.mjs';\nimport '../../_chunks/dep-396d852b.mjs';\nimport '../../_chunks/dep-8a3fd140.mjs';\nimport '../../_chunks/dep-5db0da5c.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-6963a882.mjs';\nimport '../../config-provider/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar getDefaultControllerConfigData = function getDefaultControllerConfigData() {\n  var visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  return {\n    visible: visible,\n    disabled: false,\n    mode: {\n      visible: true,\n      radioGroupProps: {}\n    },\n    year: {\n      visible: true,\n      selectProps: {}\n    },\n    month: {\n      visible: true,\n      selectProps: {}\n    },\n    weekend: {\n      visible: true,\n      showWeekendButtonProps: {},\n      hideWeekendButtonProps: {}\n    },\n    current: {\n      visible: true,\n      currentDayButtonProps: {},\n      currentMonthButtonProps: {}\n    }\n  };\n};\nfunction userController(props, state) {\n  var _useConfig = useConfig(COMPONENT_NAME),\n    globalConfig = _useConfig.globalConfig;\n  var options = computed(function () {\n    var dayJsFilterDate = dayjs(\"\".concat(state.curSelectedYear, \"-\").concat(state.curSelectedMonth));\n    var re = {\n      isShowWeekend: state.isShowWeekend,\n      filterDate: dayJsFilterDate.toDate(),\n      formattedFilterDate: dayJsFilterDate.format(props.format),\n      mode: state.curSelectedMode\n    };\n    return re;\n  });\n  var configData = computed(function () {\n    var _ref, _props$controllerConf;\n    var controllerConfig = (_ref = (_props$controllerConf = props.controllerConfig) !== null && _props$controllerConf !== void 0 ? _props$controllerConf : globalConfig.value.controllerConfig) !== null && _ref !== void 0 ? _ref : true;\n    if (isBoolean_1(controllerConfig)) {\n      return getDefaultControllerConfigData(controllerConfig);\n    }\n    return _objectSpread(_objectSpread({}, getDefaultControllerConfigData()), controllerConfig);\n  });\n  var visible = computed(function () {\n    return !!configData.value && configData.value.visible;\n  });\n  function checkControllerVisible(name) {\n    var re = true;\n    var conf = configData.value;\n    if (!conf || !conf.visible || conf[name] === false || conf[name] && !conf[name].visible) {\n      re = false;\n    }\n    return re;\n  }\n  function checkControllerDisabled(name, propsName) {\n    var re = false;\n    var conf = configData.value;\n    if (conf && (conf.disabled || conf[name] && conf[name][propsName] && conf[name][propsName].disabled)) {\n      re = true;\n    }\n    return re;\n  }\n  function emitControllerChange() {\n    nextTick(function () {\n      isFunction_1(props.onControllerChange) && props.onControllerChange(_objectSpread({}, options.value));\n    });\n  }\n  return {\n    options: options,\n    configData: configData,\n    visible: visible,\n    checkControllerVisible: checkControllerVisible,\n    checkControllerDisabled: checkControllerDisabled,\n    emitControllerChange: emitControllerChange\n  };\n}\nexport { userController };","map":{"version":3,"names":["getDefaultControllerConfigData","visible","arguments","length","undefined","disabled","mode","radioGroupProps","year","selectProps","month","weekend","showWeekendButtonProps","hideWeekendButtonProps","current","currentDayButtonProps","currentMonthButtonProps","userController","props","state","_useConfig","useConfig","COMPONENT_NAME","globalConfig","options","computed","dayJsFilterDate","dayjs","concat","curSelectedYear","curSelectedMonth","re","isShowWeekend","filterDate","toDate","formattedFilterDate","format","curSelectedMode","configData","_ref","_props$controllerConf","controllerConfig","value","isBoolean_1","_objectSpread","checkControllerVisible","name","conf","checkControllerDisabled","propsName","emitControllerChange","nextTick","isFunction_1","onControllerChange"],"sources":["../../../src/calendar/hook/useController.ts"],"sourcesContent":["import isFunction from 'lodash/isFunction';\nimport isBoolean from 'lodash/isBoolean';\nimport { computed, nextTick } from 'vue';\nimport dayjs from 'dayjs';\nimport { COMPONENT_NAME } from '../const';\nimport { CalendarState } from '../interface';\nimport { TdCalendarProps, ControllerOptions } from '../type';\nimport { useConfig } from '../../hooks/useConfig';\n\nconst getDefaultControllerConfigData = (visible = true): Record<string, any> => ({\n  visible, // 是否显示（全部控件）\n  disabled: false, // 是否禁用（全部控件）\n  // 模式切换单选组件设置\n  mode: {\n    visible: true, // 是否显示\n    radioGroupProps: {}, // 用于透传props给该radioGroup组件\n  },\n  // 年份选择框组件相关设置\n  year: {\n    visible: true, // 是否显示\n    selectProps: {}, // 用于透传props给该select组件\n  },\n  // 年份选择框组件相关设置\n  month: {\n    visible: true, // 是否显示（“year”模式下本身是不显示该组件的）\n    selectProps: {}, // 用于透传props给该select组件\n  },\n  // 隐藏\\显示周末按钮组件相关设置\n  weekend: {\n    visible: true, // 是否显示\n    showWeekendButtonProps: {}, // 用于透传props给显示周末按钮组件\n    hideWeekendButtonProps: {}, // 用于透传props给隐藏周末按钮组件\n  },\n  // “今天\\本月”按钮组件相关设置\n  current: {\n    visible: true, // 是否显示\n    currentDayButtonProps: {}, // 用于透传props给“今天”钮组件（“month”模式下有效）\n    currentMonthButtonProps: {}, // 用于透传props给“本月”按钮组件（“year”模式下有效）\n  },\n});\n\nexport function userController(props: TdCalendarProps, state: CalendarState) {\n  const { globalConfig } = useConfig(COMPONENT_NAME);\n\n  const options = computed<ControllerOptions>(() => {\n    const dayJsFilterDate = dayjs(`${state.curSelectedYear}-${state.curSelectedMonth}`);\n    const re = {\n      isShowWeekend: state.isShowWeekend,\n      filterDate: dayJsFilterDate.toDate(),\n      formattedFilterDate: dayJsFilterDate.format(props.format),\n      mode: state.curSelectedMode,\n    };\n    return re;\n  });\n  const configData = computed<Record<string, any>>(() => {\n    const controllerConfig = props.controllerConfig ?? globalConfig.value.controllerConfig ?? true;\n    if (isBoolean(controllerConfig)) {\n      return getDefaultControllerConfigData(controllerConfig);\n    }\n    return {\n      ...getDefaultControllerConfigData(),\n      ...controllerConfig,\n    };\n  });\n  const visible = computed<boolean>(() => {\n    return !!configData.value && configData.value.visible;\n  });\n  /**\n   * 判断某个控件是否显示\n   * @param name 控件对应的配置节点名（对应controllerConfigData）\n   * @returns true表示显示\n   */\n  function checkControllerVisible(name: string): boolean {\n    let re = true;\n    const conf = configData.value;\n    if (!conf || !conf.visible || conf[name] === false || (conf[name] && !conf[name].visible)) {\n      re = false;\n    }\n    return re;\n  }\n  /**\n   * 判断某个控件是否禁用\n   * @param name 控件对应的配置节点名（对应controllerConfigData）\n   * @param propsName 表示禁用的控件属性（对应controllerConfigData）\n   * @returns true表示禁用\n   */\n  function checkControllerDisabled(name: string, propsName: string): boolean {\n    let re = false;\n    const conf = configData.value;\n    if (conf && (conf.disabled || (conf[name] && conf[name][propsName] && conf[name][propsName].disabled))) {\n      re = true;\n    }\n    return re;\n  }\n  function emitControllerChange() {\n    nextTick(() => {\n      isFunction(props.onControllerChange) && props.onControllerChange({ ...options.value });\n    });\n  }\n\n  return {\n    options,\n    configData,\n    visible,\n    checkControllerVisible,\n    checkControllerDisabled,\n    emitControllerChange,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}