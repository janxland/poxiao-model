{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../../_chunks/dep-7deaa3b9.mjs';\nimport { defineComponent, toRefs, createVNode, Fragment } from 'vue';\nimport useDrag from '../hooks/useDrag.mjs';\nimport { commonProps } from '../constants.mjs';\nimport { useContent } from '../../hooks/tnode.mjs';\nimport '../../_chunks/dep-8dbc9855.mjs';\nimport '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../_chunks/dep-66473aa9.mjs';\nimport '../../_chunks/dep-cb814df4.mjs';\nimport '../../_chunks/dep-cd533155.mjs';\nimport '../../_chunks/dep-715774e0.mjs';\nimport '../../_chunks/dep-5a5a1764.mjs';\nimport '../../_chunks/dep-f8909853.mjs';\nimport '../../_chunks/dep-67e59a11.mjs';\nimport '../../_chunks/dep-ab439391.mjs';\nimport '../../_chunks/dep-60d62610.mjs';\nimport '../../_chunks/dep-10024af3.mjs';\nimport '../../_chunks/dep-2adf18a2.mjs';\nimport '../../_chunks/dep-d00e2e04.mjs';\nimport '../../_chunks/dep-ec2f76cc.mjs';\nimport '../../_chunks/dep-96484611.mjs';\nimport '../../_chunks/dep-bd7cd061.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-60ee423b.mjs';\nimport '../../_chunks/dep-c545db54.mjs';\nimport '../../_chunks/dep-d4da440a.mjs';\nimport '../../_chunks/dep-013382c3.mjs';\nimport '../../_chunks/dep-3108c312.mjs';\nimport '../../_chunks/dep-ca764006.mjs';\nimport '../../_chunks/dep-996b4900.mjs';\nimport '../../_chunks/dep-3f15cb30.mjs';\nimport '../../_chunks/dep-0f89a1dd.mjs';\nimport '../../_chunks/dep-30b3f256.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar CustomFile = defineComponent({\n  name: \"UploadCustomFile\",\n  props: _objectSpread(_objectSpread({}, commonProps), {}, {\n    dragEvents: Object,\n    draggable: Boolean,\n    dragContent: Function,\n    trigger: Function,\n    triggerUpload: Function,\n    childrenNode: [String, Function]\n  }),\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var _toRefs = toRefs(props),\n      classPrefix = _toRefs.classPrefix,\n      displayFiles = _toRefs.displayFiles,\n      accept = _toRefs.accept;\n    var drag = useDrag(props.dragEvents, accept);\n    var dragActive = drag.dragActive;\n    var renderContent = useContent();\n    var renderDragContent = function renderDragContent() {\n      var _props$childrenNode;\n      var params = {\n        dragActive: dragActive.value || false,\n        files: displayFiles.value\n      };\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-upload__dragger \").concat(classPrefix.value, \"-upload__dragger-center\"),\n        \"onDrop\": drag.handleDrop,\n        \"onDragenter\": drag.handleDragenter,\n        \"onDragover\": drag.handleDragover,\n        \"onDragleave\": drag.handleDragleave,\n        \"onClick\": props.triggerUpload\n      }, [createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-upload__trigger\")\n      }, [renderContent(\"dragContent\", \"trigger\", {\n        params: params\n      }) || ((_props$childrenNode = props.childrenNode) === null || _props$childrenNode === void 0 ? void 0 : _props$childrenNode.call(props, params))])]);\n    };\n    return function () {\n      var _props$childrenNode2, _slots$default;\n      return createVNode(Fragment, null, [props.draggable ? renderDragContent() : createVNode(\"div\", {\n        \"class\": \"\".concat(classPrefix.value, \"-upload__trigger\"),\n        \"onClick\": props.triggerUpload\n      }, [((_props$childrenNode2 = props.childrenNode) === null || _props$childrenNode2 === void 0 ? void 0 : _props$childrenNode2.call(props, {\n        files: displayFiles.value\n      })) || ((_slots$default = slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call(slots))])]);\n    };\n  }\n});\nexport { CustomFile as default };","map":{"version":3,"names":["CustomFile","defineComponent","name","props","_objectSpread","commonProps","dragEvents","Object","draggable","Boolean","dragContent","Function","trigger","triggerUpload","childrenNode","String","setup","_ref","slots","_toRefs","toRefs","classPrefix","displayFiles","accept","drag","useDrag","dragActive","renderContent","useContent","renderDragContent","_props$childrenNode","params","value","files","createVNode","concat","handleDrop","handleDragenter","handleDragover","handleDragleave","call","_props$childrenNode2","_slots$default","Fragment"],"sources":["../../../src/upload/themes/custom-file.tsx"],"sourcesContent":["import { defineComponent, PropType, toRefs } from 'vue';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport { CommonDisplayFileProps } from '../interface';\nimport { commonProps } from '../constants';\nimport { useContent } from '../../hooks/tnode';\nimport { TdUploadProps } from '../type';\n\nexport interface CustomFileProps extends CommonDisplayFileProps {\n  dragEvents: UploadDragEvents;\n  draggable?: boolean;\n  // 拖拽区域\n  dragContent?: TdUploadProps['dragContent'];\n  trigger?: TdUploadProps['trigger'];\n  triggerUpload?: (e: MouseEvent) => void;\n  childrenNode?: any;\n}\n\nexport default defineComponent({\n  name: 'UploadCustomFile',\n\n  props: {\n    ...commonProps,\n    dragEvents: Object as PropType<CustomFileProps['dragEvents']>,\n    draggable: Boolean,\n    // 拖拽区域\n    dragContent: Function as PropType<CustomFileProps['dragContent']>,\n    trigger: Function as PropType<CustomFileProps['trigger']>,\n    triggerUpload: Function as PropType<CustomFileProps['triggerUpload']>,\n    childrenNode: [String, Function] as PropType<CustomFileProps['childrenNode']>,\n  },\n\n  setup(props, { slots }) {\n    const { classPrefix, displayFiles, accept } = toRefs(props);\n    const drag = useDrag(props.dragEvents, accept);\n    const { dragActive } = drag;\n\n    const renderContent = useContent();\n\n    const renderDragContent = () => {\n      const params = { dragActive: dragActive.value || false, files: displayFiles.value };\n      return (\n        <div\n          class={`${classPrefix.value}-upload__dragger ${classPrefix.value}-upload__dragger-center`}\n          onDrop={drag.handleDrop}\n          onDragenter={drag.handleDragenter}\n          onDragover={drag.handleDragover}\n          onDragleave={drag.handleDragleave}\n          onClick={props.triggerUpload}\n        >\n          <div class={`${classPrefix.value}-upload__trigger`}>\n            {renderContent('dragContent', 'trigger', { params }) || props.childrenNode?.(params)}\n          </div>\n        </div>\n      );\n    };\n\n    return () => (\n      <>\n        {props.draggable ? (\n          renderDragContent()\n        ) : (\n          <div class={`${classPrefix.value}-upload__trigger`} onClick={props.triggerUpload}>\n            {props.childrenNode?.({ files: displayFiles.value }) || slots.default?.()}\n          </div>\n        )}\n      </>\n    );\n  },\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAAA,UAAA,GAAeC,eAAgB;EAC7BC,IAAM;EAENC,KAAO,EAAAC,aAAA,CAAAA,aAAA,KACFC,WAAA;IACHC,UAAY,EAAAC,MAAA;IACZC,SAAW,EAAAC,OAAA;IAEXC,WAAa,EAAAC,QAAA;IACbC,OAAS,EAAAD,QAAA;IACTE,aAAe,EAAAF,QAAA;IACfG,YAAA,EAAc,CAACC,MAAA,EAAQJ,QAAQ;GACjC;EAEAK,KAAM,WAAAA,MAAAb,KAAA,EAAAc,IAAA,EAAkB;IAAA,IAATC,KAAA,GAAAD,IAAA,CAAAC,KAAA;IACb,IAAAC,OAAA,GAA8CC,MAAA,CAAOjB,KAAK;MAAlDkB,WAAa,GAAAF,OAAA,CAAbE,WAAa;MAAAC,YAAA,GAAAH,OAAA,CAAAG,YAAA;MAAcC,MAAO,GAAAJ,OAAA,CAAPI,MAAO;IAC1C,IAAMC,IAAO,GAAAC,OAAA,CAAQtB,KAAM,CAAAG,UAAA,EAAYiB,MAAM;IACvC,IAAEG,UAAA,GAAeF,IAAA,CAAfE,UAAA;IAER,IAAMC,aAAA,GAAgBC,UAAW;IAEjC,IAAMC,iBAAA,GAAoB,SAApBA,kBAAA,EAA0B;MAAA,IAAAC,mBAAA;MACxB,IAAAC,MAAA,GAAS;QAAEL,UAAY,EAAAA,UAAA,CAAWM,KAAA,IAAS,KAAO;QAAAC,KAAA,EAAOX,YAAA,CAAaU;OAAM;MAClF,OAAAE,WAAA;QAAA,YAAAC,MAAA,CAEcd,WAAY,CAAAW,KAAA,uBAAAG,MAAA,CAAyBd,WAAA,CAAYW,KAC3D;QAAA,QAAQ,EAAAR,IAAA,CAAKY,UACb;QAAA,aAAa,EAAAZ,IAAA,CAAKa,eAClB;QAAA,YAAY,EAAAb,IAAA,CAAKc,cACjB;QAAA,aAAa,EAAAd,IAAA,CAAKe,eAClB;QAAA,WAASpC,KAAM,CAAAU;MAAA,IAAAqB,WAAA;QAAA,YAAAC,MAAA,CAEAd,WAAY,CAAAW,KAAA;MAAA,IACxBL,aAAA,CAAc,aAAe,aAAW;QAAEI,MAAO,EAAPA;MAAO,CAAC,OAAAD,mBAAA,GAAK3B,KAAM,CAAAW,YAAA,cAAAgB,mBAAA,uBAANA,mBAAA,CAAAU,IAAA,CAAArC,KAAM,EAAe4B,MAAM,CACrF;KAGN;IAEO;MAAA,IAAAU,oBAAA,EAAAC,cAAA;MAAA,OAAAR,WAAA,CAAAS,QAAA,SAEFxC,KAAA,CAAMK,SACL,GAAAqB,iBAAA,EAEA,GAAAK,WAAA;QAAA,YAAAC,MAAA,CAAed,WAAA,CAAYW,KAAyB;QAAA,WAAS7B,KAAM,CAAAU;MAAA,IAChE,EAAA4B,oBAAA,GAAAtC,KAAM,CAAAW,YAAA,cAAA2B,oBAAA,uBAANA,oBAAA,CAAAD,IAAA,CAAArC,KAAM,EAAe;QAAE8B,KAAA,EAAOX,YAAa,CAAAU;MAAM,CAAC,QAAAU,cAAA,GAAKxB,KAAM,yBAAAwB,cAAA,uBAANA,cAAA,CAAAF,IAAA,CAAAtB,KAAgB,CAC1E,CAEJ;KAAA;EAEJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}