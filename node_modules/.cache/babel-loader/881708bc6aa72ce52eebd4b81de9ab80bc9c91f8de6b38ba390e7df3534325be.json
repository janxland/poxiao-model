{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../../_chunks/dep-7deaa3b9.mjs';\nimport { ref, computed } from 'vue';\nimport { formatLabel } from '../util/common.mjs';\nimport '../../hooks/index.mjs';\nimport { useTNodeJSX } from '../../hooks/tnode.mjs';\nimport '../../_chunks/dep-8dbc9855.mjs';\nimport '../../_chunks/dep-30b3f256.mjs';\nimport '../../_chunks/dep-cb814df4.mjs';\nimport '../../_chunks/dep-cd533155.mjs';\nimport '../../_chunks/dep-ab439391.mjs';\nimport '../../_chunks/dep-60d62610.mjs';\nimport '../../_chunks/dep-2adf18a2.mjs';\nimport '../../hooks/icon.mjs';\nimport '../../_chunks/dep-66473aa9.mjs';\nimport '../../_chunks/dep-715774e0.mjs';\nimport '../../_chunks/dep-5a5a1764.mjs';\nimport '../../hooks/slot.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-37e3e644.mjs';\nimport '../../_chunks/dep-31dc0415.mjs';\nimport '../../_chunks/dep-e5142249.mjs';\nimport '../../_chunks/dep-c4f80cb4.mjs';\nimport '../../_chunks/dep-996b4900.mjs';\nimport '../../_chunks/dep-3108c312.mjs';\nimport '../../_chunks/dep-93498383.mjs';\nimport '../../_chunks/dep-36582a92.mjs';\nimport '../../_chunks/dep-a2db6df1.mjs';\nimport '../../_chunks/dep-0f89a1dd.mjs';\nimport '../../_chunks/dep-d4da440a.mjs';\nimport '../../_chunks/dep-013382c3.mjs';\nimport '../../_chunks/dep-ca764006.mjs';\nimport '../../_chunks/dep-2ee9d497.mjs';\nimport '../../_chunks/dep-c545db54.mjs';\nimport '../../_chunks/dep-3f15cb30.mjs';\nimport '../../_chunks/dep-fd2b6c64.mjs';\nimport '../../_chunks/dep-b3734774.mjs';\nimport '../../_chunks/dep-a4a3ac25.mjs';\nimport '../../_chunks/dep-6861d388.mjs';\nimport '../../_chunks/dep-396d852b.mjs';\nimport '../../_chunks/dep-8a3fd140.mjs';\nimport '../../_chunks/dep-5db0da5c.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-bf19d9ba.mjs';\nimport '../../_chunks/dep-6963a882.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../hooks/useCommonClassName.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport '../../_chunks/dep-bd7cd061.mjs';\nimport '../../_chunks/dep-96484611.mjs';\nimport '../../_chunks/dep-67e59a11.mjs';\nimport '../../_chunks/dep-10024af3.mjs';\nimport '../../hooks/useDestroyOnClose.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/useVirtualScroll.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../hooks/useImagePreviewUrl.mjs';\nimport '../../_chunks/dep-b089fa1f.mjs';\nimport '../../_chunks/dep-8e411f1c.mjs';\nimport '../../_common/js/upload/utils.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../_chunks/dep-f8909853.mjs';\nimport '../../_chunks/dep-d00e2e04.mjs';\nimport '../../_chunks/dep-ec2f76cc.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-60ee423b.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar initialProps = {\n  visible: false,\n  trigger: \"hover\",\n  showArrow: true,\n  overlayInnerStyle: void 0,\n  overlayClassName: void 0,\n  attach: \"body\",\n  theme: \"default\"\n};\nvar useSliderTooltip = function useSliderTooltip(tooltipConfig) {\n  var tooltipRef = ref();\n  var showTooltip = computed({\n    get: function get() {\n      return !tooltipConfig.value.tooltipProps === false;\n    },\n    set: function set(val) {\n      return val;\n    }\n  });\n  var normalizeProps = ref(_objectSpread({}, initialProps));\n  var toggleTooltip = function toggleTooltip(toState) {\n    if (!showTooltip.value) return;\n    normalizeProps.value.visible = toState;\n  };\n  var renderTNodeJSX = useTNodeJSX();\n  var validProps = computed(function () {\n    var _tooltipConfig$value = tooltipConfig.value,\n      vertical = _tooltipConfig$value.vertical,\n      tooltipProps = _tooltipConfig$value.tooltipProps,\n      label = _tooltipConfig$value.label,\n      value = _tooltipConfig$value.value,\n      position = _tooltipConfig$value.position,\n      range = _tooltipConfig$value.range;\n    var placement = vertical ? \"right\" : \"top\";\n    var content = function () {\n      if (label === true) {\n        return String(value);\n      }\n      if (typeof label === \"string\") {\n        return formatLabel(label, value);\n      }\n      return renderTNodeJSX(\"label\", {\n        params: range ? {\n          value: value,\n          position: position\n        } : {\n          value: value\n        }\n      });\n    }();\n    if (tooltipProps instanceof Object) {\n      if (!(tooltipProps !== null && tooltipProps !== void 0 && tooltipProps.placement)) {\n        normalizeProps.value.placement = placement;\n      }\n      if (tooltipProps.content) {\n        content = tooltipProps.content;\n      }\n      return _objectSpread(_objectSpread(_objectSpread({}, normalizeProps.value), tooltipProps), {}, {\n        content: content\n      });\n    }\n    return _objectSpread(_objectSpread({}, normalizeProps.value), {}, {\n      placement: placement,\n      content: content\n    });\n  });\n  return {\n    tooltipRef: tooltipRef,\n    tooltipProps: validProps,\n    toggleTooltip: toggleTooltip,\n    showTooltip: showTooltip\n  };\n};\nexport { useSliderTooltip };","map":{"version":3,"names":["initialProps","visible","trigger","showArrow","overlayInnerStyle","overlayClassName","attach","theme","useSliderTooltip","tooltipConfig","tooltipRef","ref","showTooltip","computed","get","value","tooltipProps","set","val","normalizeProps","_objectSpread","toggleTooltip","toState","renderTNodeJSX","useTNodeJSX","validProps","_tooltipConfig$value","vertical","label","position","range","placement","content","String","formatLabel","params","Object"],"sources":["../../../src/slider/hooks/useSliderTooltip.tsx"],"sourcesContent":["import { TooltipProps } from '@src/tooltip';\nimport { ref, computed, ComputedRef, Ref } from 'vue';\nimport { TdSliderProps } from '../type';\nimport { formatLabel } from '../util/common';\nimport { useTNodeJSX } from '../../hooks';\n\nconst initialProps: TooltipProps & { overlayClassName: string } = {\n  visible: false,\n  trigger: 'hover',\n  showArrow: true,\n  overlayInnerStyle: undefined,\n  overlayClassName: undefined,\n  attach: 'body',\n  theme: 'default',\n};\n\nexport interface TooltipConfig {\n  tooltipProps: boolean | TooltipProps;\n  vertical: boolean;\n  value: number;\n  label: TdSliderProps['label'];\n  position: string;\n  range: boolean;\n}\n\n/**\n * 聚合管理滑块tooltip内容hook\n * @param tooltipProps tooltip属性配置\n * @param vertical 是否垂直展示\n * @returns\n */\nexport const useSliderTooltip = (tooltipConfig: Ref<TooltipConfig>) => {\n  const tooltipRef = ref();\n  const showTooltip = computed({\n    get() {\n      return !tooltipConfig.value.tooltipProps === false;\n    },\n    set(val) {\n      return val;\n    },\n  });\n  const normalizeProps = ref<TooltipProps & { overlayClassName: string }>({ ...initialProps });\n  /** 开关显示tooltip */\n  const toggleTooltip = (toState: boolean) => {\n    if (!showTooltip.value) return;\n    normalizeProps.value.visible = toState;\n  };\n\n  const renderTNodeJSX = useTNodeJSX();\n\n  /** 合并最终tooltip属性，以外部同名属性覆盖初始化属性 */\n  const validProps = computed(() => {\n    const { vertical, tooltipProps, label, value, position, range } = tooltipConfig.value;\n    const placement = vertical ? 'right' : 'top';\n\n    let content = (() => {\n      if (label === true) {\n        return String(value);\n      }\n      if (typeof label === 'string') {\n        return formatLabel(label, value);\n      }\n      return renderTNodeJSX('label', {\n        params: range\n          ? {\n              value,\n              position,\n            }\n          : { value },\n      });\n    })();\n\n    if (tooltipProps instanceof Object) {\n      if (!tooltipProps?.placement) {\n        normalizeProps.value.placement = placement;\n      }\n      if (tooltipProps.content) {\n        content = tooltipProps.content;\n      }\n      // @ts-ignore\n      return { ...normalizeProps.value, ...tooltipProps, content };\n    }\n    return { ...normalizeProps.value, placement, content };\n  });\n\n  return {\n    tooltipRef,\n    tooltipProps: validProps as ComputedRef<TdSliderProps['tooltipProps']>,\n    toggleTooltip,\n    showTooltip,\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAMA,YAA4D;EAChEC,OAAS;EACTC,OAAS;EACTC,SAAW;EACXC,iBAAmB;EACnBC,gBAAkB;EAClBC,MAAQ;EACRC,KAAO;AACT;IAiBaC,gBAAA,GAAmB,SAAnBA,iBAAoBC,aAAsC;EACrE,IAAMC,UAAA,GAAaC,GAAI;EACvB,IAAMC,WAAA,GAAcC,QAAS;IAC3BC,GAAM,WAAAA,IAAA;MACG,QAACL,aAAc,CAAAM,KAAA,CAAMC,YAAiB;KAC/C;IACAC,GAAA,WAAAA,GAAIA,CAAAC,GAAK;MACA,OAAAA,GAAA;IACT;EACF,CAAC;EACD,IAAMC,cAAiB,GAAAR,GAAA,CAAAS,aAAA,CAAsD,IAAApB,YAAA,CAAc;EAErF,IAAAqB,aAAA,GAAgB,SAAhBA,cAAiBC,OAAqB;IAC1C,IAAI,CAACV,WAAY,CAAAG,KAAA,EAAO;IACxBI,cAAA,CAAeJ,KAAA,CAAMd,OAAU,GAAAqB,OAAA;GACjC;EAEA,IAAMC,cAAA,GAAiBC,WAAY;EAG7B,IAAAC,UAAA,GAAaZ,QAAA,CAAS,YAAM;IAC1B,IAAAa,oBAAA,GAA4DjB,aAAc,CAAAM,KAAA;MAAxEY,QAAA,GAAAD,oBAAA,CAAAC,QAAA;MAAUX,YAAc,GAAAU,oBAAA,CAAdV,YAAc;MAAAY,KAAA,GAAAF,oBAAA,CAAAE,KAAA;MAAOb,KAAA,GAAAW,oBAAA,CAAAX,KAAA;MAAOc,QAAU,GAAAH,oBAAA,CAAVG,QAAU;MAAAC,KAAA,GAAAJ,oBAAA,CAAAI,KAAA;IAClD,IAAAC,SAAA,GAAYJ,QAAA,GAAW,OAAU;IAEvC,IAAIK,OAAA,GAAW,YAAM;MACnB,IAAIJ,KAAA,KAAU,IAAM;QAClB,OAAOK,MAAA,CAAOlB,KAAK;MACrB;MACI,WAAOa,KAAA,KAAU,QAAU;QACtB,OAAAM,WAAA,CAAYN,KAAA,EAAOb,KAAK;MACjC;MACA,OAAOQ,cAAA,CAAe,OAAS;QAC7BY,MAAA,EAAQL,KACJ;UACEf,KAAA,EAAAA,KAAA;UACAc,QAAA,EAAAA;QACF,IACA;UAAEd,KAAM,EAANA;QAAM;MACd,CAAC;IACH,CAAG;IAEH,IAAIC,YAAA,YAAwBoB,MAAQ;MAC9B,MAACpB,YAAA,aAAAA,YAAA,eAAAA,YAAA,CAAce,SAAW;QAC5BZ,cAAA,CAAeJ,KAAA,CAAMgB,SAAY,GAAAA,SAAA;MACnC;MACA,IAAIf,YAAA,CAAagB,OAAS;QACxBA,OAAA,GAAUhB,YAAa,CAAAgB,OAAA;MACzB;MAEA,OAAAZ,aAAA,CAAAA,aAAA,CAAAA,aAAA,KAAYD,cAAA,CAAeJ,KAAO,GAAGC,YAAA;QAAcgB,OAAQ,EAARA;MAAQ;IAC7D;IACA,OAAAZ,aAAA,CAAAA,aAAA,CAAY,IAAAD,cAAe,CAAAJ,KAAA;MAAOgB,SAAA,EAAAA,SAAA;MAAWC,OAAQ,EAARA;IAAQ;EACvD,CAAC;EAEM;IACLtB,UAAA,EAAAA,UAAA;IACAM,YAAc,EAAAS,UAAA;IACdJ,aAAA,EAAAA,aAAA;IACAT,WAAA,EAAAA;GACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}