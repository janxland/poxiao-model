{"ast":null,"code":"/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-a5dfe884.mjs';\nimport { _ as _slicedToArray } from '../_chunks/dep-a71c8f5b.mjs';\nimport { toRefs, ref, computed, watch } from 'vue';\nimport useCommonClassName from '../hooks/useCommonClassName.mjs';\nimport useVModel from '../hooks/useVModel.mjs';\nimport { canReduceNumber, canAddNumber, formatUnCompleteNumber, getMaxOrMinValidateResult, getStepValue, formatThousandths, canInputNumber, canSetValue } from '../_common/js/input-number/number.mjs';\nimport { useFormDisabled } from '../form/hooks.mjs';\nimport { largeNumberToFixed } from '../_common/js/input-number/large-number.mjs';\nimport '../_chunks/dep-d33c5d88.mjs';\nimport '../_chunks/dep-0e21c401.mjs';\nimport '../hooks/useConfig.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-6e7655db.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nimport '../_chunks/dep-6ad32365.mjs';\nimport '../_chunks/dep-62ad5a36.mjs';\nimport '../_chunks/dep-f76ec896.mjs';\nimport '../_chunks/dep-db7324ec.mjs';\nimport '../_chunks/dep-d090226f.mjs';\nimport '../_chunks/dep-c31faaef.mjs';\nimport '../_chunks/dep-5f15268c.mjs';\nimport '../_chunks/dep-c70e40ae.mjs';\nimport '../_chunks/dep-4382b808.mjs';\nimport '../_chunks/dep-0894e3ae.mjs';\nimport '../_chunks/dep-0ced8e2e.mjs';\nimport '../_chunks/dep-fb9941c5.mjs';\nimport '../_chunks/dep-75628739.mjs';\nimport '../_chunks/dep-1494b54a.mjs';\nimport '../_chunks/dep-0e5b2b76.mjs';\nimport '../_chunks/dep-f3a27c4c.mjs';\nimport '../_chunks/dep-e3204123.mjs';\nimport '../_chunks/dep-10c900d8.mjs';\nimport '../_chunks/dep-1c5d24dd.mjs';\nimport '../_chunks/dep-b6946d89.mjs';\nimport '../_chunks/dep-6ea85de8.mjs';\nimport '../_chunks/dep-92ce9c6c.mjs';\nimport '../_chunks/dep-3b84887f.mjs';\nimport '../_chunks/dep-5d7be5c6.mjs';\nimport '../_chunks/dep-0223e29d.mjs';\nimport '../_chunks/dep-3d61d8a6.mjs';\nimport '../_chunks/dep-88c02450.mjs';\nimport '../_chunks/dep-f7067d3d.mjs';\nimport '../_chunks/dep-cd1b7f96.mjs';\nimport '../_chunks/dep-eea784eb.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-0c808c2e.mjs';\nimport '../_chunks/dep-4c103c66.mjs';\nimport '../config-provider/type.mjs';\nimport '../_chunks/dep-1c9d9f8d.mjs';\nimport '../_chunks/dep-28a28c00.mjs';\nimport '../_chunks/dep-003c9b00.mjs';\nimport '../_chunks/dep-e98ea432.mjs';\nimport '../_chunks/dep-3c3faac3.mjs';\nimport '../_chunks/dep-ae66bf73.mjs';\nimport '../_common/js/log/index.mjs';\nimport '../_common/js/log/log.mjs';\nfunction useInputNumber(props) {\n  var _useCommonClassName = useCommonClassName(),\n    classPrefix = _useCommonClassName.classPrefix,\n    sizeClassNames = _useCommonClassName.sizeClassNames,\n    statusClassNames = _useCommonClassName.statusClassNames;\n  var _toRefs = toRefs(props),\n    value = _toRefs.value,\n    modelValue = _toRefs.modelValue,\n    max = _toRefs.max,\n    min = _toRefs.min;\n  var _useVModel = useVModel(value, modelValue, props.defaultValue, props.onChange),\n    _useVModel2 = _slicedToArray(_useVModel, 2),\n    tValue = _useVModel2[0],\n    setTValue = _useVModel2[1];\n  var inputRef = ref();\n  var userInput = ref(\"\");\n  var tDisabled = useFormDisabled();\n  var isError = ref();\n  var disabledReduce = computed(function () {\n    return tDisabled.value || !canReduceNumber(tValue.value, props.min, props.largeNumber);\n  });\n  var disabledAdd = computed(function () {\n    return tDisabled.value || !canAddNumber(tValue.value, props.max, props.largeNumber);\n  });\n  var wrapClasses = computed(function () {\n    return [\"\".concat(classPrefix.value, \"-input-number\"), sizeClassNames[props.size], _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, statusClassNames.disabled, tDisabled.value), \"\".concat(classPrefix.value, \"-is-controls-right\"), props.theme === \"column\"), \"\".concat(classPrefix.value, \"-input-number--\").concat(props.theme), props.theme), \"\".concat(classPrefix.value, \"-input-number--auto-width\"), props.autoWidth)];\n  });\n  var reduceClasses = computed(function () {\n    return [\"\".concat(classPrefix.value, \"-input-number__decrease\"), _defineProperty({}, statusClassNames.disabled, disabledReduce.value)];\n  });\n  var addClasses = computed(function () {\n    return [\"\".concat(classPrefix.value, \"-input-number__increase\"), _defineProperty({}, statusClassNames.disabled, disabledAdd.value)];\n  });\n  var getUserInput = function getUserInput(value2) {\n    var _inputRef$value;\n    if (!value2 && value2 !== 0) return \"\";\n    var inputStr = value2 || value2 === 0 ? String(value2) : \"\";\n    if (!((_inputRef$value = inputRef.value) !== null && _inputRef$value !== void 0 && (_inputRef$value = _inputRef$value.inputRef) !== null && _inputRef$value !== void 0 && _inputRef$value.contains(document.activeElement))) {\n      var num = formatUnCompleteNumber(inputStr, {\n        decimalPlaces: props.decimalPlaces,\n        largeNumber: props.largeNumber,\n        isToFixed: true\n      });\n      inputStr = num || num === 0 ? String(num) : \"\";\n      if (props.format) {\n        inputStr = String(props.format(value2, {\n          fixedNumber: inputStr\n        }));\n      }\n    }\n    return inputStr;\n  };\n  watch(tValue, function (val) {\n    var largeNumber = props.largeNumber,\n      decimalPlaces = props.decimalPlaces;\n    var inputValue = [void 0, null].includes(val) ? \"\" : String(val);\n    if (!largeNumber && !Number.isNaN(userInput.value)) {\n      if (parseFloat(userInput.value) !== val) {\n        userInput.value = getUserInput(inputValue);\n      }\n      var fixedNumber = Number(largeNumberToFixed(inputValue, decimalPlaces, largeNumber));\n      if (decimalPlaces !== void 0 && ![void 0, null].includes(val) && Number(fixedNumber) !== Number(tValue.value)) {\n        setTValue(fixedNumber, {\n          type: \"props\",\n          e: void 0\n        });\n      }\n    }\n    if (largeNumber) {\n      userInput.value = getUserInput(inputValue);\n      if (decimalPlaces !== void 0 && largeNumberToFixed(inputValue, decimalPlaces, largeNumber) !== val) {\n        setTValue(userInput.value, {\n          type: \"props\",\n          e: void 0\n        });\n      }\n    }\n  }, {\n    immediate: true\n  });\n  watch([tValue, max, min], function () {\n    var _props$onValidate;\n    if ([void 0, \"\", null].includes(tValue.value)) return;\n    var max2 = props.max,\n      min2 = props.min,\n      largeNumber = props.largeNumber;\n    var error = getMaxOrMinValidateResult({\n      value: tValue.value,\n      largeNumber: largeNumber,\n      max: max2,\n      min: min2\n    });\n    isError.value = error;\n    (_props$onValidate = props.onValidate) === null || _props$onValidate === void 0 || _props$onValidate.call(props, {\n      error: error\n    });\n  }, {\n    immediate: true\n  });\n  var handleStepValue = function handleStepValue(op) {\n    var newValue = getStepValue({\n      op: op,\n      step: props.step,\n      max: props.max,\n      min: props.min,\n      lastValue: tValue.value,\n      largeNumber: props.largeNumber\n    });\n    var largeNumber = props.largeNumber,\n      max2 = props.max,\n      min2 = props.min;\n    var overLimit = getMaxOrMinValidateResult({\n      value: newValue,\n      largeNumber: largeNumber,\n      max: max2,\n      min: min2\n    });\n    return {\n      overLimit: overLimit,\n      newValue: newValue\n    };\n  };\n  var handleReduce = function handleReduce(e) {\n    if (disabledReduce.value || props.readonly) return;\n    var r = handleStepValue(\"reduce\");\n    if (r.overLimit && !props.allowInputOverLimit) return;\n    setTValue(r.newValue, {\n      type: \"reduce\",\n      e: e\n    });\n  };\n  var handleAdd = function handleAdd(e) {\n    if (disabledAdd.value || props.readonly) return;\n    var r = handleStepValue(\"add\");\n    if (r.overLimit && !props.allowInputOverLimit) return;\n    setTValue(r.newValue, {\n      type: \"add\",\n      e: e\n    });\n  };\n  var onInnerInputChange = function onInnerInputChange(inputValue, _ref4) {\n    var e = _ref4.e;\n    var val = formatThousandths(inputValue);\n    if (!canInputNumber(val, props.largeNumber)) return;\n    userInput.value = val;\n    if (props.largeNumber) {\n      setTValue(val, {\n        type: \"input\",\n        e: e\n      });\n      return;\n    }\n    if (canSetValue(String(val), Number(tValue.value))) {\n      var newVal = val === \"\" ? void 0 : Number(val);\n      setTValue(newVal, {\n        type: \"input\",\n        e: e\n      });\n    }\n  };\n  var handleBlur = function handleBlur(value2, ctx) {\n    var _props$onBlur3;\n    var largeNumber = props.largeNumber,\n      max2 = props.max,\n      min2 = props.min,\n      decimalPlaces = props.decimalPlaces;\n    if (!props.allowInputOverLimit && tValue.value !== void 0) {\n      var r = getMaxOrMinValidateResult({\n        value: tValue.value,\n        largeNumber: largeNumber,\n        max: max2,\n        min: min2\n      });\n      if (r === \"below-minimum\") {\n        var _props$onBlur;\n        setTValue(min2, {\n          type: \"blur\",\n          e: ctx.e\n        });\n        (_props$onBlur = props.onBlur) === null || _props$onBlur === void 0 || _props$onBlur.call(props, min2, ctx);\n        return;\n      }\n      if (r === \"exceed-maximum\") {\n        var _props$onBlur2;\n        setTValue(max2, {\n          type: \"blur\",\n          e: ctx.e\n        });\n        (_props$onBlur2 = props.onBlur) === null || _props$onBlur2 === void 0 || _props$onBlur2.call(props, max2, ctx);\n        return;\n      }\n    }\n    var newValue = formatUnCompleteNumber(value2, {\n      decimalPlaces: decimalPlaces,\n      largeNumber: largeNumber\n    });\n    userInput.value = getUserInput(newValue);\n    if (newValue !== tValue.value) {\n      setTValue(newValue, {\n        type: \"blur\",\n        e: ctx.e\n      });\n    }\n    (_props$onBlur3 = props.onBlur) === null || _props$onBlur3 === void 0 || _props$onBlur3.call(props, newValue, ctx);\n  };\n  var handleFocus = function handleFocus(value2, ctx) {\n    var _props$onFocus;\n    userInput.value = tValue.value || tValue.value === 0 ? String(tValue.value) : \"\";\n    (_props$onFocus = props.onFocus) === null || _props$onFocus === void 0 || _props$onFocus.call(props, value2, ctx);\n  };\n  var handleKeydown = function handleKeydown(value2, ctx) {\n    var _props$onKeydown;\n    if (tDisabled.value) return;\n    var e = ctx.e;\n    var keyEvent = {\n      ArrowUp: handleAdd,\n      ArrowDown: handleReduce\n    };\n    var code = e.code || e.key;\n    if (keyEvent[code] !== void 0) {\n      keyEvent[code](e);\n    }\n    (_props$onKeydown = props.onKeydown) === null || _props$onKeydown === void 0 || _props$onKeydown.call(props, value2, ctx);\n  };\n  var handleKeyup = function handleKeyup(value2, ctx) {\n    var _props$onKeyup;\n    (_props$onKeyup = props.onKeyup) === null || _props$onKeyup === void 0 || _props$onKeyup.call(props, value2, ctx);\n  };\n  var handleKeypress = function handleKeypress(value2, ctx) {\n    var _props$onKeypress;\n    (_props$onKeypress = props.onKeypress) === null || _props$onKeypress === void 0 || _props$onKeypress.call(props, value2, ctx);\n  };\n  var handleEnter = function handleEnter(value2, ctx) {\n    var _props$onEnter;\n    userInput.value = getUserInput(value2);\n    var newValue = formatUnCompleteNumber(value2, {\n      decimalPlaces: props.decimalPlaces,\n      largeNumber: props.largeNumber\n    });\n    if (newValue !== value2 && String(newValue) !== value2) {\n      setTValue(newValue, {\n        type: \"enter\",\n        e: ctx.e\n      });\n    }\n    (_props$onEnter = props.onEnter) === null || _props$onEnter === void 0 || _props$onEnter.call(props, newValue, ctx);\n  };\n  var focus = function focus() {\n    inputRef.value.focus();\n  };\n  var blur = function blur() {\n    inputRef.value.blur();\n  };\n  var listeners = {\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    onKeydown: handleKeydown,\n    onKeyup: handleKeyup,\n    onKeypress: handleKeypress,\n    onEnter: handleEnter,\n    onClick: focus\n  };\n  return {\n    classPrefix: classPrefix,\n    wrapClasses: wrapClasses,\n    reduceClasses: reduceClasses,\n    addClasses: addClasses,\n    tDisabled: tDisabled,\n    isError: isError,\n    listeners: listeners,\n    userInput: userInput,\n    tValue: tValue,\n    inputRef: inputRef,\n    focus: focus,\n    blur: blur,\n    handleReduce: handleReduce,\n    handleAdd: handleAdd,\n    onInnerInputChange: onInnerInputChange\n  };\n}\nexport { useInputNumber as default };","map":{"version":3,"names":["useInputNumber","props","_useCommonClassName","useCommonClassName","classPrefix","sizeClassNames","statusClassNames","_toRefs","toRefs","value","modelValue","max","min","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","tValue","setTValue","inputRef","ref","userInput","tDisabled","useFormDisabled","isError","disabledReduce","computed","canReduceNumber","largeNumber","disabledAdd","canAddNumber","wrapClasses","concat","size","_defineProperty","disabled","theme","autoWidth","reduceClasses","addClasses","getUserInput","value2","_inputRef$value","inputStr","String","contains","document","activeElement","num","formatUnCompleteNumber","decimalPlaces","isToFixed","format","fixedNumber","watch","val","inputValue","includes","Number","isNaN","parseFloat","largeNumberToFixed","type","e","immediate","_props$onValidate","max2","min2","error","getMaxOrMinValidateResult","onValidate","call","handleStepValue","op","newValue","getStepValue","step","lastValue","overLimit","handleReduce","readonly","r","allowInputOverLimit","handleAdd","onInnerInputChange","_ref4","formatThousandths","canInputNumber","canSetValue","newVal","handleBlur","ctx","_props$onBlur3","_props$onBlur","onBlur","_props$onBlur2","handleFocus","_props$onFocus","onFocus","handleKeydown","_props$onKeydown","keyEvent","ArrowUp","ArrowDown","code","key","onKeydown","handleKeyup","_props$onKeyup","onKeyup","handleKeypress","_props$onKeypress","onKeypress","handleEnter","_props$onEnter","onEnter","focus","blur","listeners","onClick"],"sources":["../../src/input-number/useInputNumber.tsx"],"sourcesContent":["import { computed, ref, toRefs, watch } from 'vue';\nimport useCommonClassName from '../hooks/useCommonClassName';\nimport useVModel from '../hooks/useVModel';\nimport { InputNumberValue, TdInputNumberProps } from './type';\n// 计算逻辑，统一到 common 中，方便各框架复用（如超过 16 位的大数处理）\nimport {\n  canAddNumber,\n  canInputNumber,\n  canReduceNumber,\n  getMaxOrMinValidateResult,\n  getStepValue,\n  formatThousandths,\n  canSetValue,\n  formatUnCompleteNumber,\n  largeNumberToFixed,\n} from '../_common/js/input-number/number';\nimport { useFormDisabled } from '../form/hooks';\nimport { StrInputProps } from '../input';\n\n/**\n * 独立一个组件 Hook 方便用户直接使用相关逻辑 自定义任何样式的数字输入框\n */\nexport default function useInputNumber(props: TdInputNumberProps) {\n  const { classPrefix, sizeClassNames, statusClassNames } = useCommonClassName();\n  const { value, modelValue, max, min } = toRefs(props);\n  // 统一处理受控、非受控、语法糖 v-model 等\n  const [tValue, setTValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n  const inputRef = ref();\n  const userInput = ref('');\n\n  const tDisabled = useFormDisabled();\n\n  const isError = ref<'exceed-maximum' | 'below-minimum'>();\n\n  const disabledReduce = computed(\n    () => tDisabled.value || !canReduceNumber(tValue.value, props.min, props.largeNumber),\n  );\n\n  const disabledAdd = computed(() => tDisabled.value || !canAddNumber(tValue.value, props.max, props.largeNumber));\n\n  const wrapClasses = computed(() => [\n    `${classPrefix.value}-input-number`,\n    sizeClassNames[props.size],\n    {\n      [statusClassNames.disabled]: tDisabled.value,\n      [`${classPrefix.value}-is-controls-right`]: props.theme === 'column',\n      [`${classPrefix.value}-input-number--${props.theme}`]: props.theme,\n      [`${classPrefix.value}-input-number--auto-width`]: props.autoWidth,\n    },\n  ]);\n\n  const reduceClasses = computed(() => [\n    `${classPrefix.value}-input-number__decrease`,\n    { [statusClassNames.disabled]: disabledReduce.value },\n  ]);\n\n  const addClasses = computed(() => [\n    `${classPrefix.value}-input-number__increase`,\n    { [statusClassNames.disabled]: disabledAdd.value },\n  ]);\n\n  const getUserInput = (value: InputNumberValue) => {\n    if (!value && value !== 0) return '';\n    let inputStr = value || value === 0 ? String(value) : '';\n    if (!inputRef.value?.inputRef?.contains(document.activeElement)) {\n      const num = formatUnCompleteNumber(inputStr, {\n        decimalPlaces: props.decimalPlaces,\n        largeNumber: props.largeNumber,\n        isToFixed: true,\n      });\n      inputStr = num || num === 0 ? String(num) : '';\n      if (props.format) {\n        inputStr = String(props.format(value, { fixedNumber: inputStr }));\n      }\n    }\n    return inputStr;\n  };\n\n  watch(\n    tValue,\n    (val) => {\n      const { largeNumber, decimalPlaces } = props;\n      const inputValue = [undefined, null].includes(val) ? '' : String(val);\n      // userInput.value 为非合法数字，则表示用户正在输入，此时无需处理\n      if (!largeNumber && !Number.isNaN(userInput.value)) {\n        if (parseFloat(userInput.value) !== val) {\n          userInput.value = getUserInput(inputValue);\n        }\n        const fixedNumber = Number(largeNumberToFixed(inputValue, decimalPlaces, largeNumber));\n        if (\n          decimalPlaces !== undefined &&\n          ![undefined, null].includes(val) &&\n          Number(fixedNumber) !== Number(tValue.value)\n        ) {\n          setTValue(fixedNumber, { type: 'props', e: undefined });\n        }\n      }\n      if (largeNumber) {\n        userInput.value = getUserInput(inputValue);\n        if (decimalPlaces !== undefined && largeNumberToFixed(inputValue, decimalPlaces, largeNumber) !== val) {\n          setTValue(userInput.value, { type: 'props', e: undefined });\n        }\n      }\n    },\n    { immediate: true },\n  );\n\n  watch(\n    [tValue, max, min],\n    () => {\n      // @ts-ignore 没有输入完成，则无需校验\n      if ([undefined, '', null].includes(tValue.value)) return;\n      const { max, min, largeNumber } = props;\n      const error = getMaxOrMinValidateResult({\n        value: tValue.value,\n        largeNumber,\n        max,\n        min,\n      });\n      isError.value = error;\n      props.onValidate?.({ error });\n    },\n    { immediate: true },\n  );\n\n  const handleStepValue = (op: 'add' | 'reduce') => {\n    const newValue = getStepValue({\n      op,\n      step: props.step,\n      max: props.max,\n      min: props.min,\n      lastValue: tValue.value,\n      largeNumber: props.largeNumber,\n    });\n    const { largeNumber, max, min } = props;\n    const overLimit = getMaxOrMinValidateResult({\n      value: newValue,\n      largeNumber,\n      max,\n      min,\n    });\n    return {\n      overLimit,\n      newValue,\n    };\n  };\n\n  const handleReduce = (e: KeyboardEvent | MouseEvent) => {\n    if (disabledReduce.value || props.readonly) return;\n    const r = handleStepValue('reduce');\n    if (r.overLimit && !props.allowInputOverLimit) return;\n    setTValue(r.newValue, { type: 'reduce', e });\n  };\n\n  const handleAdd = (e: KeyboardEvent | MouseEvent) => {\n    if (disabledAdd.value || props.readonly) return;\n    const r = handleStepValue('add');\n    if (r.overLimit && !props.allowInputOverLimit) return;\n    setTValue(r.newValue, { type: 'add', e });\n  };\n\n  const onInnerInputChange: StrInputProps['onChange'] = (inputValue, { e }) => {\n    // 千分位处理\n    const val = formatThousandths(inputValue);\n\n    if (!canInputNumber(val, props.largeNumber)) return;\n\n    userInput.value = val;\n\n    if (props.largeNumber) {\n      setTValue(val, { type: 'input', e });\n      return;\n    }\n\n    if (canSetValue(String(val), Number(tValue.value))) {\n      const newVal = val === '' ? undefined : Number(val);\n      setTValue(newVal, { type: 'input', e });\n    }\n  };\n\n  const handleBlur = (value: string, ctx: { e: FocusEvent }) => {\n    const { largeNumber, max, min, decimalPlaces } = props;\n    if (!props.allowInputOverLimit && tValue.value !== undefined) {\n      const r = getMaxOrMinValidateResult({ value: tValue.value, largeNumber, max, min });\n      if (r === 'below-minimum') {\n        setTValue(min, { type: 'blur', e: ctx.e });\n        props.onBlur?.(min, ctx);\n        return;\n      }\n      if (r === 'exceed-maximum') {\n        setTValue(max, { type: 'blur', e: ctx.e });\n        props.onBlur?.(max, ctx);\n        return;\n      }\n    }\n    const newValue = formatUnCompleteNumber(value, {\n      decimalPlaces,\n      largeNumber,\n    });\n    userInput.value = getUserInput(newValue);\n\n    if (newValue !== tValue.value) {\n      setTValue(newValue, { type: 'blur', e: ctx.e });\n    }\n    props.onBlur?.(newValue, ctx);\n  };\n\n  const handleFocus = (value: string, ctx: { e: FocusEvent }) => {\n    userInput.value = tValue.value || tValue.value === 0 ? String(tValue.value) : '';\n    props.onFocus?.(value, ctx);\n  };\n\n  const handleKeydown = (value: string, ctx: { e: KeyboardEvent }) => {\n    if (tDisabled.value) return;\n    const { e } = ctx;\n    const keyEvent = {\n      ArrowUp: handleAdd,\n      ArrowDown: handleReduce,\n    };\n    const code = e.code || e.key;\n    if (keyEvent[code] !== undefined) {\n      keyEvent[code](e);\n    }\n    props.onKeydown?.(value, ctx);\n  };\n\n  const handleKeyup = (value: string, ctx: { e: KeyboardEvent }) => {\n    props.onKeyup?.(value, ctx);\n  };\n\n  const handleKeypress = (value: string, ctx: { e: KeyboardEvent }) => {\n    props.onKeypress?.(value, ctx);\n  };\n\n  const handleEnter = (value: string, ctx: { e: KeyboardEvent }) => {\n    userInput.value = getUserInput(value);\n    const newValue = formatUnCompleteNumber(value, {\n      decimalPlaces: props.decimalPlaces,\n      largeNumber: props.largeNumber,\n    });\n    if (newValue !== value && String(newValue) !== value) {\n      setTValue(newValue, { type: 'enter', e: ctx.e });\n    }\n    props.onEnter?.(newValue, ctx);\n  };\n\n  const focus = () => {\n    (inputRef.value as any).focus();\n  };\n\n  const blur = () => {\n    (inputRef.value as any).blur();\n  };\n\n  const listeners = {\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    onKeydown: handleKeydown,\n    onKeyup: handleKeyup,\n    onKeypress: handleKeypress,\n    onEnter: handleEnter,\n    onClick: focus,\n  };\n\n  return {\n    classPrefix,\n    wrapClasses,\n    reduceClasses,\n    addClasses,\n    tDisabled,\n    isError,\n    listeners,\n    userInput,\n    tValue,\n    inputRef,\n    focus,\n    blur,\n    handleReduce,\n    handleAdd,\n    onInnerInputChange,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}