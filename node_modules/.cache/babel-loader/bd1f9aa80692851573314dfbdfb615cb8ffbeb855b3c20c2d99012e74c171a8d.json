{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../../_chunks/dep-7deaa3b9.mjs';\nimport { defineComponent, ref, reactive, computed, nextTick, onMounted, onBeforeUnmount, createVNode } from 'vue';\nimport '../const.mjs';\nimport '../utils/index.mjs';\nimport { useBaseClassName } from '../hooks.mjs';\nimport baseProps from './base-props.mjs';\nimport { SATURATION_PANEL_DEFAULT_WIDTH, SATURATION_PANEL_DEFAULT_HEIGHT } from '../../_common/js/color-picker/constants.mjs';\nimport { Draggable } from '../../_common/js/color-picker/draggable.mjs';\nimport '../../_chunks/dep-8dbc9855.mjs';\nimport '../../_common/js/color-picker/index.mjs';\nimport '../../_common/js/color-picker/cmyk.mjs';\nimport '../../_common/js/color-picker/color.mjs';\nimport '../../_chunks/dep-b089fa1f.mjs';\nimport '../../_chunks/dep-8e411f1c.mjs';\nimport '../../_chunks/dep-12bcaf4a.mjs';\nimport '../../_chunks/dep-40e59b4b.mjs';\nimport '../../_chunks/dep-30b3f256.mjs';\nimport '../../_chunks/dep-cb814df4.mjs';\nimport '../../_chunks/dep-cd533155.mjs';\nimport '../../_chunks/dep-ab439391.mjs';\nimport '../../_chunks/dep-60d62610.mjs';\nimport '../../_chunks/dep-2adf18a2.mjs';\nimport '../../_chunks/dep-413fbf03.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-66473aa9.mjs';\nimport '../../_chunks/dep-715774e0.mjs';\nimport '../../_chunks/dep-5a5a1764.mjs';\nimport '../../_chunks/dep-37e3e644.mjs';\nimport '../../_chunks/dep-31dc0415.mjs';\nimport '../../_chunks/dep-e5142249.mjs';\nimport '../../_chunks/dep-c4f80cb4.mjs';\nimport '../../_chunks/dep-996b4900.mjs';\nimport '../../_chunks/dep-3108c312.mjs';\nimport '../../_chunks/dep-93498383.mjs';\nimport '../../_chunks/dep-36582a92.mjs';\nimport '../../_chunks/dep-a2db6df1.mjs';\nimport '../../_chunks/dep-0f89a1dd.mjs';\nimport '../../_chunks/dep-d4da440a.mjs';\nimport '../../_chunks/dep-013382c3.mjs';\nimport '../../_chunks/dep-ca764006.mjs';\nimport '../../_chunks/dep-2ee9d497.mjs';\nimport '../../_chunks/dep-c545db54.mjs';\nimport '../../_chunks/dep-3f15cb30.mjs';\nimport '../../_chunks/dep-fd2b6c64.mjs';\nimport '../../_chunks/dep-b3734774.mjs';\nimport '../../_chunks/dep-a4a3ac25.mjs';\nimport '../../_chunks/dep-6861d388.mjs';\nimport '../../_chunks/dep-396d852b.mjs';\nimport '../../_chunks/dep-8a3fd140.mjs';\nimport '../../_chunks/dep-5db0da5c.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-bf19d9ba.mjs';\nimport '../../_chunks/dep-6963a882.mjs';\nimport '../../config-provider/type.mjs';\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar SaturationPanel = defineComponent({\n  name: \"SaturationPanel\",\n  props: _objectSpread({}, baseProps),\n  setup: function setup(props) {\n    var baseClassName = useBaseClassName();\n    var refPanel = ref(null);\n    var refThumb = ref(null);\n    var dragInstance = ref(null);\n    var panelRect = reactive({\n      width: SATURATION_PANEL_DEFAULT_WIDTH,\n      height: SATURATION_PANEL_DEFAULT_HEIGHT\n    });\n    var styles = computed(function () {\n      var _props$color = props.color,\n        saturation = _props$color.saturation,\n        value = _props$color.value;\n      var width = panelRect.width,\n        height = panelRect.height;\n      var top = Math.round((1 - value) * height);\n      var left = Math.round(saturation * width);\n      return {\n        color: props.color.rgb,\n        left: \"\".concat(left, \"px\"),\n        top: \"\".concat(top, \"px\")\n      };\n    });\n    var getSaturationAndValueByCoordinate = function getSaturationAndValueByCoordinate(coordinate) {\n      var width = panelRect.width,\n        height = panelRect.height;\n      var x = coordinate.x,\n        y = coordinate.y;\n      var saturation = Math.round(x / width * 100);\n      var value = Math.round((1 - y / height) * 100);\n      return {\n        saturation: saturation,\n        value: value\n      };\n    };\n    var handleDrag = function handleDrag(coordinate, isEnded) {\n      if (props.disabled) {\n        return;\n      }\n      var _getSaturationAndValu = getSaturationAndValueByCoordinate(coordinate),\n        saturation = _getSaturationAndValu.saturation,\n        value = _getSaturationAndValu.value;\n      props.onChange({\n        saturation: saturation / 100,\n        value: value / 100,\n        addUsedColor: isEnded\n      });\n    };\n    var handleDragEnd = function handleDragEnd(coordinate) {\n      if (props.disabled) {\n        return;\n      }\n      nextTick(function () {\n        handleDrag(coordinate, true);\n      });\n    };\n    var panelBackground = computed(function () {\n      return \"hsl(\".concat(props.color.hue, \", 100%, 50%)\");\n    });\n    onMounted(function () {\n      panelRect.width = refPanel.value.offsetWidth || SATURATION_PANEL_DEFAULT_WIDTH;\n      panelRect.height = refPanel.value.offsetHeight || SATURATION_PANEL_DEFAULT_HEIGHT;\n      dragInstance.value = new Draggable(refPanel.value, {\n        start: function start() {\n          panelRect.width = refPanel.value.offsetWidth;\n          panelRect.height = refPanel.value.offsetHeight;\n        },\n        drag: function drag(coordinate) {\n          handleDrag(coordinate);\n        },\n        end: handleDragEnd\n      });\n    });\n    onBeforeUnmount(function () {\n      dragInstance.value.destroy();\n    });\n    return {\n      baseClassName: baseClassName,\n      refThumb: refThumb,\n      refPanel: refPanel,\n      styles: styles,\n      panelBackground: panelBackground\n    };\n  },\n  render: function render() {\n    var baseClassName = this.baseClassName,\n      styles = this.styles,\n      panelBackground = this.panelBackground;\n    return createVNode(\"div\", {\n      \"class\": [\"\".concat(baseClassName, \"__saturation\")],\n      \"ref\": \"refPanel\",\n      \"style\": {\n        background: panelBackground\n      }\n    }, [createVNode(\"span\", {\n      \"class\": [\"\".concat(baseClassName, \"__thumb\")],\n      \"role\": \"slider\",\n      \"tabindex\": 0,\n      \"ref\": \"refThumb\",\n      \"style\": styles\n    }, null)]);\n  }\n});\nexport { SaturationPanel as default };","map":{"version":3,"names":["SaturationPanel","defineComponent","name","props","_objectSpread","baseProps","setup","baseClassName","useBaseClassName","refPanel","ref","refThumb","dragInstance","panelRect","reactive","width","SATURATION_PANEL_DEFAULT_WIDTH","height","SATURATION_PANEL_DEFAULT_HEIGHT","styles","computed","_props$color","color","saturation","value","top","Math","round","left","rgb","concat","getSaturationAndValueByCoordinate","coordinate","x","y","handleDrag","isEnded","disabled","_getSaturationAndValu","onChange","addUsedColor","handleDragEnd","nextTick","panelBackground","hue","onMounted","offsetWidth","offsetHeight","Draggable","start","drag","end","onBeforeUnmount","destroy","render","createVNode","background"],"sources":["../../../src/color-picker/panel/saturation.tsx"],"sourcesContent":["import { computed, defineComponent, nextTick, onBeforeUnmount, onMounted, reactive, ref } from 'vue';\nimport { SATURATION_PANEL_DEFAULT_HEIGHT, SATURATION_PANEL_DEFAULT_WIDTH } from '../const';\nimport { Draggable, Coordinate } from '../utils';\nimport { useBaseClassName } from '../hooks';\nimport baseProps from './base-props';\n\nexport default defineComponent({\n  name: 'SaturationPanel',\n\n  props: {\n    ...baseProps,\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const refPanel = ref<HTMLElement>(null);\n    const refThumb = ref<HTMLElement>(null);\n    const dragInstance = ref<Draggable>(null);\n    const panelRect = reactive({\n      width: SATURATION_PANEL_DEFAULT_WIDTH,\n      height: SATURATION_PANEL_DEFAULT_HEIGHT,\n    });\n\n    const styles = computed(() => {\n      const { saturation, value } = props.color;\n      const { width, height } = panelRect;\n      const top = Math.round((1 - value) * height);\n      const left = Math.round(saturation * width);\n      return {\n        color: props.color.rgb,\n        left: `${left}px`,\n        top: `${top}px`,\n      };\n    });\n\n    const getSaturationAndValueByCoordinate = (coordinate: Coordinate) => {\n      const { width, height } = panelRect;\n      const { x, y } = coordinate;\n      const saturation = Math.round((x / width) * 100);\n      const value = Math.round((1 - y / height) * 100);\n      return {\n        saturation,\n        value,\n      };\n    };\n\n    const handleDrag = (coordinate: Coordinate, isEnded?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      const { saturation, value } = getSaturationAndValueByCoordinate(coordinate);\n      props.onChange({\n        saturation: saturation / 100,\n        value: value / 100,\n        addUsedColor: isEnded,\n      });\n    };\n\n    const handleDragEnd = (coordinate: Coordinate) => {\n      if (props.disabled) {\n        return;\n      }\n      nextTick(() => {\n        handleDrag(coordinate, true);\n      });\n    };\n\n    const panelBackground = computed(() => {\n      return `hsl(${props.color.hue}, 100%, 50%)`;\n    });\n\n    onMounted(() => {\n      panelRect.width = refPanel.value.offsetWidth || SATURATION_PANEL_DEFAULT_WIDTH;\n      panelRect.height = refPanel.value.offsetHeight || SATURATION_PANEL_DEFAULT_HEIGHT;\n      dragInstance.value = new Draggable(refPanel.value, {\n        start() {\n          panelRect.width = refPanel.value.offsetWidth;\n          panelRect.height = refPanel.value.offsetHeight;\n        },\n        drag: (coordinate: Coordinate) => {\n          handleDrag(coordinate);\n        },\n        end: handleDragEnd,\n      });\n    });\n\n    onBeforeUnmount(() => {\n      dragInstance.value.destroy();\n    });\n\n    return {\n      baseClassName,\n      refThumb,\n      refPanel,\n      styles,\n      panelBackground,\n    };\n  },\n  render() {\n    const { baseClassName, styles, panelBackground } = this;\n    return (\n      <div\n        class={[`${baseClassName}__saturation`]}\n        ref=\"refPanel\"\n        style={{\n          background: panelBackground,\n        }}\n      >\n        <span class={[`${baseClassName}__thumb`]} role=\"slider\" tabindex={0} ref=\"refThumb\" style={styles}></span>\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}