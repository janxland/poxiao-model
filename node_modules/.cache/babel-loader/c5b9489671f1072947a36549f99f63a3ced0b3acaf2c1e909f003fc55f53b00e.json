{"ast":null,"code":"/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-a5dfe884.mjs';\nimport { ref, computed } from 'vue';\nimport '../_chunks/dep-d33c5d88.mjs';\nvar useDrag = function useDrag(props) {\n  var isSizeDragging = ref(false);\n  var draggedSizeValue = ref(null);\n  var enableDrag = function enableDrag() {\n    document.addEventListener(\"mouseup\", handleMouseup, true);\n    document.addEventListener(\"mousemove\", handleMousemove, true);\n    isSizeDragging.value = true;\n  };\n  var handleMouseup = function handleMouseup() {\n    document.removeEventListener(\"mouseup\", handleMouseup, true);\n    document.removeEventListener(\"mousemove\", handleMousemove, true);\n    isSizeDragging.value = false;\n  };\n  var handleMousemove = function handleMousemove(e) {\n    var x = e.x,\n      y = e.y;\n    var maxHeight = document.documentElement.clientHeight;\n    var maxWidth = document.documentElement.clientWidth;\n    var offsetHeight = 8;\n    var offsetWidth = 8;\n    if (isSizeDragging.value && props.sizeDraggable) {\n      if (props.placement === \"right\") {\n        var moveLeft = Math.min(Math.max(maxWidth - x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = \"\".concat(moveLeft, \"px\");\n      }\n      if (props.placement === \"left\") {\n        var moveRight = Math.min(Math.max(x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = \"\".concat(moveRight, \"px\");\n      }\n      if (props.placement === \"top\") {\n        var moveBottom = Math.min(Math.max(y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = \"\".concat(moveBottom, \"px\");\n      }\n      if (props.placement === \"bottom\") {\n        var moveTop = Math.min(Math.max(maxHeight - y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = \"\".concat(moveTop, \"px\");\n      }\n    }\n  };\n  var draggableLineStyles = computed(function () {\n    var isHorizontal = [\"right\", \"left\"].includes(props.placement);\n    var oppositeMap = {\n      left: \"right\",\n      right: \"left\",\n      top: \"bottom\",\n      bottom: \"top\"\n    };\n    return _defineProperty(_defineProperty(_defineProperty(_defineProperty({\n      zIndex: 1,\n      position: \"absolute\",\n      background: \"transparent\"\n    }, oppositeMap[props.placement], 0), \"width\", isHorizontal ? \"16px\" : \"100%\"), \"height\", isHorizontal ? \"100%\" : \"16px\"), \"cursor\", isHorizontal ? \"col-resize\" : \"row-resize\");\n  });\n  return {\n    draggedSizeValue: draggedSizeValue,\n    enableDrag: enableDrag,\n    draggableLineStyles: draggableLineStyles\n  };\n};\nexport { useDrag };","map":{"version":3,"names":["useDrag","props","isSizeDragging","ref","draggedSizeValue","enableDrag","document","addEventListener","handleMouseup","handleMousemove","value","removeEventListener","e","x","y","maxHeight","documentElement","clientHeight","maxWidth","clientWidth","offsetHeight","offsetWidth","sizeDraggable","placement","moveLeft","Math","min","max","concat","moveRight","moveBottom","moveTop","draggableLineStyles","computed","isHorizontal","includes","oppositeMap","left","right","top","bottom","_defineProperty","zIndex","position","background"],"sources":["../../src/drawer/hooks.ts"],"sourcesContent":["import { computed, ref } from 'vue';\nimport { Styles } from '../common';\nimport type { TdDrawerProps } from './type';\n\nexport const useDrag = (props: TdDrawerProps) => {\n  // 以下为拖拽改变抽屉大小相关 可以抽成hooks\n  const isSizeDragging = ref(false);\n  const draggedSizeValue = ref<string>(null);\n\n  const enableDrag = () => {\n    // mousedown绑定mousemove和mouseup事件\n    document.addEventListener('mouseup', handleMouseup, true);\n    document.addEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = true;\n  };\n\n  const handleMouseup = () => {\n    document.removeEventListener('mouseup', handleMouseup, true);\n    document.removeEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = false;\n  };\n\n  const handleMousemove = (e: MouseEvent) => {\n    // 鼠标移动时计算draggedSizeValue的值\n    const { x, y } = e;\n    const maxHeight = document.documentElement.clientHeight;\n    const maxWidth = document.documentElement.clientWidth;\n    const offsetHeight = 8;\n    const offsetWidth = 8;\n\n    if (isSizeDragging.value && props.sizeDraggable) {\n      if (props.placement === 'right') {\n        const moveLeft = Math.min(Math.max(maxWidth - x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = `${moveLeft}px`;\n      }\n      if (props.placement === 'left') {\n        const moveRight = Math.min(Math.max(x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = `${moveRight}px`;\n      }\n      if (props.placement === 'top') {\n        const moveBottom = Math.min(Math.max(y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = `${moveBottom}px`;\n      }\n      if (props.placement === 'bottom') {\n        const moveTop = Math.min(Math.max(maxHeight - y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = `${moveTop}px`;\n      }\n    }\n  };\n\n  const draggableLineStyles = computed(() => {\n    // 设置拖拽control的样式\n    const isHorizontal = ['right', 'left'].includes(props.placement);\n    const oppositeMap = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    return {\n      zIndex: 1,\n      position: 'absolute',\n      background: 'transparent',\n      [oppositeMap[props.placement]]: 0,\n      width: isHorizontal ? '16px' : '100%',\n      height: isHorizontal ? '100%' : '16px',\n      cursor: isHorizontal ? 'col-resize' : 'row-resize',\n    } as Styles;\n  });\n\n  return { draggedSizeValue, enableDrag, draggableLineStyles };\n};\n"],"mappings":";;;;;;;;;IAIaA,OAAA,GAAU,SAAVA,QAAWC,KAAyB;EAEzC,IAAAC,cAAA,GAAiBC,GAAA,CAAI,KAAK;EAC1B,IAAAC,gBAAA,GAAmBD,GAAA,CAAY,IAAI;EAEzC,IAAME,UAAA,GAAa,SAAbA,WAAA,EAAmB;IAEdC,QAAA,CAAAC,gBAAA,CAAiB,SAAW,EAAAC,aAAA,EAAe,IAAI;IAC/CF,QAAA,CAAAC,gBAAA,CAAiB,WAAa,EAAAE,eAAA,EAAiB,IAAI;IAC5DP,cAAA,CAAeQ,KAAQ;GACzB;EAEA,IAAMF,aAAA,GAAgB,SAAhBA,cAAA,EAAsB;IACjBF,QAAA,CAAAK,mBAAA,CAAoB,SAAW,EAAAH,aAAA,EAAe,IAAI;IAClDF,QAAA,CAAAK,mBAAA,CAAoB,WAAa,EAAAF,eAAA,EAAiB,IAAI;IAC/DP,cAAA,CAAeQ,KAAQ;GACzB;EAEM,IAAAD,eAAA,GAAkB,SAAlBA,gBAAmBG,CAAkB;IAEnC,IAAEC,CAAG,GAAMD,CAAA,CAATC,CAAG;MAAAC,CAAA,GAAMF,CAAA,CAANE,CAAA;IACL,IAAAC,SAAA,GAAYT,QAAA,CAASU,eAAgB,CAAAC,YAAA;IACrC,IAAAC,QAAA,GAAWZ,QAAA,CAASU,eAAgB,CAAAG,WAAA;IAC1C,IAAMC,YAAe;IACrB,IAAMC,WAAc;IAEhB,IAAAnB,cAAA,CAAeQ,KAAS,IAAAT,KAAA,CAAMqB,aAAe;MAC3C,IAAArB,KAAA,CAAMsB,SAAA,KAAc,OAAS;QACzB,IAAAC,QAAA,GAAWC,IAAK,CAAAC,GAAA,CAAID,IAAK,CAAAE,GAAA,CAAIT,QAAA,GAAWL,CAAI,GAAAQ,WAAA,EAAaA,WAAW,GAAGH,QAAQ;QACrFd,gBAAA,CAAiBM,KAAA,MAAAkB,MAAA,CAAWJ,QAAA;MAC9B;MACI,IAAAvB,KAAA,CAAMsB,SAAA,KAAc,MAAQ;QACxB,IAAAM,SAAA,GAAYJ,IAAA,CAAKC,GAAI,CAAAD,IAAA,CAAKE,GAAA,CAAId,CAAI,GAAAQ,WAAA,EAAaA,WAAW,GAAGH,QAAQ;QAC3Ed,gBAAA,CAAiBM,KAAA,MAAAkB,MAAA,CAAWC,SAAA;MAC9B;MACI,IAAA5B,KAAA,CAAMsB,SAAA,KAAc,KAAO;QACvB,IAAAO,UAAA,GAAaL,IAAA,CAAKC,GAAI,CAAAD,IAAA,CAAKE,GAAA,CAAIb,CAAI,GAAAM,YAAA,EAAcA,YAAY,GAAGL,SAAS;QAC/EX,gBAAA,CAAiBM,KAAA,MAAAkB,MAAA,CAAWE,UAAA;MAC9B;MACI,IAAA7B,KAAA,CAAMsB,SAAA,KAAc,QAAU;QAC1B,IAAAQ,OAAA,GAAUN,IAAK,CAAAC,GAAA,CAAID,IAAK,CAAAE,GAAA,CAAIZ,SAAA,GAAYD,CAAI,GAAAM,YAAA,EAAcA,YAAY,GAAGL,SAAS;QACxFX,gBAAA,CAAiBM,KAAA,MAAAkB,MAAA,CAAWG,OAAA;MAC9B;IACF;GACF;EAEM,IAAAC,mBAAA,GAAsBC,QAAA,CAAS,YAAM;IAEzC,IAAMC,YAAA,GAAe,CAAC,SAAS,MAAM,CAAE,CAAAC,QAAA,CAASlC,KAAA,CAAMsB,SAAS;IAC/D,IAAMa,WAAc;MAClBC,IAAM;MACNC,KAAO;MACPC,GAAK;MACLC,MAAQ;KACV;IACO,OAAAC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA;MACLC,MAAQ;MACRC,QAAU;MACVC,UAAY;KACX,EAAAR,WAAY,CAAAnC,KAAA,CAAMsB,SAAa,KACzB,WAAAW,YAAA,GAAe,MAAS,sBACvBA,YAAA,GAAe,MAAS,sBACxBA,YAAA,GAAe,YAAe;EAE1C,CAAC;EAEM;IAAE9B,gBAAkB,EAAlBA,gBAAkB;IAAAC,UAAA,EAAAA,UAAA;IAAY2B,mBAAoB,EAApBA;GAAoB;AAC7D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}