{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../../_chunks/dep-4d2c39b6.mjs';\nimport { p as pick_1 } from '../../_chunks/dep-1b60f9ac.mjs';\nimport { TreeStore } from '../../_common/js/tree/tree-store.mjs';\nimport '../adapt.mjs';\nimport { watch } from 'vue';\nimport '../../_chunks/dep-0e21c401.mjs';\nimport '../../_chunks/dep-437d10c6.mjs';\nimport '../../_chunks/dep-05b564d9.mjs';\nimport '../../_chunks/dep-10c900d8.mjs';\nimport '../../_chunks/dep-1c5d24dd.mjs';\nimport '../../_chunks/dep-d33c5d88.mjs';\nimport '../../_chunks/dep-e98ea432.mjs';\nimport '../../_chunks/dep-6ad32365.mjs';\nimport '../../_chunks/dep-75628739.mjs';\nimport '../../_chunks/dep-5f15268c.mjs';\nimport '../../_chunks/dep-c70e40ae.mjs';\nimport '../../_chunks/dep-6e7655db.mjs';\nimport '../../_chunks/dep-62ad5a36.mjs';\nimport '../../_chunks/dep-f76ec896.mjs';\nimport '../../_chunks/dep-4382b808.mjs';\nimport '../../_chunks/dep-0894e3ae.mjs';\nimport '../../_chunks/dep-003c9b00.mjs';\nimport '../../_chunks/dep-d5c54b49.mjs';\nimport '../../_chunks/dep-0e5b2b76.mjs';\nimport '../../_chunks/dep-f3a27c4c.mjs';\nimport '../../_chunks/dep-b6946d89.mjs';\nimport '../../_chunks/dep-f41eb5b9.mjs';\nimport '../../_chunks/dep-e3204123.mjs';\nimport '../../_chunks/dep-fb9941c5.mjs';\nimport '../../_chunks/dep-e56cdb74.mjs';\nimport '../../_chunks/dep-3b84887f.mjs';\nimport '../../_chunks/dep-f7067d3d.mjs';\nimport '../../_chunks/dep-88c02450.mjs';\nimport '../../_chunks/dep-e7c4d7b2.mjs';\nimport '../../_chunks/dep-a5dfe884.mjs';\nimport '../../_chunks/dep-ae66bf73.mjs';\nimport '../../_chunks/dep-5d7be5c6.mjs';\nimport '../../_chunks/dep-2c32b9c0.mjs';\nimport '../../_chunks/dep-413727e7.mjs';\nimport '../../_chunks/dep-017fc8db.mjs';\nimport '../../_chunks/dep-2f0b4a52.mjs';\nimport '../../_chunks/dep-1494b54a.mjs';\nimport '../../_chunks/dep-3d61d8a6.mjs';\nimport '../../_chunks/dep-190cc0b3.mjs';\nimport '../../_chunks/dep-29a308fc.mjs';\nimport '../../_chunks/dep-18af437d.mjs';\nimport '../../_chunks/dep-28a28c00.mjs';\nimport '../../_chunks/dep-cd1b7f96.mjs';\nimport '../../_chunks/dep-c31faaef.mjs';\nimport '../../_chunks/dep-0ced8e2e.mjs';\nimport 'mitt';\nimport '../../_common/js/tree/tree-node.mjs';\nimport '../../_chunks/dep-009e46c9.mjs';\nimport '../../_chunks/dep-b20328d2.mjs';\nimport '../../_chunks/dep-c9bc2340.mjs';\nimport '../../_chunks/dep-36f0e4f4.mjs';\nimport '../../_chunks/dep-83d6a01b.mjs';\nimport '../../_chunks/dep-04ba5b59.mjs';\nimport '../../_common/js/tree/tree-node-model.mjs';\nimport '../../_chunks/dep-3c3faac3.mjs';\nimport '../../_chunks/dep-8bcdb054.mjs';\nimport '../../_chunks/dep-d090226f.mjs';\nimport '../../_chunks/dep-6ea85de8.mjs';\nimport '../../_chunks/dep-92ce9c6c.mjs';\nimport '../../_chunks/dep-dd2681d3.mjs';\nimport '../../_common/js/log/log.mjs';\nimport '../../_common/js/log/index.mjs';\nimport '../../utils/withInstall.mjs';\nimport '../../hooks/useVModel.mjs';\nimport '../../_chunks/dep-1c9d9f8d.mjs';\nimport '../../hooks/useDefaultValue.mjs';\nimport 'tdesign-icons-vue-next';\nimport '../../checkbox/index.mjs';\nimport '../../checkbox/checkbox.mjs';\nimport '../../_chunks/dep-a71c8f5b.mjs';\nimport '../../checkbox/props.mjs';\nimport '../../hooks/useRipple.mjs';\nimport '../../hooks/useKeepAnimation.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-db7324ec.mjs';\nimport '../../_chunks/dep-0223e29d.mjs';\nimport '../../_chunks/dep-eea784eb.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-0c808c2e.mjs';\nimport '../../_chunks/dep-4c103c66.mjs';\nimport '../../config-provider/type.mjs';\nimport '../../utils/set-style.mjs';\nimport '../../hooks/tnode.mjs';\nimport '../../utils/render-tnode.mjs';\nimport '../../_chunks/dep-bc75f95c.mjs';\nimport '../../checkbox/constants.mjs';\nimport '../../checkbox/hooks/useCheckboxLazyLoad.mjs';\nimport '../../_common/js/utils/observe.mjs';\nimport '../../checkbox/hooks/useKeyboardEvent.mjs';\nimport '../../_common/js/common.mjs';\nimport '../../hooks/useDisabled.mjs';\nimport '../../checkbox/group.mjs';\nimport '../../_chunks/dep-69da1a80.mjs';\nimport '../../checkbox/checkbox-group-props.mjs';\nimport '../../hooks/slot.mjs';\nimport './style/css.mjs';\nimport '../../checkbox/type.mjs';\nimport '../../loading/index.mjs';\nimport '../../_chunks/dep-c4a2d318.mjs';\nimport '../../_chunks/dep-143154a5.mjs';\nimport '../../_chunks/dep-69610219.mjs';\nimport '../../_chunks/dep-8cc70cb2.mjs';\nimport '../../loading/plugin.mjs';\nimport '../../loading/loading.mjs';\nimport '../../loading/icon/gradient.mjs';\nimport '../../_common/js/loading/circle-adapter.mjs';\nimport '../../_common/js/utils/set-style.mjs';\nimport '../../_common/js/utils/helper.mjs';\nimport '../../_chunks/dep-8325f53f.mjs';\nimport '../../utils/dom.mjs';\nimport '../../utils/easing.mjs';\nimport '../../loading/props.mjs';\nimport '../../hooks/useTeleport.mjs';\nimport '../../loading/type.mjs';\nimport '../../hooks/useGlobalIcon.mjs';\nimport '../../hooks/useLazyLoad.mjs';\nimport '../../hooks/useVirtualScrollNew.mjs';\nimport '../../hooks/useResizeObserver.mjs';\nimport '../../_chunks/dep-1e57b42e.mjs';\nimport '../../_chunks/dep-67dca09a.mjs';\nimport '../../_chunks/dep-8ee0987a.mjs';\nfunction useTreeStore(state) {\n  var props = state.props,\n    context = state.context,\n    refProps = state.refProps;\n  var valueMode = props.valueMode,\n    filter = props.filter,\n    keys = props.keys;\n  var store = new TreeStore({\n    valueMode: valueMode,\n    filter: filter\n  });\n  var tValue = state.vmValue[0];\n  var tActived = state.vmActived[0];\n  var tExpanded = state.vmExpanded[0];\n  var updateStoreConfig = function updateStoreConfig() {\n    var storeProps = pick_1(props, [\"expandAll\", \"expandLevel\", \"expandMutex\", \"expandParent\", \"activable\", \"activeMultiple\", \"disabled\", \"disableCheck\", \"checkable\", \"draggable\", \"checkStrictly\", \"load\", \"lazy\", \"valueMode\", \"filter\", \"allowFoldNodeOnFilter\"]);\n    store.setConfig(storeProps);\n  };\n  var updateExpanded = function updateExpanded() {\n    var expandParent = props.expandParent;\n    if (!Array.isArray(tExpanded.value)) return;\n    var expandedMap = /* @__PURE__ */new Map();\n    tExpanded.value.forEach(function (val) {\n      expandedMap.set(val, true);\n      if (expandParent) {\n        var node = store.getNode(val);\n        if (node) {\n          node.getModel().getParents().forEach(function (tn) {\n            expandedMap.set(tn.value, true);\n          });\n        }\n      }\n    });\n    var expandedArr = Array.from(expandedMap.keys());\n    store.setExpanded(expandedArr);\n  };\n  var filterChanged = false;\n  var prevExpanded = null;\n  var expandFilterPath = function expandFilterPath() {\n    if (!props.allowFoldNodeOnFilter) return;\n    if (!filterChanged) return;\n    filterChanged = false;\n    if (props.filter) {\n      if (!prevExpanded) {\n        prevExpanded = store.getExpanded();\n      }\n      var pathValues = [];\n      var allNodes = store.getNodes();\n      allNodes.forEach(function (node) {\n        if (node.vmIsLocked) {\n          pathValues.push(node.value);\n        }\n      });\n      store.setExpanded(pathValues);\n    } else if (prevExpanded) {\n      store.replaceExpanded(prevExpanded);\n      prevExpanded = null;\n    }\n  };\n  var checkFilterExpand = function checkFilterExpand(newFilter, previousFilter) {\n    if (!props.allowFoldNodeOnFilter) return;\n    filterChanged = newFilter !== previousFilter;\n  };\n  var handleLoad = function handleLoad(info) {\n    var node = info.node;\n    var evtCtx = {\n      node: node.getModel()\n    };\n    if (Array.isArray(tValue.value) && tValue.value.length > 0) {\n      store.replaceChecked(tValue.value);\n    }\n    if (Array.isArray(tExpanded.value) && tExpanded.value.length > 0) {\n      store.replaceExpanded(tExpanded.value);\n    }\n    if (Array.isArray(tActived.value) && tActived.value.length > 0) {\n      store.replaceActived(tActived.value);\n    }\n    if (props !== null && props !== void 0 && props.onLoad) {\n      props === null || props === void 0 || props.onLoad(evtCtx);\n    }\n    context.emit(\"load\", evtCtx);\n  };\n  var rebuild = function rebuild(list) {\n    store.reload(list || []);\n    store.refreshNodes();\n    if (Array.isArray(tValue.value)) {\n      store.setChecked(tValue.value);\n    }\n    updateExpanded();\n    if (Array.isArray(tActived.value)) {\n      store.setActived(tActived.value);\n    }\n    store.refreshState();\n  };\n  function initStore() {\n    store.setConfig({\n      keys: keys\n    });\n    updateStoreConfig();\n    store.append(props.data || []);\n    store.refreshNodes();\n    if (Array.isArray(tValue.value)) {\n      store.setChecked(tValue.value);\n    }\n    updateExpanded();\n    if (Array.isArray(tActived.value)) {\n      store.setActived(tActived.value);\n    }\n    store.emitter.on(\"load\", handleLoad);\n    store.emitter.on(\"update\", expandFilterPath);\n  }\n  initStore();\n  state.setStore(store);\n  watch(function () {\n    return _toConsumableArray(tValue.value || []);\n  }, function (nVal) {\n    store.replaceChecked(nVal);\n  });\n  watch(function () {\n    return _toConsumableArray(tExpanded.value || []);\n  }, function (nVal) {\n    store.replaceExpanded(nVal);\n  });\n  watch(function () {\n    return _toConsumableArray(tActived.value || []);\n  }, function (nVal) {\n    store.replaceActived(nVal);\n  });\n  watch(refProps.filter, function (nVal, previousVal) {\n    checkFilterExpand(nVal, previousVal);\n  });\n  watch(refProps.keys, function (keys2) {\n    store.setConfig({\n      keys: keys2\n    });\n  });\n  return {\n    store: store,\n    rebuild: rebuild,\n    checkFilterExpand: checkFilterExpand,\n    updateStoreConfig: updateStoreConfig,\n    updateExpanded: updateExpanded,\n    expandFilterPath: expandFilterPath\n  };\n}\nexport { useTreeStore as default };","map":{"version":3,"names":["useTreeStore","state","props","context","refProps","valueMode","filter","keys","store","TreeStore","tValue","vmValue","tActived","vmActived","tExpanded","vmExpanded","updateStoreConfig","storeProps","pick_1","setConfig","updateExpanded","expandParent","Array","isArray","value","expandedMap","Map","forEach","val","set","node","getNode","getModel","getParents","tn","expandedArr","from","setExpanded","filterChanged","prevExpanded","expandFilterPath","allowFoldNodeOnFilter","getExpanded","pathValues","allNodes","getNodes","vmIsLocked","push","replaceExpanded","checkFilterExpand","newFilter","previousFilter","handleLoad","info","evtCtx","length","replaceChecked","replaceActived","onLoad","emit","rebuild","list","reload","refreshNodes","setChecked","setActived","refreshState","initStore","append","data","emitter","on","setStore","watch","_toConsumableArray","nVal","previousVal","keys2"],"sources":["../../../src/tree/hooks/useTreeStore.ts"],"sourcesContent":["import pick from 'lodash/pick';\nimport { TreeStore } from '../../_common/js/tree/tree-store';\nimport { watch, TypeRef } from '../adapt';\nimport {\n  TreeProps,\n  TypeValueMode,\n  TreeNodeValue,\n  TypeEventState,\n  TypeTreeNodeModel,\n  TypeTreeNode,\n  TypeTNodeValue,\n  TypeTreeState,\n} from '../tree-types';\n\nexport default function useTreeStore(state: TypeTreeState) {\n  const { props, context, refProps } = state;\n  const { valueMode, filter, keys } = props;\n\n  const store: TreeStore = new TreeStore({\n    valueMode: valueMode as TypeValueMode,\n    filter,\n  });\n\n  // tValue 就是 refProps.value\n  const tValue = state.vmValue[0] as TypeRef<TreeNodeValue[]>;\n  // tActived 就是 refProps.actived\n  const tActived = state.vmActived[0] as TypeRef<TypeTNodeValue[]>;\n  // tExpanded 就是 refProps.expanded\n  const tExpanded = state.vmExpanded[0] as TypeRef<TypeTNodeValue[]>;\n\n  // 同步 Store 选项\n  const updateStoreConfig = () => {\n    // 统一更新选项，然后在 store 统一识别属性更新\n    // 注意: keys 属性比较特殊，不应该在实例化之后再次变更\n    const storeProps = pick(props, [\n      'expandAll',\n      'expandLevel',\n      'expandMutex',\n      'expandParent',\n      'activable',\n      'activeMultiple',\n      'disabled',\n      'disableCheck',\n      'checkable',\n      'draggable',\n      'checkStrictly',\n      'load',\n      'lazy',\n      'valueMode',\n      'filter',\n      'allowFoldNodeOnFilter',\n    ]);\n    store.setConfig(storeProps);\n  };\n\n  const updateExpanded = () => {\n    const { expandParent } = props;\n    if (!Array.isArray(tExpanded.value)) return;\n    // 初始化展开状态\n    // 校验是否自动展开父节点\n    const expandedMap = new Map();\n    tExpanded.value.forEach((val) => {\n      expandedMap.set(val, true);\n      if (expandParent) {\n        const node = store.getNode(val);\n        if (node) {\n          node\n            .getModel()\n            .getParents()\n            .forEach((tn: TypeTreeNodeModel) => {\n              expandedMap.set(tn.value, true);\n            });\n        }\n      }\n    });\n    const expandedArr = Array.from(expandedMap.keys());\n    store.setExpanded(expandedArr);\n  };\n\n  let filterChanged = false;\n  let prevExpanded: null | TypeTNodeValue[] = null;\n\n  // store 的 update 方法触发后，可以拿到搜索命中节点的路径节点\n  // 所以在 update 之后检查，如果之前 filter 有变更，则检查路径节点是否需要展开\n  // 如果 filter 属性被清空，则重置为开启搜索之前的结果\n  const expandFilterPath = () => {\n    if (!props.allowFoldNodeOnFilter) return;\n    if (!filterChanged) return;\n    // 确保 filter 属性未变更时，不会重复检查展开状态\n    filterChanged = false;\n\n    if (props.filter) {\n      if (!prevExpanded) {\n        // 缓存之前的展开状态\n        prevExpanded = store.getExpanded();\n      }\n\n      // 展开搜索命中节点的路径节点\n      const pathValues: TypeTNodeValue[] = [];\n      const allNodes: TypeTreeNode[] = store.getNodes();\n      allNodes.forEach((node: TypeTreeNode) => {\n        if (node.vmIsLocked) {\n          pathValues.push(node.value);\n        }\n      });\n      store.setExpanded(pathValues);\n    } else if (prevExpanded) {\n      // filter 属性置空，该还原之前的展开状态了\n      store.replaceExpanded(prevExpanded);\n      prevExpanded = null;\n    }\n  };\n\n  // 这个方法监听 filter 属性，仅在 allowFoldNodeOnFilter 属性为 true 时生效\n  // 仅在 filter 属性发生变更时开启检查开关，避免其他操作也触发展开状态的重置\n  const checkFilterExpand = (newFilter: null | Function, previousFilter: null | Function) => {\n    if (!props.allowFoldNodeOnFilter) return;\n    filterChanged = newFilter !== previousFilter;\n  };\n\n  const handleLoad = (info: TypeEventState) => {\n    const { node } = info;\n    const evtCtx = {\n      node: node.getModel(),\n    };\n    if (Array.isArray(tValue.value) && tValue.value.length > 0) {\n      store.replaceChecked(tValue.value);\n    }\n    if (Array.isArray(tExpanded.value) && tExpanded.value.length > 0) {\n      store.replaceExpanded(tExpanded.value);\n    }\n    if (Array.isArray(tActived.value) && tActived.value.length > 0) {\n      store.replaceActived(tActived.value);\n    }\n    if (props?.onLoad) {\n      props?.onLoad(evtCtx);\n    }\n    context.emit('load', evtCtx);\n  };\n\n  const rebuild = (list: TreeProps['data']) => {\n    store.reload(list || []);\n    store.refreshNodes();\n    // 初始化选中状态\n    if (Array.isArray(tValue.value)) {\n      store.setChecked(tValue.value);\n    }\n    // 更新展开状态\n    updateExpanded();\n    // 初始化激活状态\n    if (Array.isArray(tActived.value)) {\n      store.setActived(tActived.value);\n    }\n    // 刷新节点状态\n    store.refreshState();\n  };\n\n  function initStore() {\n    // keys 属性比较特殊，不应该在实例化之后再次变更\n    store.setConfig({\n      keys,\n    });\n    updateStoreConfig();\n    store.append(props.data || []);\n\n    // 刷新节点，必须在配置选中之前执行\n    // 这样选中态联动判断才能找到父节点\n    store.refreshNodes();\n\n    // 初始化选中状态\n    if (Array.isArray(tValue.value)) {\n      store.setChecked(tValue.value);\n    }\n\n    // 更新节点展开状态\n    updateExpanded();\n\n    // 初始化激活状态\n    if (Array.isArray(tActived.value)) {\n      store.setActived(tActived.value);\n    }\n\n    store.emitter.on('load', handleLoad);\n    store.emitter.on('update', expandFilterPath);\n  }\n\n  // 初始化 store\n  initStore();\n  // 设置初始化状态\n  state.setStore(store);\n  // 配置属性监听\n  watch(\n    () => [...(tValue.value || [])],\n    (nVal: TreeNodeValue[]) => {\n      store.replaceChecked(nVal);\n    },\n  );\n  watch(\n    () => [...(tExpanded.value || [])],\n    (nVal: TreeNodeValue[]) => {\n      store.replaceExpanded(nVal);\n    },\n  );\n  watch(\n    () => [...(tActived.value || [])],\n    (nVal: TreeNodeValue[]) => {\n      store.replaceActived(nVal);\n    },\n  );\n\n  watch(refProps.filter, (nVal, previousVal) => {\n    checkFilterExpand(nVal, previousVal);\n  });\n  watch(refProps.keys, (keys) => {\n    store.setConfig({\n      keys,\n    });\n  });\n\n  return {\n    store,\n    rebuild,\n    checkFilterExpand,\n    updateStoreConfig,\n    updateExpanded,\n    expandFilterPath,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}