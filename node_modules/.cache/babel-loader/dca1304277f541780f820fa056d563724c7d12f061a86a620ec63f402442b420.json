{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _defineProperty } from '../_chunks/dep-a5dfe884.mjs';\nimport { defineComponent, ref, provide, createVNode } from 'vue';\nimport { i as isNil_1 } from '../_chunks/dep-83d6a01b.mjs';\nimport { i as isArray_1 } from '../_chunks/dep-10c900d8.mjs';\nimport { useTNodeJSX } from '../hooks/tnode.mjs';\nimport { useChildComponentSlots } from '../hooks/slot.mjs';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig.mjs';\nimport props from './props.mjs';\nimport { descriptionsKey } from './const/index.mjs';\nimport DescriptionsRow from './descriptions-row.mjs';\nimport { renderCustomNode, itemTypeIsProps } from './utils/index.mjs';\nimport { ItemsType } from './interface.mjs';\nimport '../_chunks/dep-d33c5d88.mjs';\nimport '../_chunks/dep-437d10c6.mjs';\nimport '../_chunks/dep-6e7655db.mjs';\nimport '../_chunks/dep-6ad32365.mjs';\nimport '../_chunks/dep-62ad5a36.mjs';\nimport '../_chunks/dep-f76ec896.mjs';\nimport '../_chunks/dep-190cc0b3.mjs';\nimport '../_chunks/dep-003c9b00.mjs';\nimport '../_chunks/dep-1c5d24dd.mjs';\nimport '../_chunks/dep-e98ea432.mjs';\nimport '../_chunks/dep-75628739.mjs';\nimport '../_chunks/dep-29a308fc.mjs';\nimport '../_chunks/dep-18af437d.mjs';\nimport '../_chunks/dep-28a28c00.mjs';\nimport '../_chunks/dep-1c9d9f8d.mjs';\nimport '../utils/render-tnode.mjs';\nimport '../_chunks/dep-bc75f95c.mjs';\nimport '../_chunks/dep-6ea85de8.mjs';\nimport '../_chunks/dep-0ced8e2e.mjs';\nimport '../_chunks/dep-fb9941c5.mjs';\nimport '../_chunks/dep-4382b808.mjs';\nimport '../_chunks/dep-1494b54a.mjs';\nimport '../_chunks/dep-c70e40ae.mjs';\nimport '../_chunks/dep-92ce9c6c.mjs';\nimport '../_chunks/dep-e3204123.mjs';\nimport '../_chunks/dep-5d7be5c6.mjs';\nimport '../config-provider/useConfig.mjs';\nimport '../_chunks/dep-db7324ec.mjs';\nimport '../_chunks/dep-d090226f.mjs';\nimport '../_chunks/dep-c31faaef.mjs';\nimport '../_chunks/dep-5f15268c.mjs';\nimport '../_chunks/dep-0894e3ae.mjs';\nimport '../_chunks/dep-0e5b2b76.mjs';\nimport '../_chunks/dep-f3a27c4c.mjs';\nimport '../_chunks/dep-b6946d89.mjs';\nimport '../_chunks/dep-3b84887f.mjs';\nimport '../_chunks/dep-0223e29d.mjs';\nimport '../_chunks/dep-3d61d8a6.mjs';\nimport '../_chunks/dep-88c02450.mjs';\nimport '../_chunks/dep-f7067d3d.mjs';\nimport '../_chunks/dep-cd1b7f96.mjs';\nimport '../_chunks/dep-eea784eb.mjs';\nimport '../_common/js/global-config/default-config.mjs';\nimport '../_common/js/global-config/locale/zh_CN.mjs';\nimport '../_chunks/dep-0c808c2e.mjs';\nimport '../_chunks/dep-4c103c66.mjs';\nimport '../config-provider/type.mjs';\nvar _Descriptions = defineComponent({\n  name: \"TDescriptions\",\n  props: props,\n  setup: function setup(props2) {\n    var COMPONENT_NAME = usePrefixClass(\"descriptions\");\n    var _useCommonClassName = useCommonClassName(),\n      SIZE = _useCommonClassName.SIZE;\n    var getChildByName = useChildComponentSlots();\n    var renderTNodeJSX = useTNodeJSX();\n    var itemsType = ref(ItemsType.props);\n    var getRows = function getRows() {\n      var column = props2.column,\n        layout = props2.layout;\n      var items = [];\n      if (isArray_1(props2.items)) {\n        items = props2.items.map(function (item) {\n          return {\n            label: renderCustomNode(item.label),\n            content: renderCustomNode(item.content),\n            span: item.span || 1\n          };\n        });\n        itemsType.value = ItemsType.props;\n      } else {\n        var slots = getChildByName(\"TDescriptionsItem\");\n        if (slots.length !== 0) {\n          items = slots;\n          itemsType.value = ItemsType.slots;\n        }\n      }\n      if (layout === \"vertical\") {\n        return [items];\n      }\n      var temp = [];\n      var reset = column;\n      var res = [];\n      items.forEach(function (item, index) {\n        var span = 1;\n        if (itemTypeIsProps(itemsType.value, item)) {\n          span = isNil_1(item.span) ? span : item.span;\n        } else {\n          var _item$props;\n          item.props = item.props || {};\n          span = isNil_1((_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.span) ? span : item.props.span;\n          item.props.span = span;\n        }\n        if (reset >= span) {\n          temp.push(item);\n          reset -= span;\n        } else {\n          res.push(temp);\n          temp = [item];\n          reset = column - span;\n        }\n        if (index === items.length - 1) {\n          if (itemTypeIsProps(itemsType.value, item)) {\n            item.span += reset;\n          } else {\n            item.props.span += reset;\n          }\n          res.push(temp);\n        }\n      });\n      return res;\n    };\n    provide(descriptionsKey, props2);\n    var renderBody = function renderBody() {\n      var tableClass = [\"\".concat(COMPONENT_NAME.value, \"__body\"), SIZE.value[props2.size], _defineProperty({}, \"\".concat(COMPONENT_NAME.value, \"__body--border\"), props2.bordered)];\n      return createVNode(\"table\", {\n        \"class\": tableClass\n      }, [createVNode(\"tbody\", null, [getRows().map(function (row) {\n        return createVNode(DescriptionsRow, {\n          \"item-type\": itemsType.value,\n          \"row\": row\n        }, null);\n      })])]);\n    };\n    var renderHeader = function renderHeader() {\n      var title = renderTNodeJSX(\"title\");\n      return title ? createVNode(\"div\", {\n        \"class\": \"\".concat(COMPONENT_NAME.value, \"__header\")\n      }, [title]) : \"\";\n    };\n    return function () {\n      return createVNode(\"div\", {\n        \"class\": COMPONENT_NAME.value\n      }, [renderHeader(), renderBody()]);\n    };\n  }\n});\nexport { _Descriptions as default };","map":{"version":3,"names":["_Descriptions","defineComponent","name","props","setup","props2","COMPONENT_NAME","usePrefixClass","_useCommonClassName","useCommonClassName","SIZE","getChildByName","useChildComponentSlots","renderTNodeJSX","useTNodeJSX","itemsType","ref","ItemsType","getRows","column","layout","items","isArray_1","map","item","label","renderCustomNode","content","span","value","slots","length","temp","reset","res","forEach","index","itemTypeIsProps","isNil_1","_item$props","push","provide","descriptionsKey","renderBody","tableClass","concat","size","_defineProperty","bordered","createVNode","row","DescriptionsRow","renderHeader","title"],"sources":["../../src/descriptions/descriptions.tsx"],"sourcesContent":["import isNil from 'lodash/isNil';\nimport isArray from 'lodash/isArray';\nimport { defineComponent, provide, ref } from 'vue';\n\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { useChildComponentSlots } from '../hooks/slot';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\n\nimport props from './props';\nimport { descriptionsKey } from './const';\nimport { TdDescriptionsProps } from './type';\nimport DescriptionsRow from './descriptions-row';\nimport { renderCustomNode, itemTypeIsProps } from './utils';\nimport { ItemsType, TdDescriptionItem } from './interface';\n\n/**\n * 实现思路\n * 1. 基于 table tbody tr td 来实现布局\n * 2. 通过 span 计算总共有几行以及每一行的 item 个数，特别注意最后一行，要填充满\n * 3. 整体布局：左右布局（column 和 span 生效）/上下布局（column 和 span 失效，一行一个 item）\n * 4. item 布局：左右布局/上下布局\n */\n\n/**\n * TDescriptions：承载 header（title） 和 body（table, tbody）\n * TDescriptionsRow：承载每一行（tr）\n * TDescriptionsItem：获取 item 数据（span, label, content）\n */\n\nexport default defineComponent({\n  name: 'TDescriptions',\n  props,\n  setup(props: TdDescriptionsProps) {\n    const COMPONENT_NAME = usePrefixClass('descriptions');\n    const { SIZE } = useCommonClassName();\n    const getChildByName = useChildComponentSlots();\n    const renderTNodeJSX = useTNodeJSX();\n    const itemsType = ref<ItemsType>(ItemsType.props);\n\n    // 计算渲染的行内容\n    const getRows = () => {\n      /**\n       * 1. 两种方式获取要渲染的 items\n       *  a. props 传 items\n       *  b. slots t-descriptions-item\n       * a 优先级更高\n       */\n      const { column, layout } = props;\n\n      let items: TdDescriptionItem[] = [];\n\n      if (isArray(props.items)) {\n        /**\n         * 2.1 a 方式获取 items\n         * ! 这里要支持 label: string / <div></div> / () =>  <div></div>\n         * ! 暂时没有这样一个全局的方法，所以先在组件内部写一个临时方法，无论之后是有了更好的处理方式要删除掉，还是其它组件也需要时再放到公共方法里面，都是可行的\n         */\n        items = props.items.map((item) => ({\n          label: renderCustomNode(item.label),\n          content: renderCustomNode(item.content),\n          span: item.span || 1,\n        }));\n        itemsType.value = ItemsType.props;\n      } else {\n        const slots = getChildByName('TDescriptionsItem');\n        if (slots.length !== 0) {\n          // 2.2 b 方式 获取 TDescriptionsItem\n          items = slots;\n          itemsType.value = ItemsType.slots;\n        }\n      }\n\n      // 2. 判断布局，如果整体布局为 VERTICAL，那么直接返回即可。\n      if (layout === 'vertical') {\n        return [items];\n      }\n\n      // 3. 布局为 HORIZONTAL 时，需要计算每一行的 item 个数\n      let temp: TdDescriptionItem[] = [];\n      let reset = column;\n\n      // 4. 记录结果\n      const res: TdDescriptionItem[][] = [];\n      items.forEach((item, index) => {\n        let span = 1;\n        if (itemTypeIsProps(itemsType.value, item)) {\n          span = isNil(item.span) ? span : item.span;\n        } else {\n          item.props = item.props || {};\n          span = isNil(item.props?.span) ? span : item.props.span;\n          item.props.span = span;\n        }\n\n        if (reset >= span) {\n          // 当前行还剩余空间\n          temp.push(item);\n          reset -= span;\n        } else {\n          // 当前行放不下了，放下一行\n          res.push(temp);\n          temp = [item];\n          reset = column - span;\n        }\n\n        if (index === items.length - 1) {\n          // 最后一个\n          if (itemTypeIsProps(itemsType.value, item)) {\n            item.span += reset;\n          } else {\n            item.props.span += reset;\n          }\n          res.push(temp);\n        }\n      });\n      return res;\n    };\n\n    provide(descriptionsKey, props);\n\n    const renderBody = () => {\n      const tableClass = [\n        `${COMPONENT_NAME.value}__body`,\n        SIZE.value[props.size],\n        { [`${COMPONENT_NAME.value}__body--border`]: props.bordered },\n      ];\n      return (\n        <table class={tableClass}>\n          <tbody>\n            {getRows().map((row) => (\n              <DescriptionsRow item-type={itemsType.value} row={row} />\n            ))}\n          </tbody>\n        </table>\n      );\n    };\n\n    const renderHeader = () => {\n      const title = renderTNodeJSX('title');\n      return title ? <div class={`${COMPONENT_NAME.value}__header`}>{title}</div> : '';\n    };\n\n    return () => (\n      <div class={COMPONENT_NAME.value}>\n        {renderHeader()}\n        {renderBody()}\n      </div>\n    );\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}