{"ast":null,"code":"/**\n * tdesign v1.9.0\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport useResizeObserver from '../hooks/useResizeObserver.mjs';\nimport { toRefs, ref, onBeforeUnmount, watch, nextTick, onMounted } from 'vue';\nvar ANIMATION_TIME = 100;\nfunction useInputWidth(props, inputRef, innerValue) {\n  var _toRefs = toRefs(props),\n    autoWidth = _toRefs.autoWidth,\n    placeholder = _toRefs.placeholder;\n  var inputPreRef = ref(null);\n  var observerTimer = ref(null);\n  var updateInputWidth = function updateInputWidth() {\n    if (!inputPreRef.value || !inputRef.value) return;\n    var _inputPreRef$value$ge = inputPreRef.value.getBoundingClientRect(),\n      width = _inputPreRef$value$ge.width;\n    inputRef.value.style.width = \"\".concat(width || 0, \"px\");\n  };\n  useResizeObserver(inputRef, function () {\n    if (autoWidth.value) {\n      observerTimer.value = setTimeout(function () {\n        updateInputWidth();\n        clearTimeout(observerTimer.value);\n      }, ANIMATION_TIME);\n    }\n  });\n  onBeforeUnmount(function () {\n    clearTimeout(observerTimer.value);\n  });\n  var addListeners = function addListeners() {\n    watch([innerValue, placeholder], function () {\n      if (!autoWidth.value) return;\n      nextTick(function () {\n        updateInputWidth();\n      });\n    }, {\n      immediate: true\n    });\n  };\n  onMounted(function () {\n    if (autoWidth.value) {\n      addListeners();\n    }\n  });\n  return {\n    inputPreRef: inputPreRef\n  };\n}\nexport { useInputWidth as default };","map":{"version":3,"names":["ANIMATION_TIME","useInputWidth","props","inputRef","innerValue","_toRefs","toRefs","autoWidth","placeholder","inputPreRef","ref","observerTimer","updateInputWidth","value","_inputPreRef$value$ge","getBoundingClientRect","width","style","concat","useResizeObserver","setTimeout","clearTimeout","onBeforeUnmount","addListeners","watch","nextTick","immediate","onMounted"],"sources":["../../src/input/useInputWidth.ts"],"sourcesContent":["import useResizeObserver from '../hooks/useResizeObserver';\nimport { onMounted, Ref, ref, watch, nextTick, onBeforeUnmount, toRefs } from 'vue';\nimport { InputValue, TdInputProps } from './type';\n\nconst ANIMATION_TIME = 100;\n\nexport default function useInputWidth(\n  props: TdInputProps,\n  inputRef: Ref<HTMLInputElement>,\n  innerValue: Ref<InputValue>,\n) {\n  const { autoWidth, placeholder } = toRefs(props);\n  const inputPreRef = ref<HTMLSpanElement>(null);\n  const observerTimer = ref(null);\n\n  const updateInputWidth = () => {\n    if (!inputPreRef.value || !inputRef.value) return;\n    const { width } = inputPreRef.value.getBoundingClientRect();\n    inputRef.value.style.width = `${width || 0}px`;\n  };\n\n  useResizeObserver(inputRef, () => {\n    if (autoWidth.value) {\n      observerTimer.value = setTimeout(() => {\n        updateInputWidth();\n        clearTimeout(observerTimer.value);\n      }, ANIMATION_TIME);\n    }\n  });\n\n  onBeforeUnmount(() => {\n    clearTimeout(observerTimer.value);\n  });\n\n  const addListeners = () => {\n    watch(\n      [innerValue, placeholder],\n      () => {\n        if (!autoWidth.value) return;\n        nextTick(() => {\n          updateInputWidth();\n        });\n      },\n      { immediate: true },\n    );\n  };\n\n  onMounted(() => {\n    if (autoWidth.value) {\n      addListeners();\n    }\n  });\n\n  return {\n    inputPreRef,\n  };\n}\n"],"mappings":";;;;;;;;AAIA,IAAMA,cAAiB;AAEC,SAAAC,cACtBC,KACA,EAAAC,QAAA,EACAC,UACA;EACA,IAAAC,OAAA,GAAmCC,MAAA,CAAOJ,KAAK;IAAvCK,SAAA,GAAAF,OAAA,CAAAE,SAAA;IAAWC,WAAY,GAAAH,OAAA,CAAZG,WAAY;EACzB,IAAAC,WAAA,GAAcC,GAAA,CAAqB,IAAI;EACvC,IAAAC,aAAA,GAAgBD,GAAA,CAAI,IAAI;EAE9B,IAAME,gBAAA,GAAmB,SAAnBA,iBAAA,EAAyB;IAC7B,IAAI,CAACH,WAAA,CAAYI,KAAS,KAACV,QAAS,CAAAU,KAAA,EAAO;IAC3C,IAAAC,qBAAA,GAAkBL,WAAA,CAAYI,KAAA,CAAME,qBAAsB;MAAlDC,KAAA,GAAAF,qBAAA,CAAAE,KAAA;IACRb,QAAA,CAASU,KAAM,CAAAI,KAAA,CAAMD,KAAQ,MAAAE,MAAA,CAAGF,KAAS;GAC3C;EAEAG,iBAAA,CAAkBhB,QAAA,EAAU,YAAM;IAChC,IAAII,SAAA,CAAUM,KAAO;MACLF,aAAA,CAAAE,KAAA,GAAQO,UAAA,CAAW,YAAM;QACpBR,gBAAA;QACjBS,YAAA,CAAaV,aAAA,CAAcE,KAAK;SAC/Bb,cAAc;IACnB;EACF,CAAC;EAEDsB,eAAA,CAAgB,YAAM;IACpBD,YAAA,CAAaV,aAAA,CAAcE,KAAK;EAClC,CAAC;EAED,IAAMU,YAAA,GAAe,SAAfA,aAAA,EAAqB;IACzBC,KAAA,CACE,CAACpB,UAAA,EAAYI,WAAW,GACxB,YAAM;MACJ,IAAI,CAACD,SAAU,CAAAM,KAAA,EAAO;MACtBY,QAAA,CAAS,YAAM;QACIb,gBAAA;MACnB,CAAC;IACH,GACA;MAAEc,SAAA,EAAW;IAAK,CACpB;GACF;EAEAC,SAAA,CAAU,YAAM;IACd,IAAIpB,SAAA,CAAUM,KAAO;MACNU,YAAA;IACf;EACF,CAAC;EAEM;IACLd,WAAA,EAAAA;GACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}