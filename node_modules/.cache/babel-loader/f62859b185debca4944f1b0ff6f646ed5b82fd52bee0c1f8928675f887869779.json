{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v1.9.3\n * (c) 2024 tdesign\n * @license MIT\n */\n\nimport { _ as _toConsumableArray } from '../../_chunks/dep-4d2c39b6.mjs';\nimport { computed, createVNode } from 'vue';\nimport { c as cloneDeep_1 } from '../../_chunks/dep-db7324ec.mjs';\nimport log from '../../_common/js/log/log.mjs';\nimport { getStopStyle } from '../util/common.mjs';\nimport TSliderMark from '../slider-mark.mjs';\nimport { i as isArray_1 } from '../../_chunks/dep-10c900d8.mjs';\nimport '../../_chunks/dep-0e21c401.mjs';\nimport '../../_chunks/dep-437d10c6.mjs';\nimport '../../_chunks/dep-d090226f.mjs';\nimport '../../_chunks/dep-c31faaef.mjs';\nimport '../../_chunks/dep-5f15268c.mjs';\nimport '../../_chunks/dep-c70e40ae.mjs';\nimport '../../_chunks/dep-6e7655db.mjs';\nimport '../../_chunks/dep-6ad32365.mjs';\nimport '../../_chunks/dep-d33c5d88.mjs';\nimport '../../_chunks/dep-62ad5a36.mjs';\nimport '../../_chunks/dep-f76ec896.mjs';\nimport '../../_chunks/dep-4382b808.mjs';\nimport '../../_chunks/dep-0894e3ae.mjs';\nimport '../../_chunks/dep-0ced8e2e.mjs';\nimport '../../_chunks/dep-fb9941c5.mjs';\nimport '../../_chunks/dep-75628739.mjs';\nimport '../../_chunks/dep-1494b54a.mjs';\nimport '../../_chunks/dep-0e5b2b76.mjs';\nimport '../../_chunks/dep-f3a27c4c.mjs';\nimport '../../_chunks/dep-e3204123.mjs';\nimport '../../_chunks/dep-1c5d24dd.mjs';\nimport '../../_chunks/dep-b6946d89.mjs';\nimport '../../_chunks/dep-6ea85de8.mjs';\nimport '../../_chunks/dep-92ce9c6c.mjs';\nimport '../../_chunks/dep-3b84887f.mjs';\nimport '../../_chunks/dep-5d7be5c6.mjs';\nimport '../../hooks/useConfig.mjs';\nimport '../../config-provider/useConfig.mjs';\nimport '../../_chunks/dep-0223e29d.mjs';\nimport '../../_chunks/dep-3d61d8a6.mjs';\nimport '../../_chunks/dep-88c02450.mjs';\nimport '../../_chunks/dep-f7067d3d.mjs';\nimport '../../_chunks/dep-cd1b7f96.mjs';\nimport '../../_chunks/dep-eea784eb.mjs';\nimport '../../_common/js/global-config/default-config.mjs';\nimport '../../_common/js/global-config/locale/zh_CN.mjs';\nimport '../../_chunks/dep-0c808c2e.mjs';\nimport '../../_chunks/dep-4c103c66.mjs';\nimport '../../config-provider/type.mjs';\nvar useSliderMark = function useSliderMark(config) {\n  var name = config.value.prefixName;\n  var markList = computed(function () {\n    var markProps = config.value;\n    if (!markProps.marks) {\n      return [];\n    }\n    var legalMarks = [];\n    if (isArray_1(markProps.marks)) {\n      var marksList = cloneDeep_1(markProps.marks).sort(function (a, b) {\n        return a - b;\n      });\n      var maxLimit = Math.max.apply(Math, _toConsumableArray(marksList).concat([markProps.max]));\n      var minLimit = Math.min.apply(Math, _toConsumableArray(marksList).concat([markProps.min]));\n      if (minLimit < markProps.min) {\n        log.errorOnce(\"TSlider\", \"marks min value should >= props min\");\n      }\n      if (maxLimit > markProps.max) {\n        log.errorOnce(\"TSlider\", \"marks max value should <= props max\");\n      }\n      marksList.forEach(function (item) {\n        legalMarks.push({\n          point: item,\n          position: (item - minLimit) / (maxLimit - minLimit) * 100,\n          mark: item\n        });\n      });\n    } else {\n      Object.keys(markProps.marks).map(parseFloat).sort(function (a, b) {\n        return a - b;\n      }).filter(function (point) {\n        return point <= markProps.max && point >= markProps.min;\n      }).forEach(function (point) {\n        var item = {\n          point: point,\n          position: (point - markProps.min) * 100 / (markProps.max - markProps.min),\n          mark: markProps.marks[point]\n        };\n        legalMarks.push(item);\n      });\n    }\n    return legalMarks;\n  });\n  var renderMask = function renderMask(onChangeFn) {\n    if (!markList.value.length) return null;\n    return createVNode(\"div\", null, [createVNode(\"div\", {\n      \"class\": \"\".concat(name, \"__stops\")\n    }, [markList.value.map(function (item, index) {\n      if (item.position === 0 || item.position === 100) return null;\n      return createVNode(\"div\", {\n        \"class\": \"\".concat(name, \"__stop \").concat(name, \"__mark-stop\"),\n        \"style\": getStopStyle(item.position, config.value.vertical),\n        \"key\": index\n      }, null);\n    })]), createVNode(\"div\", {\n      \"class\": \"\".concat(name, \"__mark\")\n    }, [markList.value.map(function (item, key) {\n      return createVNode(TSliderMark, {\n        \"mark\": item.mark,\n        \"point\": item.point,\n        \"key\": key,\n        \"style\": getStopStyle(item.position, config.value.vertical),\n        \"onClickMarkPoint\": onChangeFn\n      }, null);\n    })])]);\n  };\n  return renderMask;\n};\nexport { useSliderMark };","map":{"version":3,"names":["useSliderMark","config","name","value","prefixName","markList","computed","markProps","marks","legalMarks","isArray_1","marksList","cloneDeep_1","sort","a","b","maxLimit","Math","max","apply","_toConsumableArray","concat","minLimit","min","log","errorOnce","forEach","item","push","point","position","mark","Object","keys","map","parseFloat","filter","renderMask","onChangeFn","length","createVNode","index","getStopStyle","vertical","key","TSliderMark"],"sources":["../../../src/slider/hooks/useSliderMark.tsx"],"sourcesContent":["import { computed, VNode, Ref } from 'vue';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { SliderMarks } from '../type';\nimport { TNode } from '../../common';\nimport log from '../../_common/js/log/log';\nimport { getStopStyle } from '../util/common';\nimport TSliderMark from '../slider-mark';\nimport isArray from 'lodash/isArray';\n\ninterface MarkItem {\n  point: number;\n  position: number;\n  mark: string | number | TNode<{ value: number }>;\n}\n\ninterface useSliderMarkProps {\n  max: number;\n  min: number;\n  marks: number[] | SliderMarks;\n  vertical: boolean;\n  prefixName: string;\n}\n\n/**\n * 聚合管理刻度值渲染逻辑\n */\nexport const useSliderMark = (config: Ref<useSliderMarkProps>) => {\n  const name = config.value.prefixName;\n  const markList = computed(() => {\n    const markProps = config.value;\n    if (!markProps.marks) {\n      return [];\n    }\n    const legalMarks: Array<MarkItem> = [];\n    if (isArray(markProps.marks)) {\n      const marksList = cloneDeep(markProps.marks).sort((a, b) => a - b);\n      const maxLimit = Math.max(...marksList, markProps.max);\n      const minLimit = Math.min(...marksList, markProps.min);\n      if (minLimit < markProps.min) {\n        log.errorOnce('TSlider', 'marks min value should >= props min');\n      }\n      if (maxLimit > markProps.max) {\n        log.errorOnce('TSlider', 'marks max value should <= props max');\n      }\n      marksList.forEach((item) => {\n        legalMarks.push({\n          point: item,\n          position: ((item - minLimit) / (maxLimit - minLimit)) * 100,\n          mark: item,\n        });\n      });\n    } else {\n      Object.keys(markProps.marks)\n        .map(parseFloat)\n        .sort((a, b) => a - b)\n        .filter((point) => point <= markProps.max && point >= markProps.min)\n        .forEach((point) => {\n          const item: MarkItem = {\n            point,\n            position: ((point - markProps.min) * 100) / (markProps.max - markProps.min),\n            mark: markProps.marks[point],\n          };\n          legalMarks.push(item);\n        });\n    }\n    return legalMarks;\n  });\n\n  const renderMask = (onChangeFn?: (point: number) => void): VNode => {\n    if (!markList.value.length) return null;\n\n    return (\n      <div>\n        <div class={`${name}__stops`}>\n          {markList.value.map((item, index) => {\n            if (item.position === 0 || item.position === 100) return null;\n            return (\n              <div\n                class={`${name}__stop ${name}__mark-stop`}\n                style={getStopStyle(item.position, config.value.vertical)}\n                key={index}\n              />\n            );\n          })}\n        </div>\n        <div class={`${name}__mark`}>\n          {markList.value.map((item, key) => (\n            <TSliderMark\n              mark={item.mark as any}\n              point={item.point}\n              key={key}\n              style={getStopStyle(item.position, config.value.vertical)}\n              onClickMarkPoint={onChangeFn}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return renderMask;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}